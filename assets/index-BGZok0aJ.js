var ix=Object.defineProperty;var ox=(n,e,t)=>e in n?ix(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Je=(n,e,t)=>ox(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function s0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Bf={exports:{}},wl={},Uf={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K_;function ax(){if(K_)return Ne;K_=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.iterator;function E(F){return F===null||typeof F!="object"?null:(F=w&&F[w]||F["@@iterator"],typeof F=="function"?F:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,N={};function b(F,J,ge){this.props=F,this.context=J,this.refs=N,this.updater=ge||A}b.prototype.isReactComponent={},b.prototype.setState=function(F,J){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,J,"setState")},b.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function Q(){}Q.prototype=b.prototype;function B(F,J,ge){this.props=F,this.context=J,this.refs=N,this.updater=ge||A}var q=B.prototype=new Q;q.constructor=B,V(q,b.prototype),q.isPureReactComponent=!0;var G=Array.isArray,le=Object.prototype.hasOwnProperty,re={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function x(F,J,ge){var Ce,Pe={},Oe=null,Ue=null;if(J!=null)for(Ce in J.ref!==void 0&&(Ue=J.ref),J.key!==void 0&&(Oe=""+J.key),J)le.call(J,Ce)&&!k.hasOwnProperty(Ce)&&(Pe[Ce]=J[Ce]);var ze=arguments.length-2;if(ze===1)Pe.children=ge;else if(1<ze){for(var Ye=Array(ze),Ot=0;Ot<ze;Ot++)Ye[Ot]=arguments[Ot+2];Pe.children=Ye}if(F&&F.defaultProps)for(Ce in ze=F.defaultProps,ze)Pe[Ce]===void 0&&(Pe[Ce]=ze[Ce]);return{$$typeof:n,type:F,key:Oe,ref:Ue,props:Pe,_owner:re.current}}function R(F,J){return{$$typeof:n,type:F.type,key:J,ref:F.ref,props:F.props,_owner:F._owner}}function P(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function D(F){var J={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ge){return J[ge]})}var L=/\/+/g;function C(F,J){return typeof F=="object"&&F!==null&&F.key!=null?D(""+F.key):J.toString(36)}function Qe(F,J,ge,Ce,Pe){var Oe=typeof F;(Oe==="undefined"||Oe==="boolean")&&(F=null);var Ue=!1;if(F===null)Ue=!0;else switch(Oe){case"string":case"number":Ue=!0;break;case"object":switch(F.$$typeof){case n:case e:Ue=!0}}if(Ue)return Ue=F,Pe=Pe(Ue),F=Ce===""?"."+C(Ue,0):Ce,G(Pe)?(ge="",F!=null&&(ge=F.replace(L,"$&/")+"/"),Qe(Pe,J,ge,"",function(Ot){return Ot})):Pe!=null&&(P(Pe)&&(Pe=R(Pe,ge+(!Pe.key||Ue&&Ue.key===Pe.key?"":(""+Pe.key).replace(L,"$&/")+"/")+F)),J.push(Pe)),1;if(Ue=0,Ce=Ce===""?".":Ce+":",G(F))for(var ze=0;ze<F.length;ze++){Oe=F[ze];var Ye=Ce+C(Oe,ze);Ue+=Qe(Oe,J,ge,Ye,Pe)}else if(Ye=E(F),typeof Ye=="function")for(F=Ye.call(F),ze=0;!(Oe=F.next()).done;)Oe=Oe.value,Ye=Ce+C(Oe,ze++),Ue+=Qe(Oe,J,ge,Ye,Pe);else if(Oe==="object")throw J=String(F),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return Ue}function pt(F,J,ge){if(F==null)return F;var Ce=[],Pe=0;return Qe(F,Ce,"","",function(Oe){return J.call(ge,Oe,Pe++)}),Ce}function gt(F){if(F._status===-1){var J=F._result;J=J(),J.then(function(ge){(F._status===0||F._status===-1)&&(F._status=1,F._result=ge)},function(ge){(F._status===0||F._status===-1)&&(F._status=2,F._result=ge)}),F._status===-1&&(F._status=0,F._result=J)}if(F._status===1)return F._result.default;throw F._result}var Be={current:null},ie={transition:null},me={ReactCurrentDispatcher:Be,ReactCurrentBatchConfig:ie,ReactCurrentOwner:re};function ae(){throw Error("act(...) is not supported in production builds of React.")}return Ne.Children={map:pt,forEach:function(F,J,ge){pt(F,function(){J.apply(this,arguments)},ge)},count:function(F){var J=0;return pt(F,function(){J++}),J},toArray:function(F){return pt(F,function(J){return J})||[]},only:function(F){if(!P(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Ne.Component=b,Ne.Fragment=t,Ne.Profiler=o,Ne.PureComponent=B,Ne.StrictMode=r,Ne.Suspense=p,Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,Ne.act=ae,Ne.cloneElement=function(F,J,ge){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var Ce=V({},F.props),Pe=F.key,Oe=F.ref,Ue=F._owner;if(J!=null){if(J.ref!==void 0&&(Oe=J.ref,Ue=re.current),J.key!==void 0&&(Pe=""+J.key),F.type&&F.type.defaultProps)var ze=F.type.defaultProps;for(Ye in J)le.call(J,Ye)&&!k.hasOwnProperty(Ye)&&(Ce[Ye]=J[Ye]===void 0&&ze!==void 0?ze[Ye]:J[Ye])}var Ye=arguments.length-2;if(Ye===1)Ce.children=ge;else if(1<Ye){ze=Array(Ye);for(var Ot=0;Ot<Ye;Ot++)ze[Ot]=arguments[Ot+2];Ce.children=ze}return{$$typeof:n,type:F.type,key:Pe,ref:Oe,props:Ce,_owner:Ue}},Ne.createContext=function(F){return F={$$typeof:u,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:a,_context:F},F.Consumer=F},Ne.createElement=x,Ne.createFactory=function(F){var J=x.bind(null,F);return J.type=F,J},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(F){return{$$typeof:d,render:F}},Ne.isValidElement=P,Ne.lazy=function(F){return{$$typeof:_,_payload:{_status:-1,_result:F},_init:gt}},Ne.memo=function(F,J){return{$$typeof:m,type:F,compare:J===void 0?null:J}},Ne.startTransition=function(F){var J=ie.transition;ie.transition={};try{F()}finally{ie.transition=J}},Ne.unstable_act=ae,Ne.useCallback=function(F,J){return Be.current.useCallback(F,J)},Ne.useContext=function(F){return Be.current.useContext(F)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(F){return Be.current.useDeferredValue(F)},Ne.useEffect=function(F,J){return Be.current.useEffect(F,J)},Ne.useId=function(){return Be.current.useId()},Ne.useImperativeHandle=function(F,J,ge){return Be.current.useImperativeHandle(F,J,ge)},Ne.useInsertionEffect=function(F,J){return Be.current.useInsertionEffect(F,J)},Ne.useLayoutEffect=function(F,J){return Be.current.useLayoutEffect(F,J)},Ne.useMemo=function(F,J){return Be.current.useMemo(F,J)},Ne.useReducer=function(F,J,ge){return Be.current.useReducer(F,J,ge)},Ne.useRef=function(F){return Be.current.useRef(F)},Ne.useState=function(F){return Be.current.useState(F)},Ne.useSyncExternalStore=function(F,J,ge){return Be.current.useSyncExternalStore(F,J,ge)},Ne.useTransition=function(){return Be.current.useTransition()},Ne.version="18.3.1",Ne}var X_;function im(){return X_||(X_=1,Uf.exports=ax()),Uf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J_;function lx(){if(J_)return wl;J_=1;var n=im(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(d,p,m){var _,w={},E=null,A=null;m!==void 0&&(E=""+m),p.key!==void 0&&(E=""+p.key),p.ref!==void 0&&(A=p.ref);for(_ in p)r.call(p,_)&&!a.hasOwnProperty(_)&&(w[_]=p[_]);if(d&&d.defaultProps)for(_ in p=d.defaultProps,p)w[_]===void 0&&(w[_]=p[_]);return{$$typeof:e,type:d,key:E,ref:A,props:w,_owner:o.current}}return wl.Fragment=t,wl.jsx=u,wl.jsxs=u,wl}var Y_;function ux(){return Y_||(Y_=1,Bf.exports=lx()),Bf.exports}var ee=ux(),z=im();const cx=s0(z);var Lc={},zf={exports:{}},_n={},Hf={exports:{}},qf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z_;function hx(){return Z_||(Z_=1,(function(n){function e(ie,me){var ae=ie.length;ie.push(me);e:for(;0<ae;){var F=ae-1>>>1,J=ie[F];if(0<o(J,me))ie[F]=me,ie[ae]=J,ae=F;else break e}}function t(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var me=ie[0],ae=ie.pop();if(ae!==me){ie[0]=ae;e:for(var F=0,J=ie.length,ge=J>>>1;F<ge;){var Ce=2*(F+1)-1,Pe=ie[Ce],Oe=Ce+1,Ue=ie[Oe];if(0>o(Pe,ae))Oe<J&&0>o(Ue,Pe)?(ie[F]=Ue,ie[Oe]=ae,F=Oe):(ie[F]=Pe,ie[Ce]=ae,F=Ce);else if(Oe<J&&0>o(Ue,ae))ie[F]=Ue,ie[Oe]=ae,F=Oe;else break e}}return me}function o(ie,me){var ae=ie.sortIndex-me.sortIndex;return ae!==0?ae:ie.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var p=[],m=[],_=1,w=null,E=3,A=!1,V=!1,N=!1,b=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function q(ie){for(var me=t(m);me!==null;){if(me.callback===null)r(m);else if(me.startTime<=ie)r(m),me.sortIndex=me.expirationTime,e(p,me);else break;me=t(m)}}function G(ie){if(N=!1,q(ie),!V)if(t(p)!==null)V=!0,gt(le);else{var me=t(m);me!==null&&Be(G,me.startTime-ie)}}function le(ie,me){V=!1,N&&(N=!1,Q(x),x=-1),A=!0;var ae=E;try{for(q(me),w=t(p);w!==null&&(!(w.expirationTime>me)||ie&&!D());){var F=w.callback;if(typeof F=="function"){w.callback=null,E=w.priorityLevel;var J=F(w.expirationTime<=me);me=n.unstable_now(),typeof J=="function"?w.callback=J:w===t(p)&&r(p),q(me)}else r(p);w=t(p)}if(w!==null)var ge=!0;else{var Ce=t(m);Ce!==null&&Be(G,Ce.startTime-me),ge=!1}return ge}finally{w=null,E=ae,A=!1}}var re=!1,k=null,x=-1,R=5,P=-1;function D(){return!(n.unstable_now()-P<R)}function L(){if(k!==null){var ie=n.unstable_now();P=ie;var me=!0;try{me=k(!0,ie)}finally{me?C():(re=!1,k=null)}}else re=!1}var C;if(typeof B=="function")C=function(){B(L)};else if(typeof MessageChannel<"u"){var Qe=new MessageChannel,pt=Qe.port2;Qe.port1.onmessage=L,C=function(){pt.postMessage(null)}}else C=function(){b(L,0)};function gt(ie){k=ie,re||(re=!0,C())}function Be(ie,me){x=b(function(){ie(n.unstable_now())},me)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ie){ie.callback=null},n.unstable_continueExecution=function(){V||A||(V=!0,gt(le))},n.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<ie?Math.floor(1e3/ie):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(ie){switch(E){case 1:case 2:case 3:var me=3;break;default:me=E}var ae=E;E=me;try{return ie()}finally{E=ae}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ie,me){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var ae=E;E=ie;try{return me()}finally{E=ae}},n.unstable_scheduleCallback=function(ie,me,ae){var F=n.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?F+ae:F):ae=F,ie){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ae+J,ie={id:_++,callback:me,priorityLevel:ie,startTime:ae,expirationTime:J,sortIndex:-1},ae>F?(ie.sortIndex=ae,e(m,ie),t(p)===null&&ie===t(m)&&(N?(Q(x),x=-1):N=!0,Be(G,ae-F))):(ie.sortIndex=J,e(p,ie),V||A||(V=!0,gt(le))),ie},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(ie){var me=E;return function(){var ae=E;E=me;try{return ie.apply(this,arguments)}finally{E=ae}}}})(qf)),qf}var ev;function dx(){return ev||(ev=1,Hf.exports=hx()),Hf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tv;function fx(){if(tv)return _n;tv=1;var n=im(),e=dx();function t(s){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+s,l=1;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function a(s,i){u(s,i),u(s+"Capture",i)}function u(s,i){for(o[s]=i,s=0;s<i.length;s++)r.add(i[s])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},w={};function E(s){return p.call(w,s)?!0:p.call(_,s)?!1:m.test(s)?w[s]=!0:(_[s]=!0,!1)}function A(s,i,l,h){if(l!==null&&l.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function V(s,i,l,h){if(i===null||typeof i>"u"||A(s,i,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function N(s,i,l,h,f,y,S){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=h,this.attributeNamespace=f,this.mustUseProperty=l,this.propertyName=s,this.type=i,this.sanitizeURL=y,this.removeEmptyString=S}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){b[s]=new N(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var i=s[0];b[i]=new N(i,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){b[s]=new N(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){b[s]=new N(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){b[s]=new N(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){b[s]=new N(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){b[s]=new N(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){b[s]=new N(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){b[s]=new N(s,5,!1,s.toLowerCase(),null,!1,!1)});var Q=/[\-:]([a-z])/g;function B(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var i=s.replace(Q,B);b[i]=new N(i,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var i=s.replace(Q,B);b[i]=new N(i,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var i=s.replace(Q,B);b[i]=new N(i,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){b[s]=new N(s,1,!1,s.toLowerCase(),null,!1,!1)}),b.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){b[s]=new N(s,1,!1,s.toLowerCase(),null,!0,!0)});function q(s,i,l,h){var f=b.hasOwnProperty(i)?b[i]:null;(f!==null?f.type!==0:h||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(V(i,l,f,h)&&(l=null),h||f===null?E(i)&&(l===null?s.removeAttribute(i):s.setAttribute(i,""+l)):f.mustUseProperty?s[f.propertyName]=l===null?f.type===3?!1:"":l:(i=f.attributeName,h=f.attributeNamespace,l===null?s.removeAttribute(i):(f=f.type,l=f===3||f===4&&l===!0?"":""+l,h?s.setAttributeNS(h,i,l):s.setAttribute(i,l))))}var G=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,le=Symbol.for("react.element"),re=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),D=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),Qe=Symbol.for("react.suspense_list"),pt=Symbol.for("react.memo"),gt=Symbol.for("react.lazy"),Be=Symbol.for("react.offscreen"),ie=Symbol.iterator;function me(s){return s===null||typeof s!="object"?null:(s=ie&&s[ie]||s["@@iterator"],typeof s=="function"?s:null)}var ae=Object.assign,F;function J(s){if(F===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);F=i&&i[1]||""}return`
`+F+s}var ge=!1;function Ce(s,i){if(!s||ge)return"";ge=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(H){var h=H}Reflect.construct(s,[],i)}else{try{i.call()}catch(H){h=H}s.call(i.prototype)}else{try{throw Error()}catch(H){h=H}s()}}catch(H){if(H&&h&&typeof H.stack=="string"){for(var f=H.stack.split(`
`),y=h.stack.split(`
`),S=f.length-1,I=y.length-1;1<=S&&0<=I&&f[S]!==y[I];)I--;for(;1<=S&&0<=I;S--,I--)if(f[S]!==y[I]){if(S!==1||I!==1)do if(S--,I--,0>I||f[S]!==y[I]){var O=`
`+f[S].replace(" at new "," at ");return s.displayName&&O.includes("<anonymous>")&&(O=O.replace("<anonymous>",s.displayName)),O}while(1<=S&&0<=I);break}}}finally{ge=!1,Error.prepareStackTrace=l}return(s=s?s.displayName||s.name:"")?J(s):""}function Pe(s){switch(s.tag){case 5:return J(s.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return s=Ce(s.type,!1),s;case 11:return s=Ce(s.type.render,!1),s;case 1:return s=Ce(s.type,!0),s;default:return""}}function Oe(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case k:return"Fragment";case re:return"Portal";case R:return"Profiler";case x:return"StrictMode";case C:return"Suspense";case Qe:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case D:return(s.displayName||"Context")+".Consumer";case P:return(s._context.displayName||"Context")+".Provider";case L:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case pt:return i=s.displayName||null,i!==null?i:Oe(s.type)||"Memo";case gt:i=s._payload,s=s._init;try{return Oe(s(i))}catch{}}return null}function Ue(s){var i=s.type;switch(s.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=i.render,s=s.displayName||s.name||"",i.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oe(i);case 8:return i===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function ze(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ye(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ot(s){var i=Ye(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,i),h=""+s[i];if(!s.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,y=l.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return f.call(this)},set:function(S){h=""+S,y.call(this,S)}}),Object.defineProperty(s,i,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(S){h=""+S},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function Or(s){s._valueTracker||(s._valueTracker=Ot(s))}function Ji(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var l=i.getValue(),h="";return s&&(h=Ye(s)?s.checked?"true":"false":s.value),s=h,s!==l?(i.setValue(s),!0):!1}function hs(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function si(s,i){var l=i.checked;return ae({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??s._wrapperState.initialChecked})}function Yi(s,i){var l=i.defaultValue==null?"":i.defaultValue,h=i.checked!=null?i.checked:i.defaultChecked;l=ze(i.value!=null?i.value:l),s._wrapperState={initialChecked:h,initialValue:l,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Ra(s,i){i=i.checked,i!=null&&q(s,"checked",i,!1)}function Ia(s,i){Ra(s,i);var l=ze(i.value),h=i.type;if(l!=null)h==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+l):s.value!==""+l&&(s.value=""+l);else if(h==="submit"||h==="reset"){s.removeAttribute("value");return}i.hasOwnProperty("value")?Zi(s,i.type,l):i.hasOwnProperty("defaultValue")&&Zi(s,i.type,ze(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(s.defaultChecked=!!i.defaultChecked)}function Eu(s,i,l){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var h=i.type;if(!(h!=="submit"&&h!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+s._wrapperState.initialValue,l||i===s.value||(s.value=i),s.defaultValue=i}l=s.name,l!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,l!==""&&(s.name=l)}function Zi(s,i,l){(i!=="number"||hs(s.ownerDocument)!==s)&&(l==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+l&&(s.defaultValue=""+l))}var Lr=Array.isArray;function Mr(s,i,l,h){if(s=s.options,i){i={};for(var f=0;f<l.length;f++)i["$"+l[f]]=!0;for(l=0;l<s.length;l++)f=i.hasOwnProperty("$"+s[l].value),s[l].selected!==f&&(s[l].selected=f),f&&h&&(s[l].defaultSelected=!0)}else{for(l=""+ze(l),i=null,f=0;f<s.length;f++){if(s[f].value===l){s[f].selected=!0,h&&(s[f].defaultSelected=!0);return}i!==null||s[f].disabled||(i=s[f])}i!==null&&(i.selected=!0)}}function ka(s,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return ae({},i,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function eo(s,i){var l=i.value;if(l==null){if(l=i.children,i=i.defaultValue,l!=null){if(i!=null)throw Error(t(92));if(Lr(l)){if(1<l.length)throw Error(t(93));l=l[0]}i=l}i==null&&(i=""),l=i}s._wrapperState={initialValue:ze(l)}}function to(s,i){var l=ze(i.value),h=ze(i.defaultValue);l!=null&&(l=""+l,l!==s.value&&(s.value=l),i.defaultValue==null&&s.defaultValue!==l&&(s.defaultValue=l)),h!=null&&(s.defaultValue=""+h)}function Ca(s){var i=s.textContent;i===s._wrapperState.initialValue&&i!==""&&i!==null&&(s.value=i)}function Rt(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function It(s,i){return s==null||s==="http://www.w3.org/1999/xhtml"?Rt(i):s==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Fr,ba=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,l,h,f){MSApp.execUnsafeLocalFunction(function(){return s(i,l,h,f)})}:s})(function(s,i){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=i;else{for(Fr=Fr||document.createElement("div"),Fr.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Fr.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;i.firstChild;)s.appendChild(i.firstChild)}});function ds(s,i){if(i){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=i;return}}s.textContent=i}var ii={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oi=["Webkit","ms","Moz","O"];Object.keys(ii).forEach(function(s){oi.forEach(function(i){i=i+s.charAt(0).toUpperCase()+s.substring(1),ii[i]=ii[s]})});function Pa(s,i,l){return i==null||typeof i=="boolean"||i===""?"":l||typeof i!="number"||i===0||ii.hasOwnProperty(s)&&ii[s]?(""+i).trim():i+"px"}function Na(s,i){s=s.style;for(var l in i)if(i.hasOwnProperty(l)){var h=l.indexOf("--")===0,f=Pa(l,i[l],h);l==="float"&&(l="cssFloat"),h?s.setProperty(l,f):s[l]=f}}var Da=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Va(s,i){if(i){if(Da[s]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Oa(s,i){if(s.indexOf("-")===-1)return typeof i.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ai=null;function no(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ro=null,Pn=null,dr=null;function so(s){if(s=il(s)){if(typeof ro!="function")throw Error(t(280));var i=s.stateNode;i&&(i=Ju(i),ro(s.stateNode,s.type,i))}}function fr(s){Pn?dr?dr.push(s):dr=[s]:Pn=s}function La(){if(Pn){var s=Pn,i=dr;if(dr=Pn=null,so(s),i)for(s=0;s<i.length;s++)so(i[s])}}function li(s,i){return s(i)}function Ma(){}var $r=!1;function Fa(s,i,l){if($r)return s(i,l);$r=!0;try{return li(s,i,l)}finally{$r=!1,(Pn!==null||dr!==null)&&(Ma(),La())}}function yt(s,i){var l=s.stateNode;if(l===null)return null;var h=Ju(l);if(h===null)return null;l=h[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(t(231,i,typeof l));return l}var io=!1;if(d)try{var qn={};Object.defineProperty(qn,"passive",{get:function(){io=!0}}),window.addEventListener("test",qn,qn),window.removeEventListener("test",qn,qn)}catch{io=!1}function ui(s,i,l,h,f,y,S,I,O){var H=Array.prototype.slice.call(arguments,3);try{i.apply(l,H)}catch(Z){this.onError(Z)}}var ci=!1,oo=null,Wn=!1,$a=null,pd={onError:function(s){ci=!0,oo=s}};function ao(s,i,l,h,f,y,S,I,O){ci=!1,oo=null,ui.apply(pd,arguments)}function Su(s,i,l,h,f,y,S,I,O){if(ao.apply(this,arguments),ci){if(ci){var H=oo;ci=!1,oo=null}else throw Error(t(198));Wn||(Wn=!0,$a=H)}}function Gn(s){var i=s,l=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(l=i.return),s=i.return;while(s)}return i.tag===3?l:null}function hi(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function Qn(s){if(Gn(s)!==s)throw Error(t(188))}function Tu(s){var i=s.alternate;if(!i){if(i=Gn(s),i===null)throw Error(t(188));return i!==s?null:s}for(var l=s,h=i;;){var f=l.return;if(f===null)break;var y=f.alternate;if(y===null){if(h=f.return,h!==null){l=h;continue}break}if(f.child===y.child){for(y=f.child;y;){if(y===l)return Qn(f),s;if(y===h)return Qn(f),i;y=y.sibling}throw Error(t(188))}if(l.return!==h.return)l=f,h=y;else{for(var S=!1,I=f.child;I;){if(I===l){S=!0,l=f,h=y;break}if(I===h){S=!0,h=f,l=y;break}I=I.sibling}if(!S){for(I=y.child;I;){if(I===l){S=!0,l=y,h=f;break}if(I===h){S=!0,h=y,l=f;break}I=I.sibling}if(!S)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?s:i}function ja(s){return s=Tu(s),s!==null?lo(s):null}function lo(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var i=lo(s);if(i!==null)return i;s=s.sibling}return null}var uo=e.unstable_scheduleCallback,Ba=e.unstable_cancelCallback,xu=e.unstable_shouldYield,md=e.unstable_requestPaint,Ze=e.unstable_now,Au=e.unstable_getCurrentPriorityLevel,di=e.unstable_ImmediatePriority,fs=e.unstable_UserBlockingPriority,Nn=e.unstable_NormalPriority,Ua=e.unstable_LowPriority,Ru=e.unstable_IdlePriority,fi=null,En=null;function Iu(s){if(En&&typeof En.onCommitFiberRoot=="function")try{En.onCommitFiberRoot(fi,s,void 0,(s.current.flags&128)===128)}catch{}}var on=Math.clz32?Math.clz32:Cu,za=Math.log,ku=Math.LN2;function Cu(s){return s>>>=0,s===0?32:31-(za(s)/ku|0)|0}var co=64,ho=4194304;function ps(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function pi(s,i){var l=s.pendingLanes;if(l===0)return 0;var h=0,f=s.suspendedLanes,y=s.pingedLanes,S=l&268435455;if(S!==0){var I=S&~f;I!==0?h=ps(I):(y&=S,y!==0&&(h=ps(y)))}else S=l&~f,S!==0?h=ps(S):y!==0&&(h=ps(y));if(h===0)return 0;if(i!==0&&i!==h&&(i&f)===0&&(f=h&-h,y=i&-i,f>=y||f===16&&(y&4194240)!==0))return i;if((h&4)!==0&&(h|=l&16),i=s.entangledLanes,i!==0)for(s=s.entanglements,i&=h;0<i;)l=31-on(i),f=1<<l,h|=s[l],i&=~f;return h}function gd(s,i){switch(s){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jr(s,i){for(var l=s.suspendedLanes,h=s.pingedLanes,f=s.expirationTimes,y=s.pendingLanes;0<y;){var S=31-on(y),I=1<<S,O=f[S];O===-1?((I&l)===0||(I&h)!==0)&&(f[S]=gd(I,i)):O<=i&&(s.expiredLanes|=I),y&=~I}}function Sn(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function mi(){var s=co;return co<<=1,(co&4194240)===0&&(co=64),s}function ms(s){for(var i=[],l=0;31>l;l++)i.push(s);return i}function gs(s,i,l){s.pendingLanes|=i,i!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,i=31-on(i),s[i]=l}function Xe(s,i){var l=s.pendingLanes&~i;s.pendingLanes=i,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=i,s.mutableReadLanes&=i,s.entangledLanes&=i,i=s.entanglements;var h=s.eventTimes;for(s=s.expirationTimes;0<l;){var f=31-on(l),y=1<<f;i[f]=0,h[f]=-1,s[f]=-1,l&=~y}}function ys(s,i){var l=s.entangledLanes|=i;for(s=s.entanglements;l;){var h=31-on(l),f=1<<h;f&i|s[h]&i&&(s[h]|=i),l&=~f}}var Ve=0;function _s(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var bu,fo,Pu,Nu,Du,Ha=!1,pr=[],Ut=null,Kn=null,Xn=null,vs=new Map,Dn=new Map,mr=[],yd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vu(s,i){switch(s){case"focusin":case"focusout":Ut=null;break;case"dragenter":case"dragleave":Kn=null;break;case"mouseover":case"mouseout":Xn=null;break;case"pointerover":case"pointerout":vs.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dn.delete(i.pointerId)}}function hn(s,i,l,h,f,y){return s===null||s.nativeEvent!==y?(s={blockedOn:i,domEventName:l,eventSystemFlags:h,nativeEvent:y,targetContainers:[f]},i!==null&&(i=il(i),i!==null&&fo(i)),s):(s.eventSystemFlags|=h,i=s.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),s)}function _d(s,i,l,h,f){switch(i){case"focusin":return Ut=hn(Ut,s,i,l,h,f),!0;case"dragenter":return Kn=hn(Kn,s,i,l,h,f),!0;case"mouseover":return Xn=hn(Xn,s,i,l,h,f),!0;case"pointerover":var y=f.pointerId;return vs.set(y,hn(vs.get(y)||null,s,i,l,h,f)),!0;case"gotpointercapture":return y=f.pointerId,Dn.set(y,hn(Dn.get(y)||null,s,i,l,h,f)),!0}return!1}function Ou(s){var i=wi(s.target);if(i!==null){var l=Gn(i);if(l!==null){if(i=l.tag,i===13){if(i=hi(l),i!==null){s.blockedOn=i,Du(s.priority,function(){Pu(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Br(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var l=po(s.domEventName,s.eventSystemFlags,i[0],s.nativeEvent);if(l===null){l=s.nativeEvent;var h=new l.constructor(l.type,l);ai=h,l.target.dispatchEvent(h),ai=null}else return i=il(l),i!==null&&fo(i),s.blockedOn=l,!1;i.shift()}return!0}function gi(s,i,l){Br(s)&&l.delete(i)}function Lu(){Ha=!1,Ut!==null&&Br(Ut)&&(Ut=null),Kn!==null&&Br(Kn)&&(Kn=null),Xn!==null&&Br(Xn)&&(Xn=null),vs.forEach(gi),Dn.forEach(gi)}function Jn(s,i){s.blockedOn===i&&(s.blockedOn=null,Ha||(Ha=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Lu)))}function Yn(s){function i(f){return Jn(f,s)}if(0<pr.length){Jn(pr[0],s);for(var l=1;l<pr.length;l++){var h=pr[l];h.blockedOn===s&&(h.blockedOn=null)}}for(Ut!==null&&Jn(Ut,s),Kn!==null&&Jn(Kn,s),Xn!==null&&Jn(Xn,s),vs.forEach(i),Dn.forEach(i),l=0;l<mr.length;l++)h=mr[l],h.blockedOn===s&&(h.blockedOn=null);for(;0<mr.length&&(l=mr[0],l.blockedOn===null);)Ou(l),l.blockedOn===null&&mr.shift()}var Ur=G.ReactCurrentBatchConfig,ws=!0;function ot(s,i,l,h){var f=Ve,y=Ur.transition;Ur.transition=null;try{Ve=1,qa(s,i,l,h)}finally{Ve=f,Ur.transition=y}}function vd(s,i,l,h){var f=Ve,y=Ur.transition;Ur.transition=null;try{Ve=4,qa(s,i,l,h)}finally{Ve=f,Ur.transition=y}}function qa(s,i,l,h){if(ws){var f=po(s,i,l,h);if(f===null)bd(s,i,h,yi,l),Vu(s,h);else if(_d(f,s,i,l,h))h.stopPropagation();else if(Vu(s,h),i&4&&-1<yd.indexOf(s)){for(;f!==null;){var y=il(f);if(y!==null&&bu(y),y=po(s,i,l,h),y===null&&bd(s,i,h,yi,l),y===f)break;f=y}f!==null&&h.stopPropagation()}else bd(s,i,h,null,l)}}var yi=null;function po(s,i,l,h){if(yi=null,s=no(h),s=wi(s),s!==null)if(i=Gn(s),i===null)s=null;else if(l=i.tag,l===13){if(s=hi(i),s!==null)return s;s=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null);return yi=s,null}function Wa(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Au()){case di:return 1;case fs:return 4;case Nn:case Ua:return 16;case Ru:return 536870912;default:return 16}default:return 16}}var Tn=null,mo=null,dn=null;function Ga(){if(dn)return dn;var s,i=mo,l=i.length,h,f="value"in Tn?Tn.value:Tn.textContent,y=f.length;for(s=0;s<l&&i[s]===f[s];s++);var S=l-s;for(h=1;h<=S&&i[l-h]===f[y-h];h++);return dn=f.slice(s,1<h?1-h:void 0)}function go(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function gr(){return!0}function Qa(){return!1}function zt(s){function i(l,h,f,y,S){this._reactName=l,this._targetInst=f,this.type=h,this.nativeEvent=y,this.target=S,this.currentTarget=null;for(var I in s)s.hasOwnProperty(I)&&(l=s[I],this[I]=l?l(y):y[I]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?gr:Qa,this.isPropagationStopped=Qa,this}return ae(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=gr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=gr)},persist:function(){},isPersistent:gr}),i}var Zn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yo=zt(Zn),yr=ae({},Zn,{view:0,detail:0}),wd=zt(yr),_o,zr,Es,_i=ae({},yr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_r,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Es&&(Es&&s.type==="mousemove"?(_o=s.screenX-Es.screenX,zr=s.screenY-Es.screenY):zr=_o=0,Es=s),_o)},movementY:function(s){return"movementY"in s?s.movementY:zr}}),vo=zt(_i),Ka=ae({},_i,{dataTransfer:0}),Mu=zt(Ka),wo=ae({},yr,{relatedTarget:0}),Eo=zt(wo),Fu=ae({},Zn,{animationName:0,elapsedTime:0,pseudoElement:0}),Hr=zt(Fu),$u=ae({},Zn,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),ju=zt($u),Bu=ae({},Zn,{data:0}),Xa=zt(Bu),So={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},an={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zu(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=Uu[s])?!!i[s]:!1}function _r(){return zu}var c=ae({},yr,{key:function(s){if(s.key){var i=So[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=go(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?an[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_r,charCode:function(s){return s.type==="keypress"?go(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?go(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),g=zt(c),v=ae({},_i,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=zt(v),$=ae({},yr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_r}),W=zt($),se=ae({},Zn,{propertyName:0,elapsedTime:0,pseudoElement:0}),We=zt(se),kt=ae({},_i,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Le=zt(kt),Lt=[9,13,27,32],wt=d&&"CompositionEvent"in window,Vn=null;d&&"documentMode"in document&&(Vn=document.documentMode);var xn=d&&"TextEvent"in window&&!Vn,vi=d&&(!wt||Vn&&8<Vn&&11>=Vn),To=" ",zg=!1;function Hg(s,i){switch(s){case"keyup":return Lt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qg(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var xo=!1;function nT(s,i){switch(s){case"compositionend":return qg(i);case"keypress":return i.which!==32?null:(zg=!0,To);case"textInput":return s=i.data,s===To&&zg?null:s;default:return null}}function rT(s,i){if(xo)return s==="compositionend"||!wt&&Hg(s,i)?(s=Ga(),dn=mo=Tn=null,xo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return vi&&i.locale!=="ko"?null:i.data;default:return null}}var sT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wg(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!sT[s.type]:i==="textarea"}function Gg(s,i,l,h){fr(h),i=Qu(i,"onChange"),0<i.length&&(l=new yo("onChange","change",null,l,h),s.push({event:l,listeners:i}))}var Ja=null,Ya=null;function iT(s){hy(s,0)}function Hu(s){var i=Co(s);if(Ji(i))return s}function oT(s,i){if(s==="change")return i}var Qg=!1;if(d){var Ed;if(d){var Sd="oninput"in document;if(!Sd){var Kg=document.createElement("div");Kg.setAttribute("oninput","return;"),Sd=typeof Kg.oninput=="function"}Ed=Sd}else Ed=!1;Qg=Ed&&(!document.documentMode||9<document.documentMode)}function Xg(){Ja&&(Ja.detachEvent("onpropertychange",Jg),Ya=Ja=null)}function Jg(s){if(s.propertyName==="value"&&Hu(Ya)){var i=[];Gg(i,Ya,s,no(s)),Fa(iT,i)}}function aT(s,i,l){s==="focusin"?(Xg(),Ja=i,Ya=l,Ja.attachEvent("onpropertychange",Jg)):s==="focusout"&&Xg()}function lT(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Hu(Ya)}function uT(s,i){if(s==="click")return Hu(i)}function cT(s,i){if(s==="input"||s==="change")return Hu(i)}function hT(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var er=typeof Object.is=="function"?Object.is:hT;function Za(s,i){if(er(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var l=Object.keys(s),h=Object.keys(i);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var f=l[h];if(!p.call(i,f)||!er(s[f],i[f]))return!1}return!0}function Yg(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Zg(s,i){var l=Yg(s);s=0;for(var h;l;){if(l.nodeType===3){if(h=s+l.textContent.length,s<=i&&h>=i)return{node:l,offset:i-s};s=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Yg(l)}}function ey(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?ey(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function ty(){for(var s=window,i=hs();i instanceof s.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)s=i.contentWindow;else break;i=hs(s.document)}return i}function Td(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}function dT(s){var i=ty(),l=s.focusedElem,h=s.selectionRange;if(i!==l&&l&&l.ownerDocument&&ey(l.ownerDocument.documentElement,l)){if(h!==null&&Td(l)){if(i=h.start,s=h.end,s===void 0&&(s=i),"selectionStart"in l)l.selectionStart=i,l.selectionEnd=Math.min(s,l.value.length);else if(s=(i=l.ownerDocument||document)&&i.defaultView||window,s.getSelection){s=s.getSelection();var f=l.textContent.length,y=Math.min(h.start,f);h=h.end===void 0?y:Math.min(h.end,f),!s.extend&&y>h&&(f=h,h=y,y=f),f=Zg(l,y);var S=Zg(l,h);f&&S&&(s.rangeCount!==1||s.anchorNode!==f.node||s.anchorOffset!==f.offset||s.focusNode!==S.node||s.focusOffset!==S.offset)&&(i=i.createRange(),i.setStart(f.node,f.offset),s.removeAllRanges(),y>h?(s.addRange(i),s.extend(S.node,S.offset)):(i.setEnd(S.node,S.offset),s.addRange(i)))}}for(i=[],s=l;s=s.parentNode;)s.nodeType===1&&i.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<i.length;l++)s=i[l],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var fT=d&&"documentMode"in document&&11>=document.documentMode,Ao=null,xd=null,el=null,Ad=!1;function ny(s,i,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Ad||Ao==null||Ao!==hs(h)||(h=Ao,"selectionStart"in h&&Td(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),el&&Za(el,h)||(el=h,h=Qu(xd,"onSelect"),0<h.length&&(i=new yo("onSelect","select",null,i,l),s.push({event:i,listeners:h}),i.target=Ao)))}function qu(s,i){var l={};return l[s.toLowerCase()]=i.toLowerCase(),l["Webkit"+s]="webkit"+i,l["Moz"+s]="moz"+i,l}var Ro={animationend:qu("Animation","AnimationEnd"),animationiteration:qu("Animation","AnimationIteration"),animationstart:qu("Animation","AnimationStart"),transitionend:qu("Transition","TransitionEnd")},Rd={},ry={};d&&(ry=document.createElement("div").style,"AnimationEvent"in window||(delete Ro.animationend.animation,delete Ro.animationiteration.animation,delete Ro.animationstart.animation),"TransitionEvent"in window||delete Ro.transitionend.transition);function Wu(s){if(Rd[s])return Rd[s];if(!Ro[s])return s;var i=Ro[s],l;for(l in i)if(i.hasOwnProperty(l)&&l in ry)return Rd[s]=i[l];return s}var sy=Wu("animationend"),iy=Wu("animationiteration"),oy=Wu("animationstart"),ay=Wu("transitionend"),ly=new Map,uy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ss(s,i){ly.set(s,i),a(i,[s])}for(var Id=0;Id<uy.length;Id++){var kd=uy[Id],pT=kd.toLowerCase(),mT=kd[0].toUpperCase()+kd.slice(1);Ss(pT,"on"+mT)}Ss(sy,"onAnimationEnd"),Ss(iy,"onAnimationIteration"),Ss(oy,"onAnimationStart"),Ss("dblclick","onDoubleClick"),Ss("focusin","onFocus"),Ss("focusout","onBlur"),Ss(ay,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gT=new Set("cancel close invalid load scroll toggle".split(" ").concat(tl));function cy(s,i,l){var h=s.type||"unknown-event";s.currentTarget=l,Su(h,i,void 0,s),s.currentTarget=null}function hy(s,i){i=(i&4)!==0;for(var l=0;l<s.length;l++){var h=s[l],f=h.event;h=h.listeners;e:{var y=void 0;if(i)for(var S=h.length-1;0<=S;S--){var I=h[S],O=I.instance,H=I.currentTarget;if(I=I.listener,O!==y&&f.isPropagationStopped())break e;cy(f,I,H),y=O}else for(S=0;S<h.length;S++){if(I=h[S],O=I.instance,H=I.currentTarget,I=I.listener,O!==y&&f.isPropagationStopped())break e;cy(f,I,H),y=O}}}if(Wn)throw s=$a,Wn=!1,$a=null,s}function nt(s,i){var l=i[Ld];l===void 0&&(l=i[Ld]=new Set);var h=s+"__bubble";l.has(h)||(dy(i,s,2,!1),l.add(h))}function Cd(s,i,l){var h=0;i&&(h|=4),dy(l,s,h,i)}var Gu="_reactListening"+Math.random().toString(36).slice(2);function nl(s){if(!s[Gu]){s[Gu]=!0,r.forEach(function(l){l!=="selectionchange"&&(gT.has(l)||Cd(l,!1,s),Cd(l,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[Gu]||(i[Gu]=!0,Cd("selectionchange",!1,i))}}function dy(s,i,l,h){switch(Wa(i)){case 1:var f=ot;break;case 4:f=vd;break;default:f=qa}l=f.bind(null,i,l,s),f=void 0,!io||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),h?f!==void 0?s.addEventListener(i,l,{capture:!0,passive:f}):s.addEventListener(i,l,!0):f!==void 0?s.addEventListener(i,l,{passive:f}):s.addEventListener(i,l,!1)}function bd(s,i,l,h,f){var y=h;if((i&1)===0&&(i&2)===0&&h!==null)e:for(;;){if(h===null)return;var S=h.tag;if(S===3||S===4){var I=h.stateNode.containerInfo;if(I===f||I.nodeType===8&&I.parentNode===f)break;if(S===4)for(S=h.return;S!==null;){var O=S.tag;if((O===3||O===4)&&(O=S.stateNode.containerInfo,O===f||O.nodeType===8&&O.parentNode===f))return;S=S.return}for(;I!==null;){if(S=wi(I),S===null)return;if(O=S.tag,O===5||O===6){h=y=S;continue e}I=I.parentNode}}h=h.return}Fa(function(){var H=y,Z=no(l),te=[];e:{var Y=ly.get(s);if(Y!==void 0){var ue=yo,de=s;switch(s){case"keypress":if(go(l)===0)break e;case"keydown":case"keyup":ue=g;break;case"focusin":de="focus",ue=Eo;break;case"focusout":de="blur",ue=Eo;break;case"beforeblur":case"afterblur":ue=Eo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=vo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=Mu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=W;break;case sy:case iy:case oy:ue=Hr;break;case ay:ue=We;break;case"scroll":ue=wd;break;case"wheel":ue=Le;break;case"copy":case"cut":case"paste":ue=ju;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=T}var fe=(i&4)!==0,_t=!fe&&s==="scroll",j=fe?Y!==null?Y+"Capture":null:Y;fe=[];for(var M=H,U;M!==null;){U=M;var ne=U.stateNode;if(U.tag===5&&ne!==null&&(U=ne,j!==null&&(ne=yt(M,j),ne!=null&&fe.push(rl(M,ne,U)))),_t)break;M=M.return}0<fe.length&&(Y=new ue(Y,de,null,l,Z),te.push({event:Y,listeners:fe}))}}if((i&7)===0){e:{if(Y=s==="mouseover"||s==="pointerover",ue=s==="mouseout"||s==="pointerout",Y&&l!==ai&&(de=l.relatedTarget||l.fromElement)&&(wi(de)||de[qr]))break e;if((ue||Y)&&(Y=Z.window===Z?Z:(Y=Z.ownerDocument)?Y.defaultView||Y.parentWindow:window,ue?(de=l.relatedTarget||l.toElement,ue=H,de=de?wi(de):null,de!==null&&(_t=Gn(de),de!==_t||de.tag!==5&&de.tag!==6)&&(de=null)):(ue=null,de=H),ue!==de)){if(fe=vo,ne="onMouseLeave",j="onMouseEnter",M="mouse",(s==="pointerout"||s==="pointerover")&&(fe=T,ne="onPointerLeave",j="onPointerEnter",M="pointer"),_t=ue==null?Y:Co(ue),U=de==null?Y:Co(de),Y=new fe(ne,M+"leave",ue,l,Z),Y.target=_t,Y.relatedTarget=U,ne=null,wi(Z)===H&&(fe=new fe(j,M+"enter",de,l,Z),fe.target=U,fe.relatedTarget=_t,ne=fe),_t=ne,ue&&de)t:{for(fe=ue,j=de,M=0,U=fe;U;U=Io(U))M++;for(U=0,ne=j;ne;ne=Io(ne))U++;for(;0<M-U;)fe=Io(fe),M--;for(;0<U-M;)j=Io(j),U--;for(;M--;){if(fe===j||j!==null&&fe===j.alternate)break t;fe=Io(fe),j=Io(j)}fe=null}else fe=null;ue!==null&&fy(te,Y,ue,fe,!1),de!==null&&_t!==null&&fy(te,_t,de,fe,!0)}}e:{if(Y=H?Co(H):window,ue=Y.nodeName&&Y.nodeName.toLowerCase(),ue==="select"||ue==="input"&&Y.type==="file")var pe=oT;else if(Wg(Y))if(Qg)pe=cT;else{pe=lT;var ve=aT}else(ue=Y.nodeName)&&ue.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(pe=uT);if(pe&&(pe=pe(s,H))){Gg(te,pe,l,Z);break e}ve&&ve(s,Y,H),s==="focusout"&&(ve=Y._wrapperState)&&ve.controlled&&Y.type==="number"&&Zi(Y,"number",Y.value)}switch(ve=H?Co(H):window,s){case"focusin":(Wg(ve)||ve.contentEditable==="true")&&(Ao=ve,xd=H,el=null);break;case"focusout":el=xd=Ao=null;break;case"mousedown":Ad=!0;break;case"contextmenu":case"mouseup":case"dragend":Ad=!1,ny(te,l,Z);break;case"selectionchange":if(fT)break;case"keydown":case"keyup":ny(te,l,Z)}var we;if(wt)e:{switch(s){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else xo?Hg(s,l)&&(xe="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(xe="onCompositionStart");xe&&(vi&&l.locale!=="ko"&&(xo||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&xo&&(we=Ga()):(Tn=Z,mo="value"in Tn?Tn.value:Tn.textContent,xo=!0)),ve=Qu(H,xe),0<ve.length&&(xe=new Xa(xe,s,null,l,Z),te.push({event:xe,listeners:ve}),we?xe.data=we:(we=qg(l),we!==null&&(xe.data=we)))),(we=xn?nT(s,l):rT(s,l))&&(H=Qu(H,"onBeforeInput"),0<H.length&&(Z=new Xa("onBeforeInput","beforeinput",null,l,Z),te.push({event:Z,listeners:H}),Z.data=we))}hy(te,i)})}function rl(s,i,l){return{instance:s,listener:i,currentTarget:l}}function Qu(s,i){for(var l=i+"Capture",h=[];s!==null;){var f=s,y=f.stateNode;f.tag===5&&y!==null&&(f=y,y=yt(s,l),y!=null&&h.unshift(rl(s,y,f)),y=yt(s,i),y!=null&&h.push(rl(s,y,f))),s=s.return}return h}function Io(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function fy(s,i,l,h,f){for(var y=i._reactName,S=[];l!==null&&l!==h;){var I=l,O=I.alternate,H=I.stateNode;if(O!==null&&O===h)break;I.tag===5&&H!==null&&(I=H,f?(O=yt(l,y),O!=null&&S.unshift(rl(l,O,I))):f||(O=yt(l,y),O!=null&&S.push(rl(l,O,I)))),l=l.return}S.length!==0&&s.push({event:i,listeners:S})}var yT=/\r\n?/g,_T=/\u0000|\uFFFD/g;function py(s){return(typeof s=="string"?s:""+s).replace(yT,`
`).replace(_T,"")}function Ku(s,i,l){if(i=py(i),py(s)!==i&&l)throw Error(t(425))}function Xu(){}var Pd=null,Nd=null;function Dd(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Vd=typeof setTimeout=="function"?setTimeout:void 0,vT=typeof clearTimeout=="function"?clearTimeout:void 0,my=typeof Promise=="function"?Promise:void 0,wT=typeof queueMicrotask=="function"?queueMicrotask:typeof my<"u"?function(s){return my.resolve(null).then(s).catch(ET)}:Vd;function ET(s){setTimeout(function(){throw s})}function Od(s,i){var l=i,h=0;do{var f=l.nextSibling;if(s.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(h===0){s.removeChild(f),Yn(i);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=f}while(l);Yn(i)}function Ts(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return s}function gy(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return s;i--}else l==="/$"&&i++}s=s.previousSibling}return null}var ko=Math.random().toString(36).slice(2),vr="__reactFiber$"+ko,sl="__reactProps$"+ko,qr="__reactContainer$"+ko,Ld="__reactEvents$"+ko,ST="__reactListeners$"+ko,TT="__reactHandles$"+ko;function wi(s){var i=s[vr];if(i)return i;for(var l=s.parentNode;l;){if(i=l[qr]||l[vr]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(s=gy(s);s!==null;){if(l=s[vr])return l;s=gy(s)}return i}s=l,l=s.parentNode}return null}function il(s){return s=s[vr]||s[qr],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Co(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function Ju(s){return s[sl]||null}var Md=[],bo=-1;function xs(s){return{current:s}}function rt(s){0>bo||(s.current=Md[bo],Md[bo]=null,bo--)}function et(s,i){bo++,Md[bo]=s.current,s.current=i}var As={},Jt=xs(As),fn=xs(!1),Ei=As;function Po(s,i){var l=s.type.contextTypes;if(!l)return As;var h=s.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===i)return h.__reactInternalMemoizedMaskedChildContext;var f={},y;for(y in l)f[y]=i[y];return h&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=i,s.__reactInternalMemoizedMaskedChildContext=f),f}function pn(s){return s=s.childContextTypes,s!=null}function Yu(){rt(fn),rt(Jt)}function yy(s,i,l){if(Jt.current!==As)throw Error(t(168));et(Jt,i),et(fn,l)}function _y(s,i,l){var h=s.stateNode;if(i=i.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var f in h)if(!(f in i))throw Error(t(108,Ue(s)||"Unknown",f));return ae({},l,h)}function Zu(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||As,Ei=Jt.current,et(Jt,s),et(fn,fn.current),!0}function vy(s,i,l){var h=s.stateNode;if(!h)throw Error(t(169));l?(s=_y(s,i,Ei),h.__reactInternalMemoizedMergedChildContext=s,rt(fn),rt(Jt),et(Jt,s)):rt(fn),et(fn,l)}var Wr=null,ec=!1,Fd=!1;function wy(s){Wr===null?Wr=[s]:Wr.push(s)}function xT(s){ec=!0,wy(s)}function Rs(){if(!Fd&&Wr!==null){Fd=!0;var s=0,i=Ve;try{var l=Wr;for(Ve=1;s<l.length;s++){var h=l[s];do h=h(!0);while(h!==null)}Wr=null,ec=!1}catch(f){throw Wr!==null&&(Wr=Wr.slice(s+1)),uo(di,Rs),f}finally{Ve=i,Fd=!1}}return null}var No=[],Do=0,tc=null,nc=0,On=[],Ln=0,Si=null,Gr=1,Qr="";function Ti(s,i){No[Do++]=nc,No[Do++]=tc,tc=s,nc=i}function Ey(s,i,l){On[Ln++]=Gr,On[Ln++]=Qr,On[Ln++]=Si,Si=s;var h=Gr;s=Qr;var f=32-on(h)-1;h&=~(1<<f),l+=1;var y=32-on(i)+f;if(30<y){var S=f-f%5;y=(h&(1<<S)-1).toString(32),h>>=S,f-=S,Gr=1<<32-on(i)+f|l<<f|h,Qr=y+s}else Gr=1<<y|l<<f|h,Qr=s}function $d(s){s.return!==null&&(Ti(s,1),Ey(s,1,0))}function jd(s){for(;s===tc;)tc=No[--Do],No[Do]=null,nc=No[--Do],No[Do]=null;for(;s===Si;)Si=On[--Ln],On[Ln]=null,Qr=On[--Ln],On[Ln]=null,Gr=On[--Ln],On[Ln]=null}var An=null,Rn=null,at=!1,tr=null;function Sy(s,i){var l=jn(5,null,null,0);l.elementType="DELETED",l.stateNode=i,l.return=s,i=s.deletions,i===null?(s.deletions=[l],s.flags|=16):i.push(l)}function Ty(s,i){switch(s.tag){case 5:var l=s.type;return i=i.nodeType!==1||l.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(s.stateNode=i,An=s,Rn=Ts(i.firstChild),!0):!1;case 6:return i=s.pendingProps===""||i.nodeType!==3?null:i,i!==null?(s.stateNode=i,An=s,Rn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(l=Si!==null?{id:Gr,overflow:Qr}:null,s.memoizedState={dehydrated:i,treeContext:l,retryLane:1073741824},l=jn(18,null,null,0),l.stateNode=i,l.return=s,s.child=l,An=s,Rn=null,!0):!1;default:return!1}}function Bd(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Ud(s){if(at){var i=Rn;if(i){var l=i;if(!Ty(s,i)){if(Bd(s))throw Error(t(418));i=Ts(l.nextSibling);var h=An;i&&Ty(s,i)?Sy(h,l):(s.flags=s.flags&-4097|2,at=!1,An=s)}}else{if(Bd(s))throw Error(t(418));s.flags=s.flags&-4097|2,at=!1,An=s}}}function xy(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;An=s}function rc(s){if(s!==An)return!1;if(!at)return xy(s),at=!0,!1;var i;if((i=s.tag!==3)&&!(i=s.tag!==5)&&(i=s.type,i=i!=="head"&&i!=="body"&&!Dd(s.type,s.memoizedProps)),i&&(i=Rn)){if(Bd(s))throw Ay(),Error(t(418));for(;i;)Sy(s,i),i=Ts(i.nextSibling)}if(xy(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,i=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"){if(i===0){Rn=Ts(s.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++}s=s.nextSibling}Rn=null}}else Rn=An?Ts(s.stateNode.nextSibling):null;return!0}function Ay(){for(var s=Rn;s;)s=Ts(s.nextSibling)}function Vo(){Rn=An=null,at=!1}function zd(s){tr===null?tr=[s]:tr.push(s)}var AT=G.ReactCurrentBatchConfig;function ol(s,i,l){if(s=l.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,s));var f=h,y=""+s;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===y?i.ref:(i=function(S){var I=f.refs;S===null?delete I[y]:I[y]=S},i._stringRef=y,i)}if(typeof s!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,s))}return s}function sc(s,i){throw s=Object.prototype.toString.call(i),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s))}function Ry(s){var i=s._init;return i(s._payload)}function Iy(s){function i(j,M){if(s){var U=j.deletions;U===null?(j.deletions=[M],j.flags|=16):U.push(M)}}function l(j,M){if(!s)return null;for(;M!==null;)i(j,M),M=M.sibling;return null}function h(j,M){for(j=new Map;M!==null;)M.key!==null?j.set(M.key,M):j.set(M.index,M),M=M.sibling;return j}function f(j,M){return j=Vs(j,M),j.index=0,j.sibling=null,j}function y(j,M,U){return j.index=U,s?(U=j.alternate,U!==null?(U=U.index,U<M?(j.flags|=2,M):U):(j.flags|=2,M)):(j.flags|=1048576,M)}function S(j){return s&&j.alternate===null&&(j.flags|=2),j}function I(j,M,U,ne){return M===null||M.tag!==6?(M=Of(U,j.mode,ne),M.return=j,M):(M=f(M,U),M.return=j,M)}function O(j,M,U,ne){var pe=U.type;return pe===k?Z(j,M,U.props.children,ne,U.key):M!==null&&(M.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===gt&&Ry(pe)===M.type)?(ne=f(M,U.props),ne.ref=ol(j,M,U),ne.return=j,ne):(ne=kc(U.type,U.key,U.props,null,j.mode,ne),ne.ref=ol(j,M,U),ne.return=j,ne)}function H(j,M,U,ne){return M===null||M.tag!==4||M.stateNode.containerInfo!==U.containerInfo||M.stateNode.implementation!==U.implementation?(M=Lf(U,j.mode,ne),M.return=j,M):(M=f(M,U.children||[]),M.return=j,M)}function Z(j,M,U,ne,pe){return M===null||M.tag!==7?(M=Pi(U,j.mode,ne,pe),M.return=j,M):(M=f(M,U),M.return=j,M)}function te(j,M,U){if(typeof M=="string"&&M!==""||typeof M=="number")return M=Of(""+M,j.mode,U),M.return=j,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case le:return U=kc(M.type,M.key,M.props,null,j.mode,U),U.ref=ol(j,null,M),U.return=j,U;case re:return M=Lf(M,j.mode,U),M.return=j,M;case gt:var ne=M._init;return te(j,ne(M._payload),U)}if(Lr(M)||me(M))return M=Pi(M,j.mode,U,null),M.return=j,M;sc(j,M)}return null}function Y(j,M,U,ne){var pe=M!==null?M.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return pe!==null?null:I(j,M,""+U,ne);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case le:return U.key===pe?O(j,M,U,ne):null;case re:return U.key===pe?H(j,M,U,ne):null;case gt:return pe=U._init,Y(j,M,pe(U._payload),ne)}if(Lr(U)||me(U))return pe!==null?null:Z(j,M,U,ne,null);sc(j,U)}return null}function ue(j,M,U,ne,pe){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return j=j.get(U)||null,I(M,j,""+ne,pe);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case le:return j=j.get(ne.key===null?U:ne.key)||null,O(M,j,ne,pe);case re:return j=j.get(ne.key===null?U:ne.key)||null,H(M,j,ne,pe);case gt:var ve=ne._init;return ue(j,M,U,ve(ne._payload),pe)}if(Lr(ne)||me(ne))return j=j.get(U)||null,Z(M,j,ne,pe,null);sc(M,ne)}return null}function de(j,M,U,ne){for(var pe=null,ve=null,we=M,xe=M=0,$t=null;we!==null&&xe<U.length;xe++){we.index>xe?($t=we,we=null):$t=we.sibling;var je=Y(j,we,U[xe],ne);if(je===null){we===null&&(we=$t);break}s&&we&&je.alternate===null&&i(j,we),M=y(je,M,xe),ve===null?pe=je:ve.sibling=je,ve=je,we=$t}if(xe===U.length)return l(j,we),at&&Ti(j,xe),pe;if(we===null){for(;xe<U.length;xe++)we=te(j,U[xe],ne),we!==null&&(M=y(we,M,xe),ve===null?pe=we:ve.sibling=we,ve=we);return at&&Ti(j,xe),pe}for(we=h(j,we);xe<U.length;xe++)$t=ue(we,j,xe,U[xe],ne),$t!==null&&(s&&$t.alternate!==null&&we.delete($t.key===null?xe:$t.key),M=y($t,M,xe),ve===null?pe=$t:ve.sibling=$t,ve=$t);return s&&we.forEach(function(Os){return i(j,Os)}),at&&Ti(j,xe),pe}function fe(j,M,U,ne){var pe=me(U);if(typeof pe!="function")throw Error(t(150));if(U=pe.call(U),U==null)throw Error(t(151));for(var ve=pe=null,we=M,xe=M=0,$t=null,je=U.next();we!==null&&!je.done;xe++,je=U.next()){we.index>xe?($t=we,we=null):$t=we.sibling;var Os=Y(j,we,je.value,ne);if(Os===null){we===null&&(we=$t);break}s&&we&&Os.alternate===null&&i(j,we),M=y(Os,M,xe),ve===null?pe=Os:ve.sibling=Os,ve=Os,we=$t}if(je.done)return l(j,we),at&&Ti(j,xe),pe;if(we===null){for(;!je.done;xe++,je=U.next())je=te(j,je.value,ne),je!==null&&(M=y(je,M,xe),ve===null?pe=je:ve.sibling=je,ve=je);return at&&Ti(j,xe),pe}for(we=h(j,we);!je.done;xe++,je=U.next())je=ue(we,j,xe,je.value,ne),je!==null&&(s&&je.alternate!==null&&we.delete(je.key===null?xe:je.key),M=y(je,M,xe),ve===null?pe=je:ve.sibling=je,ve=je);return s&&we.forEach(function(sx){return i(j,sx)}),at&&Ti(j,xe),pe}function _t(j,M,U,ne){if(typeof U=="object"&&U!==null&&U.type===k&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case le:e:{for(var pe=U.key,ve=M;ve!==null;){if(ve.key===pe){if(pe=U.type,pe===k){if(ve.tag===7){l(j,ve.sibling),M=f(ve,U.props.children),M.return=j,j=M;break e}}else if(ve.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===gt&&Ry(pe)===ve.type){l(j,ve.sibling),M=f(ve,U.props),M.ref=ol(j,ve,U),M.return=j,j=M;break e}l(j,ve);break}else i(j,ve);ve=ve.sibling}U.type===k?(M=Pi(U.props.children,j.mode,ne,U.key),M.return=j,j=M):(ne=kc(U.type,U.key,U.props,null,j.mode,ne),ne.ref=ol(j,M,U),ne.return=j,j=ne)}return S(j);case re:e:{for(ve=U.key;M!==null;){if(M.key===ve)if(M.tag===4&&M.stateNode.containerInfo===U.containerInfo&&M.stateNode.implementation===U.implementation){l(j,M.sibling),M=f(M,U.children||[]),M.return=j,j=M;break e}else{l(j,M);break}else i(j,M);M=M.sibling}M=Lf(U,j.mode,ne),M.return=j,j=M}return S(j);case gt:return ve=U._init,_t(j,M,ve(U._payload),ne)}if(Lr(U))return de(j,M,U,ne);if(me(U))return fe(j,M,U,ne);sc(j,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,M!==null&&M.tag===6?(l(j,M.sibling),M=f(M,U),M.return=j,j=M):(l(j,M),M=Of(U,j.mode,ne),M.return=j,j=M),S(j)):l(j,M)}return _t}var Oo=Iy(!0),ky=Iy(!1),ic=xs(null),oc=null,Lo=null,Hd=null;function qd(){Hd=Lo=oc=null}function Wd(s){var i=ic.current;rt(ic),s._currentValue=i}function Gd(s,i,l){for(;s!==null;){var h=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),s===l)break;s=s.return}}function Mo(s,i){oc=s,Hd=Lo=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&i)!==0&&(mn=!0),s.firstContext=null)}function Mn(s){var i=s._currentValue;if(Hd!==s)if(s={context:s,memoizedValue:i,next:null},Lo===null){if(oc===null)throw Error(t(308));Lo=s,oc.dependencies={lanes:0,firstContext:s}}else Lo=Lo.next=s;return i}var xi=null;function Qd(s){xi===null?xi=[s]:xi.push(s)}function Cy(s,i,l,h){var f=i.interleaved;return f===null?(l.next=l,Qd(i)):(l.next=f.next,f.next=l),i.interleaved=l,Kr(s,h)}function Kr(s,i){s.lanes|=i;var l=s.alternate;for(l!==null&&(l.lanes|=i),l=s,s=s.return;s!==null;)s.childLanes|=i,l=s.alternate,l!==null&&(l.childLanes|=i),l=s,s=s.return;return l.tag===3?l.stateNode:null}var Is=!1;function Kd(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function by(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Xr(s,i){return{eventTime:s,lane:i,tag:0,payload:null,callback:null,next:null}}function ks(s,i,l){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,($e&2)!==0){var f=h.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),h.pending=i,Kr(s,l)}return f=h.interleaved,f===null?(i.next=i,Qd(h)):(i.next=f.next,f.next=i),h.interleaved=i,Kr(s,l)}function ac(s,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194240)!==0)){var h=i.lanes;h&=s.pendingLanes,l|=h,i.lanes=l,ys(s,l)}}function Py(s,i){var l=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var f=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var S={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?f=y=S:y=y.next=S,l=l.next}while(l!==null);y===null?f=y=i:y=y.next=i}else f=y=i;l={baseState:h.baseState,firstBaseUpdate:f,lastBaseUpdate:y,shared:h.shared,effects:h.effects},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=i:s.next=i,l.lastBaseUpdate=i}function lc(s,i,l,h){var f=s.updateQueue;Is=!1;var y=f.firstBaseUpdate,S=f.lastBaseUpdate,I=f.shared.pending;if(I!==null){f.shared.pending=null;var O=I,H=O.next;O.next=null,S===null?y=H:S.next=H,S=O;var Z=s.alternate;Z!==null&&(Z=Z.updateQueue,I=Z.lastBaseUpdate,I!==S&&(I===null?Z.firstBaseUpdate=H:I.next=H,Z.lastBaseUpdate=O))}if(y!==null){var te=f.baseState;S=0,Z=H=O=null,I=y;do{var Y=I.lane,ue=I.eventTime;if((h&Y)===Y){Z!==null&&(Z=Z.next={eventTime:ue,lane:0,tag:I.tag,payload:I.payload,callback:I.callback,next:null});e:{var de=s,fe=I;switch(Y=i,ue=l,fe.tag){case 1:if(de=fe.payload,typeof de=="function"){te=de.call(ue,te,Y);break e}te=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=fe.payload,Y=typeof de=="function"?de.call(ue,te,Y):de,Y==null)break e;te=ae({},te,Y);break e;case 2:Is=!0}}I.callback!==null&&I.lane!==0&&(s.flags|=64,Y=f.effects,Y===null?f.effects=[I]:Y.push(I))}else ue={eventTime:ue,lane:Y,tag:I.tag,payload:I.payload,callback:I.callback,next:null},Z===null?(H=Z=ue,O=te):Z=Z.next=ue,S|=Y;if(I=I.next,I===null){if(I=f.shared.pending,I===null)break;Y=I,I=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);if(Z===null&&(O=te),f.baseState=O,f.firstBaseUpdate=H,f.lastBaseUpdate=Z,i=f.shared.interleaved,i!==null){f=i;do S|=f.lane,f=f.next;while(f!==i)}else y===null&&(f.shared.lanes=0);Ii|=S,s.lanes=S,s.memoizedState=te}}function Ny(s,i,l){if(s=i.effects,i.effects=null,s!==null)for(i=0;i<s.length;i++){var h=s[i],f=h.callback;if(f!==null){if(h.callback=null,h=l,typeof f!="function")throw Error(t(191,f));f.call(h)}}}var al={},wr=xs(al),ll=xs(al),ul=xs(al);function Ai(s){if(s===al)throw Error(t(174));return s}function Xd(s,i){switch(et(ul,i),et(ll,s),et(wr,al),s=i.nodeType,s){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:It(null,"");break;default:s=s===8?i.parentNode:i,i=s.namespaceURI||null,s=s.tagName,i=It(i,s)}rt(wr),et(wr,i)}function Fo(){rt(wr),rt(ll),rt(ul)}function Dy(s){Ai(ul.current);var i=Ai(wr.current),l=It(i,s.type);i!==l&&(et(ll,s),et(wr,l))}function Jd(s){ll.current===s&&(rt(wr),rt(ll))}var lt=xs(0);function uc(s){for(var i=s;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Yd=[];function Zd(){for(var s=0;s<Yd.length;s++)Yd[s]._workInProgressVersionPrimary=null;Yd.length=0}var cc=G.ReactCurrentDispatcher,ef=G.ReactCurrentBatchConfig,Ri=0,ut=null,Ct=null,Mt=null,hc=!1,cl=!1,hl=0,RT=0;function Yt(){throw Error(t(321))}function tf(s,i){if(i===null)return!1;for(var l=0;l<i.length&&l<s.length;l++)if(!er(s[l],i[l]))return!1;return!0}function nf(s,i,l,h,f,y){if(Ri=y,ut=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,cc.current=s===null||s.memoizedState===null?bT:PT,s=l(h,f),cl){y=0;do{if(cl=!1,hl=0,25<=y)throw Error(t(301));y+=1,Mt=Ct=null,i.updateQueue=null,cc.current=NT,s=l(h,f)}while(cl)}if(cc.current=pc,i=Ct!==null&&Ct.next!==null,Ri=0,Mt=Ct=ut=null,hc=!1,i)throw Error(t(300));return s}function rf(){var s=hl!==0;return hl=0,s}function Er(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?ut.memoizedState=Mt=s:Mt=Mt.next=s,Mt}function Fn(){if(Ct===null){var s=ut.alternate;s=s!==null?s.memoizedState:null}else s=Ct.next;var i=Mt===null?ut.memoizedState:Mt.next;if(i!==null)Mt=i,Ct=s;else{if(s===null)throw Error(t(310));Ct=s,s={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},Mt===null?ut.memoizedState=Mt=s:Mt=Mt.next=s}return Mt}function dl(s,i){return typeof i=="function"?i(s):i}function sf(s){var i=Fn(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=s;var h=Ct,f=h.baseQueue,y=l.pending;if(y!==null){if(f!==null){var S=f.next;f.next=y.next,y.next=S}h.baseQueue=f=y,l.pending=null}if(f!==null){y=f.next,h=h.baseState;var I=S=null,O=null,H=y;do{var Z=H.lane;if((Ri&Z)===Z)O!==null&&(O=O.next={lane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),h=H.hasEagerState?H.eagerState:s(h,H.action);else{var te={lane:Z,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null};O===null?(I=O=te,S=h):O=O.next=te,ut.lanes|=Z,Ii|=Z}H=H.next}while(H!==null&&H!==y);O===null?S=h:O.next=I,er(h,i.memoizedState)||(mn=!0),i.memoizedState=h,i.baseState=S,i.baseQueue=O,l.lastRenderedState=h}if(s=l.interleaved,s!==null){f=s;do y=f.lane,ut.lanes|=y,Ii|=y,f=f.next;while(f!==s)}else f===null&&(l.lanes=0);return[i.memoizedState,l.dispatch]}function of(s){var i=Fn(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=s;var h=l.dispatch,f=l.pending,y=i.memoizedState;if(f!==null){l.pending=null;var S=f=f.next;do y=s(y,S.action),S=S.next;while(S!==f);er(y,i.memoizedState)||(mn=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),l.lastRenderedState=y}return[y,h]}function Vy(){}function Oy(s,i){var l=ut,h=Fn(),f=i(),y=!er(h.memoizedState,f);if(y&&(h.memoizedState=f,mn=!0),h=h.queue,af(Fy.bind(null,l,h,s),[s]),h.getSnapshot!==i||y||Mt!==null&&Mt.memoizedState.tag&1){if(l.flags|=2048,fl(9,My.bind(null,l,h,f,i),void 0,null),Ft===null)throw Error(t(349));(Ri&30)!==0||Ly(l,i,f)}return f}function Ly(s,i,l){s.flags|=16384,s={getSnapshot:i,value:l},i=ut.updateQueue,i===null?(i={lastEffect:null,stores:null},ut.updateQueue=i,i.stores=[s]):(l=i.stores,l===null?i.stores=[s]:l.push(s))}function My(s,i,l,h){i.value=l,i.getSnapshot=h,$y(i)&&jy(s)}function Fy(s,i,l){return l(function(){$y(i)&&jy(s)})}function $y(s){var i=s.getSnapshot;s=s.value;try{var l=i();return!er(s,l)}catch{return!0}}function jy(s){var i=Kr(s,1);i!==null&&ir(i,s,1,-1)}function By(s){var i=Er();return typeof s=="function"&&(s=s()),i.memoizedState=i.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:dl,lastRenderedState:s},i.queue=s,s=s.dispatch=CT.bind(null,ut,s),[i.memoizedState,s]}function fl(s,i,l,h){return s={tag:s,create:i,destroy:l,deps:h,next:null},i=ut.updateQueue,i===null?(i={lastEffect:null,stores:null},ut.updateQueue=i,i.lastEffect=s.next=s):(l=i.lastEffect,l===null?i.lastEffect=s.next=s:(h=l.next,l.next=s,s.next=h,i.lastEffect=s)),s}function Uy(){return Fn().memoizedState}function dc(s,i,l,h){var f=Er();ut.flags|=s,f.memoizedState=fl(1|i,l,void 0,h===void 0?null:h)}function fc(s,i,l,h){var f=Fn();h=h===void 0?null:h;var y=void 0;if(Ct!==null){var S=Ct.memoizedState;if(y=S.destroy,h!==null&&tf(h,S.deps)){f.memoizedState=fl(i,l,y,h);return}}ut.flags|=s,f.memoizedState=fl(1|i,l,y,h)}function zy(s,i){return dc(8390656,8,s,i)}function af(s,i){return fc(2048,8,s,i)}function Hy(s,i){return fc(4,2,s,i)}function qy(s,i){return fc(4,4,s,i)}function Wy(s,i){if(typeof i=="function")return s=s(),i(s),function(){i(null)};if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function Gy(s,i,l){return l=l!=null?l.concat([s]):null,fc(4,4,Wy.bind(null,i,s),l)}function lf(){}function Qy(s,i){var l=Fn();i=i===void 0?null:i;var h=l.memoizedState;return h!==null&&i!==null&&tf(i,h[1])?h[0]:(l.memoizedState=[s,i],s)}function Ky(s,i){var l=Fn();i=i===void 0?null:i;var h=l.memoizedState;return h!==null&&i!==null&&tf(i,h[1])?h[0]:(s=s(),l.memoizedState=[s,i],s)}function Xy(s,i,l){return(Ri&21)===0?(s.baseState&&(s.baseState=!1,mn=!0),s.memoizedState=l):(er(l,i)||(l=mi(),ut.lanes|=l,Ii|=l,s.baseState=!0),i)}function IT(s,i){var l=Ve;Ve=l!==0&&4>l?l:4,s(!0);var h=ef.transition;ef.transition={};try{s(!1),i()}finally{Ve=l,ef.transition=h}}function Jy(){return Fn().memoizedState}function kT(s,i,l){var h=Ns(s);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Yy(s))Zy(i,l);else if(l=Cy(s,i,l,h),l!==null){var f=un();ir(l,s,h,f),e_(l,i,h)}}function CT(s,i,l){var h=Ns(s),f={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Yy(s))Zy(i,f);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var S=i.lastRenderedState,I=y(S,l);if(f.hasEagerState=!0,f.eagerState=I,er(I,S)){var O=i.interleaved;O===null?(f.next=f,Qd(i)):(f.next=O.next,O.next=f),i.interleaved=f;return}}catch{}finally{}l=Cy(s,i,f,h),l!==null&&(f=un(),ir(l,s,h,f),e_(l,i,h))}}function Yy(s){var i=s.alternate;return s===ut||i!==null&&i===ut}function Zy(s,i){cl=hc=!0;var l=s.pending;l===null?i.next=i:(i.next=l.next,l.next=i),s.pending=i}function e_(s,i,l){if((l&4194240)!==0){var h=i.lanes;h&=s.pendingLanes,l|=h,i.lanes=l,ys(s,l)}}var pc={readContext:Mn,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useInsertionEffect:Yt,useLayoutEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useMutableSource:Yt,useSyncExternalStore:Yt,useId:Yt,unstable_isNewReconciler:!1},bT={readContext:Mn,useCallback:function(s,i){return Er().memoizedState=[s,i===void 0?null:i],s},useContext:Mn,useEffect:zy,useImperativeHandle:function(s,i,l){return l=l!=null?l.concat([s]):null,dc(4194308,4,Wy.bind(null,i,s),l)},useLayoutEffect:function(s,i){return dc(4194308,4,s,i)},useInsertionEffect:function(s,i){return dc(4,2,s,i)},useMemo:function(s,i){var l=Er();return i=i===void 0?null:i,s=s(),l.memoizedState=[s,i],s},useReducer:function(s,i,l){var h=Er();return i=l!==void 0?l(i):i,h.memoizedState=h.baseState=i,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:i},h.queue=s,s=s.dispatch=kT.bind(null,ut,s),[h.memoizedState,s]},useRef:function(s){var i=Er();return s={current:s},i.memoizedState=s},useState:By,useDebugValue:lf,useDeferredValue:function(s){return Er().memoizedState=s},useTransition:function(){var s=By(!1),i=s[0];return s=IT.bind(null,s[1]),Er().memoizedState=s,[i,s]},useMutableSource:function(){},useSyncExternalStore:function(s,i,l){var h=ut,f=Er();if(at){if(l===void 0)throw Error(t(407));l=l()}else{if(l=i(),Ft===null)throw Error(t(349));(Ri&30)!==0||Ly(h,i,l)}f.memoizedState=l;var y={value:l,getSnapshot:i};return f.queue=y,zy(Fy.bind(null,h,y,s),[s]),h.flags|=2048,fl(9,My.bind(null,h,y,l,i),void 0,null),l},useId:function(){var s=Er(),i=Ft.identifierPrefix;if(at){var l=Qr,h=Gr;l=(h&~(1<<32-on(h)-1)).toString(32)+l,i=":"+i+"R"+l,l=hl++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=RT++,i=":"+i+"r"+l.toString(32)+":";return s.memoizedState=i},unstable_isNewReconciler:!1},PT={readContext:Mn,useCallback:Qy,useContext:Mn,useEffect:af,useImperativeHandle:Gy,useInsertionEffect:Hy,useLayoutEffect:qy,useMemo:Ky,useReducer:sf,useRef:Uy,useState:function(){return sf(dl)},useDebugValue:lf,useDeferredValue:function(s){var i=Fn();return Xy(i,Ct.memoizedState,s)},useTransition:function(){var s=sf(dl)[0],i=Fn().memoizedState;return[s,i]},useMutableSource:Vy,useSyncExternalStore:Oy,useId:Jy,unstable_isNewReconciler:!1},NT={readContext:Mn,useCallback:Qy,useContext:Mn,useEffect:af,useImperativeHandle:Gy,useInsertionEffect:Hy,useLayoutEffect:qy,useMemo:Ky,useReducer:of,useRef:Uy,useState:function(){return of(dl)},useDebugValue:lf,useDeferredValue:function(s){var i=Fn();return Ct===null?i.memoizedState=s:Xy(i,Ct.memoizedState,s)},useTransition:function(){var s=of(dl)[0],i=Fn().memoizedState;return[s,i]},useMutableSource:Vy,useSyncExternalStore:Oy,useId:Jy,unstable_isNewReconciler:!1};function nr(s,i){if(s&&s.defaultProps){i=ae({},i),s=s.defaultProps;for(var l in s)i[l]===void 0&&(i[l]=s[l]);return i}return i}function uf(s,i,l,h){i=s.memoizedState,l=l(h,i),l=l==null?i:ae({},i,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var mc={isMounted:function(s){return(s=s._reactInternals)?Gn(s)===s:!1},enqueueSetState:function(s,i,l){s=s._reactInternals;var h=un(),f=Ns(s),y=Xr(h,f);y.payload=i,l!=null&&(y.callback=l),i=ks(s,y,f),i!==null&&(ir(i,s,f,h),ac(i,s,f))},enqueueReplaceState:function(s,i,l){s=s._reactInternals;var h=un(),f=Ns(s),y=Xr(h,f);y.tag=1,y.payload=i,l!=null&&(y.callback=l),i=ks(s,y,f),i!==null&&(ir(i,s,f,h),ac(i,s,f))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var l=un(),h=Ns(s),f=Xr(l,h);f.tag=2,i!=null&&(f.callback=i),i=ks(s,f,h),i!==null&&(ir(i,s,h,l),ac(i,s,h))}};function t_(s,i,l,h,f,y,S){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,y,S):i.prototype&&i.prototype.isPureReactComponent?!Za(l,h)||!Za(f,y):!0}function n_(s,i,l){var h=!1,f=As,y=i.contextType;return typeof y=="object"&&y!==null?y=Mn(y):(f=pn(i)?Ei:Jt.current,h=i.contextTypes,y=(h=h!=null)?Po(s,f):As),i=new i(l,y),s.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=mc,s.stateNode=i,i._reactInternals=s,h&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=f,s.__reactInternalMemoizedMaskedChildContext=y),i}function r_(s,i,l,h){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,h),i.state!==s&&mc.enqueueReplaceState(i,i.state,null)}function cf(s,i,l,h){var f=s.stateNode;f.props=l,f.state=s.memoizedState,f.refs={},Kd(s);var y=i.contextType;typeof y=="object"&&y!==null?f.context=Mn(y):(y=pn(i)?Ei:Jt.current,f.context=Po(s,y)),f.state=s.memoizedState,y=i.getDerivedStateFromProps,typeof y=="function"&&(uf(s,i,y,l),f.state=s.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(i=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),i!==f.state&&mc.enqueueReplaceState(f,f.state,null),lc(s,l,f,h),f.state=s.memoizedState),typeof f.componentDidMount=="function"&&(s.flags|=4194308)}function $o(s,i){try{var l="",h=i;do l+=Pe(h),h=h.return;while(h);var f=l}catch(y){f=`
Error generating stack: `+y.message+`
`+y.stack}return{value:s,source:i,stack:f,digest:null}}function hf(s,i,l){return{value:s,source:null,stack:l??null,digest:i??null}}function df(s,i){try{console.error(i.value)}catch(l){setTimeout(function(){throw l})}}var DT=typeof WeakMap=="function"?WeakMap:Map;function s_(s,i,l){l=Xr(-1,l),l.tag=3,l.payload={element:null};var h=i.value;return l.callback=function(){Sc||(Sc=!0,If=h),df(s,i)},l}function i_(s,i,l){l=Xr(-1,l),l.tag=3;var h=s.type.getDerivedStateFromError;if(typeof h=="function"){var f=i.value;l.payload=function(){return h(f)},l.callback=function(){df(s,i)}}var y=s.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){df(s,i),typeof h!="function"&&(bs===null?bs=new Set([this]):bs.add(this));var S=i.stack;this.componentDidCatch(i.value,{componentStack:S!==null?S:""})}),l}function o_(s,i,l){var h=s.pingCache;if(h===null){h=s.pingCache=new DT;var f=new Set;h.set(i,f)}else f=h.get(i),f===void 0&&(f=new Set,h.set(i,f));f.has(l)||(f.add(l),s=GT.bind(null,s,i,l),i.then(s,s))}function a_(s){do{var i;if((i=s.tag===13)&&(i=s.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return s;s=s.return}while(s!==null);return null}function l_(s,i,l,h,f){return(s.mode&1)===0?(s===i?s.flags|=65536:(s.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(i=Xr(-1,1),i.tag=2,ks(l,i,1))),l.lanes|=1),s):(s.flags|=65536,s.lanes=f,s)}var VT=G.ReactCurrentOwner,mn=!1;function ln(s,i,l,h){i.child=s===null?ky(i,null,l,h):Oo(i,s.child,l,h)}function u_(s,i,l,h,f){l=l.render;var y=i.ref;return Mo(i,f),h=nf(s,i,l,h,y,f),l=rf(),s!==null&&!mn?(i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~f,Jr(s,i,f)):(at&&l&&$d(i),i.flags|=1,ln(s,i,h,f),i.child)}function c_(s,i,l,h,f){if(s===null){var y=l.type;return typeof y=="function"&&!Vf(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(i.tag=15,i.type=y,h_(s,i,y,h,f)):(s=kc(l.type,null,h,i,i.mode,f),s.ref=i.ref,s.return=i,i.child=s)}if(y=s.child,(s.lanes&f)===0){var S=y.memoizedProps;if(l=l.compare,l=l!==null?l:Za,l(S,h)&&s.ref===i.ref)return Jr(s,i,f)}return i.flags|=1,s=Vs(y,h),s.ref=i.ref,s.return=i,i.child=s}function h_(s,i,l,h,f){if(s!==null){var y=s.memoizedProps;if(Za(y,h)&&s.ref===i.ref)if(mn=!1,i.pendingProps=h=y,(s.lanes&f)!==0)(s.flags&131072)!==0&&(mn=!0);else return i.lanes=s.lanes,Jr(s,i,f)}return ff(s,i,l,h,f)}function d_(s,i,l){var h=i.pendingProps,f=h.children,y=s!==null?s.memoizedState:null;if(h.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(Bo,In),In|=l;else{if((l&1073741824)===0)return s=y!==null?y.baseLanes|l:l,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:s,cachePool:null,transitions:null},i.updateQueue=null,et(Bo,In),In|=s,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:l,et(Bo,In),In|=h}else y!==null?(h=y.baseLanes|l,i.memoizedState=null):h=l,et(Bo,In),In|=h;return ln(s,i,f,l),i.child}function f_(s,i){var l=i.ref;(s===null&&l!==null||s!==null&&s.ref!==l)&&(i.flags|=512,i.flags|=2097152)}function ff(s,i,l,h,f){var y=pn(l)?Ei:Jt.current;return y=Po(i,y),Mo(i,f),l=nf(s,i,l,h,y,f),h=rf(),s!==null&&!mn?(i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~f,Jr(s,i,f)):(at&&h&&$d(i),i.flags|=1,ln(s,i,l,f),i.child)}function p_(s,i,l,h,f){if(pn(l)){var y=!0;Zu(i)}else y=!1;if(Mo(i,f),i.stateNode===null)yc(s,i),n_(i,l,h),cf(i,l,h,f),h=!0;else if(s===null){var S=i.stateNode,I=i.memoizedProps;S.props=I;var O=S.context,H=l.contextType;typeof H=="object"&&H!==null?H=Mn(H):(H=pn(l)?Ei:Jt.current,H=Po(i,H));var Z=l.getDerivedStateFromProps,te=typeof Z=="function"||typeof S.getSnapshotBeforeUpdate=="function";te||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(I!==h||O!==H)&&r_(i,S,h,H),Is=!1;var Y=i.memoizedState;S.state=Y,lc(i,h,S,f),O=i.memoizedState,I!==h||Y!==O||fn.current||Is?(typeof Z=="function"&&(uf(i,l,Z,h),O=i.memoizedState),(I=Is||t_(i,l,I,h,Y,O,H))?(te||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(i.flags|=4194308)):(typeof S.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=O),S.props=h,S.state=O,S.context=H,h=I):(typeof S.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{S=i.stateNode,by(s,i),I=i.memoizedProps,H=i.type===i.elementType?I:nr(i.type,I),S.props=H,te=i.pendingProps,Y=S.context,O=l.contextType,typeof O=="object"&&O!==null?O=Mn(O):(O=pn(l)?Ei:Jt.current,O=Po(i,O));var ue=l.getDerivedStateFromProps;(Z=typeof ue=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(I!==te||Y!==O)&&r_(i,S,h,O),Is=!1,Y=i.memoizedState,S.state=Y,lc(i,h,S,f);var de=i.memoizedState;I!==te||Y!==de||fn.current||Is?(typeof ue=="function"&&(uf(i,l,ue,h),de=i.memoizedState),(H=Is||t_(i,l,H,h,Y,de,O)||!1)?(Z||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(h,de,O),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(h,de,O)),typeof S.componentDidUpdate=="function"&&(i.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof S.componentDidUpdate!="function"||I===s.memoizedProps&&Y===s.memoizedState||(i.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||I===s.memoizedProps&&Y===s.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=de),S.props=h,S.state=de,S.context=O,h=H):(typeof S.componentDidUpdate!="function"||I===s.memoizedProps&&Y===s.memoizedState||(i.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||I===s.memoizedProps&&Y===s.memoizedState||(i.flags|=1024),h=!1)}return pf(s,i,l,h,y,f)}function pf(s,i,l,h,f,y){f_(s,i);var S=(i.flags&128)!==0;if(!h&&!S)return f&&vy(i,l,!1),Jr(s,i,y);h=i.stateNode,VT.current=i;var I=S&&typeof l.getDerivedStateFromError!="function"?null:h.render();return i.flags|=1,s!==null&&S?(i.child=Oo(i,s.child,null,y),i.child=Oo(i,null,I,y)):ln(s,i,I,y),i.memoizedState=h.state,f&&vy(i,l,!0),i.child}function m_(s){var i=s.stateNode;i.pendingContext?yy(s,i.pendingContext,i.pendingContext!==i.context):i.context&&yy(s,i.context,!1),Xd(s,i.containerInfo)}function g_(s,i,l,h,f){return Vo(),zd(f),i.flags|=256,ln(s,i,l,h),i.child}var mf={dehydrated:null,treeContext:null,retryLane:0};function gf(s){return{baseLanes:s,cachePool:null,transitions:null}}function y_(s,i,l){var h=i.pendingProps,f=lt.current,y=!1,S=(i.flags&128)!==0,I;if((I=S)||(I=s!==null&&s.memoizedState===null?!1:(f&2)!==0),I?(y=!0,i.flags&=-129):(s===null||s.memoizedState!==null)&&(f|=1),et(lt,f&1),s===null)return Ud(i),s=i.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((i.mode&1)===0?i.lanes=1:s.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(S=h.children,s=h.fallback,y?(h=i.mode,y=i.child,S={mode:"hidden",children:S},(h&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=S):y=Cc(S,h,0,null),s=Pi(s,h,l,null),y.return=i,s.return=i,y.sibling=s,i.child=y,i.child.memoizedState=gf(l),i.memoizedState=mf,s):yf(i,S));if(f=s.memoizedState,f!==null&&(I=f.dehydrated,I!==null))return OT(s,i,S,h,I,f,l);if(y){y=h.fallback,S=i.mode,f=s.child,I=f.sibling;var O={mode:"hidden",children:h.children};return(S&1)===0&&i.child!==f?(h=i.child,h.childLanes=0,h.pendingProps=O,i.deletions=null):(h=Vs(f,O),h.subtreeFlags=f.subtreeFlags&14680064),I!==null?y=Vs(I,y):(y=Pi(y,S,l,null),y.flags|=2),y.return=i,h.return=i,h.sibling=y,i.child=h,h=y,y=i.child,S=s.child.memoizedState,S=S===null?gf(l):{baseLanes:S.baseLanes|l,cachePool:null,transitions:S.transitions},y.memoizedState=S,y.childLanes=s.childLanes&~l,i.memoizedState=mf,h}return y=s.child,s=y.sibling,h=Vs(y,{mode:"visible",children:h.children}),(i.mode&1)===0&&(h.lanes=l),h.return=i,h.sibling=null,s!==null&&(l=i.deletions,l===null?(i.deletions=[s],i.flags|=16):l.push(s)),i.child=h,i.memoizedState=null,h}function yf(s,i){return i=Cc({mode:"visible",children:i},s.mode,0,null),i.return=s,s.child=i}function gc(s,i,l,h){return h!==null&&zd(h),Oo(i,s.child,null,l),s=yf(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function OT(s,i,l,h,f,y,S){if(l)return i.flags&256?(i.flags&=-257,h=hf(Error(t(422))),gc(s,i,S,h)):i.memoizedState!==null?(i.child=s.child,i.flags|=128,null):(y=h.fallback,f=i.mode,h=Cc({mode:"visible",children:h.children},f,0,null),y=Pi(y,f,S,null),y.flags|=2,h.return=i,y.return=i,h.sibling=y,i.child=h,(i.mode&1)!==0&&Oo(i,s.child,null,S),i.child.memoizedState=gf(S),i.memoizedState=mf,y);if((i.mode&1)===0)return gc(s,i,S,null);if(f.data==="$!"){if(h=f.nextSibling&&f.nextSibling.dataset,h)var I=h.dgst;return h=I,y=Error(t(419)),h=hf(y,h,void 0),gc(s,i,S,h)}if(I=(S&s.childLanes)!==0,mn||I){if(h=Ft,h!==null){switch(S&-S){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(h.suspendedLanes|S))!==0?0:f,f!==0&&f!==y.retryLane&&(y.retryLane=f,Kr(s,f),ir(h,s,f,-1))}return Df(),h=hf(Error(t(421))),gc(s,i,S,h)}return f.data==="$?"?(i.flags|=128,i.child=s.child,i=QT.bind(null,s),f._reactRetry=i,null):(s=y.treeContext,Rn=Ts(f.nextSibling),An=i,at=!0,tr=null,s!==null&&(On[Ln++]=Gr,On[Ln++]=Qr,On[Ln++]=Si,Gr=s.id,Qr=s.overflow,Si=i),i=yf(i,h.children),i.flags|=4096,i)}function __(s,i,l){s.lanes|=i;var h=s.alternate;h!==null&&(h.lanes|=i),Gd(s.return,i,l)}function _f(s,i,l,h,f){var y=s.memoizedState;y===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:f}:(y.isBackwards=i,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=l,y.tailMode=f)}function v_(s,i,l){var h=i.pendingProps,f=h.revealOrder,y=h.tail;if(ln(s,i,h.children,l),h=lt.current,(h&2)!==0)h=h&1|2,i.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&__(s,l,i);else if(s.tag===19)__(s,l,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}h&=1}if(et(lt,h),(i.mode&1)===0)i.memoizedState=null;else switch(f){case"forwards":for(l=i.child,f=null;l!==null;)s=l.alternate,s!==null&&uc(s)===null&&(f=l),l=l.sibling;l=f,l===null?(f=i.child,i.child=null):(f=l.sibling,l.sibling=null),_f(i,!1,f,l,y);break;case"backwards":for(l=null,f=i.child,i.child=null;f!==null;){if(s=f.alternate,s!==null&&uc(s)===null){i.child=f;break}s=f.sibling,f.sibling=l,l=f,f=s}_f(i,!0,l,null,y);break;case"together":_f(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function yc(s,i){(i.mode&1)===0&&s!==null&&(s.alternate=null,i.alternate=null,i.flags|=2)}function Jr(s,i,l){if(s!==null&&(i.dependencies=s.dependencies),Ii|=i.lanes,(l&i.childLanes)===0)return null;if(s!==null&&i.child!==s.child)throw Error(t(153));if(i.child!==null){for(s=i.child,l=Vs(s,s.pendingProps),i.child=l,l.return=i;s.sibling!==null;)s=s.sibling,l=l.sibling=Vs(s,s.pendingProps),l.return=i;l.sibling=null}return i.child}function LT(s,i,l){switch(i.tag){case 3:m_(i),Vo();break;case 5:Dy(i);break;case 1:pn(i.type)&&Zu(i);break;case 4:Xd(i,i.stateNode.containerInfo);break;case 10:var h=i.type._context,f=i.memoizedProps.value;et(ic,h._currentValue),h._currentValue=f;break;case 13:if(h=i.memoizedState,h!==null)return h.dehydrated!==null?(et(lt,lt.current&1),i.flags|=128,null):(l&i.child.childLanes)!==0?y_(s,i,l):(et(lt,lt.current&1),s=Jr(s,i,l),s!==null?s.sibling:null);et(lt,lt.current&1);break;case 19:if(h=(l&i.childLanes)!==0,(s.flags&128)!==0){if(h)return v_(s,i,l);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),et(lt,lt.current),h)break;return null;case 22:case 23:return i.lanes=0,d_(s,i,l)}return Jr(s,i,l)}var w_,vf,E_,S_;w_=function(s,i){for(var l=i.child;l!==null;){if(l.tag===5||l.tag===6)s.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},vf=function(){},E_=function(s,i,l,h){var f=s.memoizedProps;if(f!==h){s=i.stateNode,Ai(wr.current);var y=null;switch(l){case"input":f=si(s,f),h=si(s,h),y=[];break;case"select":f=ae({},f,{value:void 0}),h=ae({},h,{value:void 0}),y=[];break;case"textarea":f=ka(s,f),h=ka(s,h),y=[];break;default:typeof f.onClick!="function"&&typeof h.onClick=="function"&&(s.onclick=Xu)}Va(l,h);var S;l=null;for(H in f)if(!h.hasOwnProperty(H)&&f.hasOwnProperty(H)&&f[H]!=null)if(H==="style"){var I=f[H];for(S in I)I.hasOwnProperty(S)&&(l||(l={}),l[S]="")}else H!=="dangerouslySetInnerHTML"&&H!=="children"&&H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&H!=="autoFocus"&&(o.hasOwnProperty(H)?y||(y=[]):(y=y||[]).push(H,null));for(H in h){var O=h[H];if(I=f!=null?f[H]:void 0,h.hasOwnProperty(H)&&O!==I&&(O!=null||I!=null))if(H==="style")if(I){for(S in I)!I.hasOwnProperty(S)||O&&O.hasOwnProperty(S)||(l||(l={}),l[S]="");for(S in O)O.hasOwnProperty(S)&&I[S]!==O[S]&&(l||(l={}),l[S]=O[S])}else l||(y||(y=[]),y.push(H,l)),l=O;else H==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,I=I?I.__html:void 0,O!=null&&I!==O&&(y=y||[]).push(H,O)):H==="children"?typeof O!="string"&&typeof O!="number"||(y=y||[]).push(H,""+O):H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&(o.hasOwnProperty(H)?(O!=null&&H==="onScroll"&&nt("scroll",s),y||I===O||(y=[])):(y=y||[]).push(H,O))}l&&(y=y||[]).push("style",l);var H=y;(i.updateQueue=H)&&(i.flags|=4)}},S_=function(s,i,l,h){l!==h&&(i.flags|=4)};function pl(s,i){if(!at)switch(s.tailMode){case"hidden":i=s.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function Zt(s){var i=s.alternate!==null&&s.alternate.child===s.child,l=0,h=0;if(i)for(var f=s.child;f!==null;)l|=f.lanes|f.childLanes,h|=f.subtreeFlags&14680064,h|=f.flags&14680064,f.return=s,f=f.sibling;else for(f=s.child;f!==null;)l|=f.lanes|f.childLanes,h|=f.subtreeFlags,h|=f.flags,f.return=s,f=f.sibling;return s.subtreeFlags|=h,s.childLanes=l,i}function MT(s,i,l){var h=i.pendingProps;switch(jd(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(i),null;case 1:return pn(i.type)&&Yu(),Zt(i),null;case 3:return h=i.stateNode,Fo(),rt(fn),rt(Jt),Zd(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(s===null||s.child===null)&&(rc(i)?i.flags|=4:s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,tr!==null&&(bf(tr),tr=null))),vf(s,i),Zt(i),null;case 5:Jd(i);var f=Ai(ul.current);if(l=i.type,s!==null&&i.stateNode!=null)E_(s,i,l,h,f),s.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!h){if(i.stateNode===null)throw Error(t(166));return Zt(i),null}if(s=Ai(wr.current),rc(i)){h=i.stateNode,l=i.type;var y=i.memoizedProps;switch(h[vr]=i,h[sl]=y,s=(i.mode&1)!==0,l){case"dialog":nt("cancel",h),nt("close",h);break;case"iframe":case"object":case"embed":nt("load",h);break;case"video":case"audio":for(f=0;f<tl.length;f++)nt(tl[f],h);break;case"source":nt("error",h);break;case"img":case"image":case"link":nt("error",h),nt("load",h);break;case"details":nt("toggle",h);break;case"input":Yi(h,y),nt("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},nt("invalid",h);break;case"textarea":eo(h,y),nt("invalid",h)}Va(l,y),f=null;for(var S in y)if(y.hasOwnProperty(S)){var I=y[S];S==="children"?typeof I=="string"?h.textContent!==I&&(y.suppressHydrationWarning!==!0&&Ku(h.textContent,I,s),f=["children",I]):typeof I=="number"&&h.textContent!==""+I&&(y.suppressHydrationWarning!==!0&&Ku(h.textContent,I,s),f=["children",""+I]):o.hasOwnProperty(S)&&I!=null&&S==="onScroll"&&nt("scroll",h)}switch(l){case"input":Or(h),Eu(h,y,!0);break;case"textarea":Or(h),Ca(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=Xu)}h=f,i.updateQueue=h,h!==null&&(i.flags|=4)}else{S=f.nodeType===9?f:f.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Rt(l)),s==="http://www.w3.org/1999/xhtml"?l==="script"?(s=S.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof h.is=="string"?s=S.createElement(l,{is:h.is}):(s=S.createElement(l),l==="select"&&(S=s,h.multiple?S.multiple=!0:h.size&&(S.size=h.size))):s=S.createElementNS(s,l),s[vr]=i,s[sl]=h,w_(s,i,!1,!1),i.stateNode=s;e:{switch(S=Oa(l,h),l){case"dialog":nt("cancel",s),nt("close",s),f=h;break;case"iframe":case"object":case"embed":nt("load",s),f=h;break;case"video":case"audio":for(f=0;f<tl.length;f++)nt(tl[f],s);f=h;break;case"source":nt("error",s),f=h;break;case"img":case"image":case"link":nt("error",s),nt("load",s),f=h;break;case"details":nt("toggle",s),f=h;break;case"input":Yi(s,h),f=si(s,h),nt("invalid",s);break;case"option":f=h;break;case"select":s._wrapperState={wasMultiple:!!h.multiple},f=ae({},h,{value:void 0}),nt("invalid",s);break;case"textarea":eo(s,h),f=ka(s,h),nt("invalid",s);break;default:f=h}Va(l,f),I=f;for(y in I)if(I.hasOwnProperty(y)){var O=I[y];y==="style"?Na(s,O):y==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,O!=null&&ba(s,O)):y==="children"?typeof O=="string"?(l!=="textarea"||O!=="")&&ds(s,O):typeof O=="number"&&ds(s,""+O):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(o.hasOwnProperty(y)?O!=null&&y==="onScroll"&&nt("scroll",s):O!=null&&q(s,y,O,S))}switch(l){case"input":Or(s),Eu(s,h,!1);break;case"textarea":Or(s),Ca(s);break;case"option":h.value!=null&&s.setAttribute("value",""+ze(h.value));break;case"select":s.multiple=!!h.multiple,y=h.value,y!=null?Mr(s,!!h.multiple,y,!1):h.defaultValue!=null&&Mr(s,!!h.multiple,h.defaultValue,!0);break;default:typeof f.onClick=="function"&&(s.onclick=Xu)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Zt(i),null;case 6:if(s&&i.stateNode!=null)S_(s,i,s.memoizedProps,h);else{if(typeof h!="string"&&i.stateNode===null)throw Error(t(166));if(l=Ai(ul.current),Ai(wr.current),rc(i)){if(h=i.stateNode,l=i.memoizedProps,h[vr]=i,(y=h.nodeValue!==l)&&(s=An,s!==null))switch(s.tag){case 3:Ku(h.nodeValue,l,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Ku(h.nodeValue,l,(s.mode&1)!==0)}y&&(i.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[vr]=i,i.stateNode=h}return Zt(i),null;case 13:if(rt(lt),h=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(at&&Rn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Ay(),Vo(),i.flags|=98560,y=!1;else if(y=rc(i),h!==null&&h.dehydrated!==null){if(s===null){if(!y)throw Error(t(318));if(y=i.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[vr]=i}else Vo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Zt(i),y=!1}else tr!==null&&(bf(tr),tr=null),y=!0;if(!y)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=l,i):(h=h!==null,h!==(s!==null&&s.memoizedState!==null)&&h&&(i.child.flags|=8192,(i.mode&1)!==0&&(s===null||(lt.current&1)!==0?bt===0&&(bt=3):Df())),i.updateQueue!==null&&(i.flags|=4),Zt(i),null);case 4:return Fo(),vf(s,i),s===null&&nl(i.stateNode.containerInfo),Zt(i),null;case 10:return Wd(i.type._context),Zt(i),null;case 17:return pn(i.type)&&Yu(),Zt(i),null;case 19:if(rt(lt),y=i.memoizedState,y===null)return Zt(i),null;if(h=(i.flags&128)!==0,S=y.rendering,S===null)if(h)pl(y,!1);else{if(bt!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(S=uc(s),S!==null){for(i.flags|=128,pl(y,!1),h=S.updateQueue,h!==null&&(i.updateQueue=h,i.flags|=4),i.subtreeFlags=0,h=l,l=i.child;l!==null;)y=l,s=h,y.flags&=14680066,S=y.alternate,S===null?(y.childLanes=0,y.lanes=s,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=S.childLanes,y.lanes=S.lanes,y.child=S.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=S.memoizedProps,y.memoizedState=S.memoizedState,y.updateQueue=S.updateQueue,y.type=S.type,s=S.dependencies,y.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),l=l.sibling;return et(lt,lt.current&1|2),i.child}s=s.sibling}y.tail!==null&&Ze()>Uo&&(i.flags|=128,h=!0,pl(y,!1),i.lanes=4194304)}else{if(!h)if(s=uc(S),s!==null){if(i.flags|=128,h=!0,l=s.updateQueue,l!==null&&(i.updateQueue=l,i.flags|=4),pl(y,!0),y.tail===null&&y.tailMode==="hidden"&&!S.alternate&&!at)return Zt(i),null}else 2*Ze()-y.renderingStartTime>Uo&&l!==1073741824&&(i.flags|=128,h=!0,pl(y,!1),i.lanes=4194304);y.isBackwards?(S.sibling=i.child,i.child=S):(l=y.last,l!==null?l.sibling=S:i.child=S,y.last=S)}return y.tail!==null?(i=y.tail,y.rendering=i,y.tail=i.sibling,y.renderingStartTime=Ze(),i.sibling=null,l=lt.current,et(lt,h?l&1|2:l&1),i):(Zt(i),null);case 22:case 23:return Nf(),h=i.memoizedState!==null,s!==null&&s.memoizedState!==null!==h&&(i.flags|=8192),h&&(i.mode&1)!==0?(In&1073741824)!==0&&(Zt(i),i.subtreeFlags&6&&(i.flags|=8192)):Zt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function FT(s,i){switch(jd(i),i.tag){case 1:return pn(i.type)&&Yu(),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return Fo(),rt(fn),rt(Jt),Zd(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 5:return Jd(i),null;case 13:if(rt(lt),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Vo()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return rt(lt),null;case 4:return Fo(),null;case 10:return Wd(i.type._context),null;case 22:case 23:return Nf(),null;case 24:return null;default:return null}}var _c=!1,en=!1,$T=typeof WeakSet=="function"?WeakSet:Set,he=null;function jo(s,i){var l=s.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){mt(s,i,h)}else l.current=null}function wf(s,i,l){try{l()}catch(h){mt(s,i,h)}}var T_=!1;function jT(s,i){if(Pd=ws,s=ty(),Td(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var f=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var S=0,I=-1,O=-1,H=0,Z=0,te=s,Y=null;t:for(;;){for(var ue;te!==l||f!==0&&te.nodeType!==3||(I=S+f),te!==y||h!==0&&te.nodeType!==3||(O=S+h),te.nodeType===3&&(S+=te.nodeValue.length),(ue=te.firstChild)!==null;)Y=te,te=ue;for(;;){if(te===s)break t;if(Y===l&&++H===f&&(I=S),Y===y&&++Z===h&&(O=S),(ue=te.nextSibling)!==null)break;te=Y,Y=te.parentNode}te=ue}l=I===-1||O===-1?null:{start:I,end:O}}else l=null}l=l||{start:0,end:0}}else l=null;for(Nd={focusedElem:s,selectionRange:l},ws=!1,he=i;he!==null;)if(i=he,s=i.child,(i.subtreeFlags&1028)!==0&&s!==null)s.return=i,he=s;else for(;he!==null;){i=he;try{var de=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(de!==null){var fe=de.memoizedProps,_t=de.memoizedState,j=i.stateNode,M=j.getSnapshotBeforeUpdate(i.elementType===i.type?fe:nr(i.type,fe),_t);j.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var U=i.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ne){mt(i,i.return,ne)}if(s=i.sibling,s!==null){s.return=i.return,he=s;break}he=i.return}return de=T_,T_=!1,de}function ml(s,i,l){var h=i.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var f=h=h.next;do{if((f.tag&s)===s){var y=f.destroy;f.destroy=void 0,y!==void 0&&wf(i,l,y)}f=f.next}while(f!==h)}}function vc(s,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&s)===s){var h=l.create;l.destroy=h()}l=l.next}while(l!==i)}}function Ef(s){var i=s.ref;if(i!==null){var l=s.stateNode;switch(s.tag){case 5:s=l;break;default:s=l}typeof i=="function"?i(s):i.current=s}}function x_(s){var i=s.alternate;i!==null&&(s.alternate=null,x_(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&(delete i[vr],delete i[sl],delete i[Ld],delete i[ST],delete i[TT])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function A_(s){return s.tag===5||s.tag===3||s.tag===4}function R_(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||A_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Sf(s,i,l){var h=s.tag;if(h===5||h===6)s=s.stateNode,i?l.nodeType===8?l.parentNode.insertBefore(s,i):l.insertBefore(s,i):(l.nodeType===8?(i=l.parentNode,i.insertBefore(s,l)):(i=l,i.appendChild(s)),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=Xu));else if(h!==4&&(s=s.child,s!==null))for(Sf(s,i,l),s=s.sibling;s!==null;)Sf(s,i,l),s=s.sibling}function Tf(s,i,l){var h=s.tag;if(h===5||h===6)s=s.stateNode,i?l.insertBefore(s,i):l.appendChild(s);else if(h!==4&&(s=s.child,s!==null))for(Tf(s,i,l),s=s.sibling;s!==null;)Tf(s,i,l),s=s.sibling}var Ht=null,rr=!1;function Cs(s,i,l){for(l=l.child;l!==null;)I_(s,i,l),l=l.sibling}function I_(s,i,l){if(En&&typeof En.onCommitFiberUnmount=="function")try{En.onCommitFiberUnmount(fi,l)}catch{}switch(l.tag){case 5:en||jo(l,i);case 6:var h=Ht,f=rr;Ht=null,Cs(s,i,l),Ht=h,rr=f,Ht!==null&&(rr?(s=Ht,l=l.stateNode,s.nodeType===8?s.parentNode.removeChild(l):s.removeChild(l)):Ht.removeChild(l.stateNode));break;case 18:Ht!==null&&(rr?(s=Ht,l=l.stateNode,s.nodeType===8?Od(s.parentNode,l):s.nodeType===1&&Od(s,l),Yn(s)):Od(Ht,l.stateNode));break;case 4:h=Ht,f=rr,Ht=l.stateNode.containerInfo,rr=!0,Cs(s,i,l),Ht=h,rr=f;break;case 0:case 11:case 14:case 15:if(!en&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){f=h=h.next;do{var y=f,S=y.destroy;y=y.tag,S!==void 0&&((y&2)!==0||(y&4)!==0)&&wf(l,i,S),f=f.next}while(f!==h)}Cs(s,i,l);break;case 1:if(!en&&(jo(l,i),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(I){mt(l,i,I)}Cs(s,i,l);break;case 21:Cs(s,i,l);break;case 22:l.mode&1?(en=(h=en)||l.memoizedState!==null,Cs(s,i,l),en=h):Cs(s,i,l);break;default:Cs(s,i,l)}}function k_(s){var i=s.updateQueue;if(i!==null){s.updateQueue=null;var l=s.stateNode;l===null&&(l=s.stateNode=new $T),i.forEach(function(h){var f=KT.bind(null,s,h);l.has(h)||(l.add(h),h.then(f,f))})}}function sr(s,i){var l=i.deletions;if(l!==null)for(var h=0;h<l.length;h++){var f=l[h];try{var y=s,S=i,I=S;e:for(;I!==null;){switch(I.tag){case 5:Ht=I.stateNode,rr=!1;break e;case 3:Ht=I.stateNode.containerInfo,rr=!0;break e;case 4:Ht=I.stateNode.containerInfo,rr=!0;break e}I=I.return}if(Ht===null)throw Error(t(160));I_(y,S,f),Ht=null,rr=!1;var O=f.alternate;O!==null&&(O.return=null),f.return=null}catch(H){mt(f,i,H)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)C_(i,s),i=i.sibling}function C_(s,i){var l=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(sr(i,s),Sr(s),h&4){try{ml(3,s,s.return),vc(3,s)}catch(fe){mt(s,s.return,fe)}try{ml(5,s,s.return)}catch(fe){mt(s,s.return,fe)}}break;case 1:sr(i,s),Sr(s),h&512&&l!==null&&jo(l,l.return);break;case 5:if(sr(i,s),Sr(s),h&512&&l!==null&&jo(l,l.return),s.flags&32){var f=s.stateNode;try{ds(f,"")}catch(fe){mt(s,s.return,fe)}}if(h&4&&(f=s.stateNode,f!=null)){var y=s.memoizedProps,S=l!==null?l.memoizedProps:y,I=s.type,O=s.updateQueue;if(s.updateQueue=null,O!==null)try{I==="input"&&y.type==="radio"&&y.name!=null&&Ra(f,y),Oa(I,S);var H=Oa(I,y);for(S=0;S<O.length;S+=2){var Z=O[S],te=O[S+1];Z==="style"?Na(f,te):Z==="dangerouslySetInnerHTML"?ba(f,te):Z==="children"?ds(f,te):q(f,Z,te,H)}switch(I){case"input":Ia(f,y);break;case"textarea":to(f,y);break;case"select":var Y=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!y.multiple;var ue=y.value;ue!=null?Mr(f,!!y.multiple,ue,!1):Y!==!!y.multiple&&(y.defaultValue!=null?Mr(f,!!y.multiple,y.defaultValue,!0):Mr(f,!!y.multiple,y.multiple?[]:"",!1))}f[sl]=y}catch(fe){mt(s,s.return,fe)}}break;case 6:if(sr(i,s),Sr(s),h&4){if(s.stateNode===null)throw Error(t(162));f=s.stateNode,y=s.memoizedProps;try{f.nodeValue=y}catch(fe){mt(s,s.return,fe)}}break;case 3:if(sr(i,s),Sr(s),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Yn(i.containerInfo)}catch(fe){mt(s,s.return,fe)}break;case 4:sr(i,s),Sr(s);break;case 13:sr(i,s),Sr(s),f=s.child,f.flags&8192&&(y=f.memoizedState!==null,f.stateNode.isHidden=y,!y||f.alternate!==null&&f.alternate.memoizedState!==null||(Rf=Ze())),h&4&&k_(s);break;case 22:if(Z=l!==null&&l.memoizedState!==null,s.mode&1?(en=(H=en)||Z,sr(i,s),en=H):sr(i,s),Sr(s),h&8192){if(H=s.memoizedState!==null,(s.stateNode.isHidden=H)&&!Z&&(s.mode&1)!==0)for(he=s,Z=s.child;Z!==null;){for(te=he=Z;he!==null;){switch(Y=he,ue=Y.child,Y.tag){case 0:case 11:case 14:case 15:ml(4,Y,Y.return);break;case 1:jo(Y,Y.return);var de=Y.stateNode;if(typeof de.componentWillUnmount=="function"){h=Y,l=Y.return;try{i=h,de.props=i.memoizedProps,de.state=i.memoizedState,de.componentWillUnmount()}catch(fe){mt(h,l,fe)}}break;case 5:jo(Y,Y.return);break;case 22:if(Y.memoizedState!==null){N_(te);continue}}ue!==null?(ue.return=Y,he=ue):N_(te)}Z=Z.sibling}e:for(Z=null,te=s;;){if(te.tag===5){if(Z===null){Z=te;try{f=te.stateNode,H?(y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(I=te.stateNode,O=te.memoizedProps.style,S=O!=null&&O.hasOwnProperty("display")?O.display:null,I.style.display=Pa("display",S))}catch(fe){mt(s,s.return,fe)}}}else if(te.tag===6){if(Z===null)try{te.stateNode.nodeValue=H?"":te.memoizedProps}catch(fe){mt(s,s.return,fe)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===s)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===s)break e;for(;te.sibling===null;){if(te.return===null||te.return===s)break e;Z===te&&(Z=null),te=te.return}Z===te&&(Z=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:sr(i,s),Sr(s),h&4&&k_(s);break;case 21:break;default:sr(i,s),Sr(s)}}function Sr(s){var i=s.flags;if(i&2){try{e:{for(var l=s.return;l!==null;){if(A_(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var f=h.stateNode;h.flags&32&&(ds(f,""),h.flags&=-33);var y=R_(s);Tf(s,y,f);break;case 3:case 4:var S=h.stateNode.containerInfo,I=R_(s);Sf(s,I,S);break;default:throw Error(t(161))}}catch(O){mt(s,s.return,O)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function BT(s,i,l){he=s,b_(s)}function b_(s,i,l){for(var h=(s.mode&1)!==0;he!==null;){var f=he,y=f.child;if(f.tag===22&&h){var S=f.memoizedState!==null||_c;if(!S){var I=f.alternate,O=I!==null&&I.memoizedState!==null||en;I=_c;var H=en;if(_c=S,(en=O)&&!H)for(he=f;he!==null;)S=he,O=S.child,S.tag===22&&S.memoizedState!==null?D_(f):O!==null?(O.return=S,he=O):D_(f);for(;y!==null;)he=y,b_(y),y=y.sibling;he=f,_c=I,en=H}P_(s)}else(f.subtreeFlags&8772)!==0&&y!==null?(y.return=f,he=y):P_(s)}}function P_(s){for(;he!==null;){var i=he;if((i.flags&8772)!==0){var l=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:en||vc(5,i);break;case 1:var h=i.stateNode;if(i.flags&4&&!en)if(l===null)h.componentDidMount();else{var f=i.elementType===i.type?l.memoizedProps:nr(i.type,l.memoizedProps);h.componentDidUpdate(f,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=i.updateQueue;y!==null&&Ny(i,y,h);break;case 3:var S=i.updateQueue;if(S!==null){if(l=null,i.child!==null)switch(i.child.tag){case 5:l=i.child.stateNode;break;case 1:l=i.child.stateNode}Ny(i,S,l)}break;case 5:var I=i.stateNode;if(l===null&&i.flags&4){l=I;var O=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":O.autoFocus&&l.focus();break;case"img":O.src&&(l.src=O.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var H=i.alternate;if(H!==null){var Z=H.memoizedState;if(Z!==null){var te=Z.dehydrated;te!==null&&Yn(te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}en||i.flags&512&&Ef(i)}catch(Y){mt(i,i.return,Y)}}if(i===s){he=null;break}if(l=i.sibling,l!==null){l.return=i.return,he=l;break}he=i.return}}function N_(s){for(;he!==null;){var i=he;if(i===s){he=null;break}var l=i.sibling;if(l!==null){l.return=i.return,he=l;break}he=i.return}}function D_(s){for(;he!==null;){var i=he;try{switch(i.tag){case 0:case 11:case 15:var l=i.return;try{vc(4,i)}catch(O){mt(i,l,O)}break;case 1:var h=i.stateNode;if(typeof h.componentDidMount=="function"){var f=i.return;try{h.componentDidMount()}catch(O){mt(i,f,O)}}var y=i.return;try{Ef(i)}catch(O){mt(i,y,O)}break;case 5:var S=i.return;try{Ef(i)}catch(O){mt(i,S,O)}}}catch(O){mt(i,i.return,O)}if(i===s){he=null;break}var I=i.sibling;if(I!==null){I.return=i.return,he=I;break}he=i.return}}var UT=Math.ceil,wc=G.ReactCurrentDispatcher,xf=G.ReactCurrentOwner,$n=G.ReactCurrentBatchConfig,$e=0,Ft=null,Et=null,qt=0,In=0,Bo=xs(0),bt=0,gl=null,Ii=0,Ec=0,Af=0,yl=null,gn=null,Rf=0,Uo=1/0,Yr=null,Sc=!1,If=null,bs=null,Tc=!1,Ps=null,xc=0,_l=0,kf=null,Ac=-1,Rc=0;function un(){return($e&6)!==0?Ze():Ac!==-1?Ac:Ac=Ze()}function Ns(s){return(s.mode&1)===0?1:($e&2)!==0&&qt!==0?qt&-qt:AT.transition!==null?(Rc===0&&(Rc=mi()),Rc):(s=Ve,s!==0||(s=window.event,s=s===void 0?16:Wa(s.type)),s)}function ir(s,i,l,h){if(50<_l)throw _l=0,kf=null,Error(t(185));gs(s,l,h),(($e&2)===0||s!==Ft)&&(s===Ft&&(($e&2)===0&&(Ec|=l),bt===4&&Ds(s,qt)),yn(s,h),l===1&&$e===0&&(i.mode&1)===0&&(Uo=Ze()+500,ec&&Rs()))}function yn(s,i){var l=s.callbackNode;jr(s,i);var h=pi(s,s===Ft?qt:0);if(h===0)l!==null&&Ba(l),s.callbackNode=null,s.callbackPriority=0;else if(i=h&-h,s.callbackPriority!==i){if(l!=null&&Ba(l),i===1)s.tag===0?xT(O_.bind(null,s)):wy(O_.bind(null,s)),wT(function(){($e&6)===0&&Rs()}),l=null;else{switch(_s(h)){case 1:l=di;break;case 4:l=fs;break;case 16:l=Nn;break;case 536870912:l=Ru;break;default:l=Nn}l=z_(l,V_.bind(null,s))}s.callbackPriority=i,s.callbackNode=l}}function V_(s,i){if(Ac=-1,Rc=0,($e&6)!==0)throw Error(t(327));var l=s.callbackNode;if(zo()&&s.callbackNode!==l)return null;var h=pi(s,s===Ft?qt:0);if(h===0)return null;if((h&30)!==0||(h&s.expiredLanes)!==0||i)i=Ic(s,h);else{i=h;var f=$e;$e|=2;var y=M_();(Ft!==s||qt!==i)&&(Yr=null,Uo=Ze()+500,Ci(s,i));do try{qT();break}catch(I){L_(s,I)}while(!0);qd(),wc.current=y,$e=f,Et!==null?i=0:(Ft=null,qt=0,i=bt)}if(i!==0){if(i===2&&(f=Sn(s),f!==0&&(h=f,i=Cf(s,f))),i===1)throw l=gl,Ci(s,0),Ds(s,h),yn(s,Ze()),l;if(i===6)Ds(s,h);else{if(f=s.current.alternate,(h&30)===0&&!zT(f)&&(i=Ic(s,h),i===2&&(y=Sn(s),y!==0&&(h=y,i=Cf(s,y))),i===1))throw l=gl,Ci(s,0),Ds(s,h),yn(s,Ze()),l;switch(s.finishedWork=f,s.finishedLanes=h,i){case 0:case 1:throw Error(t(345));case 2:bi(s,gn,Yr);break;case 3:if(Ds(s,h),(h&130023424)===h&&(i=Rf+500-Ze(),10<i)){if(pi(s,0)!==0)break;if(f=s.suspendedLanes,(f&h)!==h){un(),s.pingedLanes|=s.suspendedLanes&f;break}s.timeoutHandle=Vd(bi.bind(null,s,gn,Yr),i);break}bi(s,gn,Yr);break;case 4:if(Ds(s,h),(h&4194240)===h)break;for(i=s.eventTimes,f=-1;0<h;){var S=31-on(h);y=1<<S,S=i[S],S>f&&(f=S),h&=~y}if(h=f,h=Ze()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*UT(h/1960))-h,10<h){s.timeoutHandle=Vd(bi.bind(null,s,gn,Yr),h);break}bi(s,gn,Yr);break;case 5:bi(s,gn,Yr);break;default:throw Error(t(329))}}}return yn(s,Ze()),s.callbackNode===l?V_.bind(null,s):null}function Cf(s,i){var l=yl;return s.current.memoizedState.isDehydrated&&(Ci(s,i).flags|=256),s=Ic(s,i),s!==2&&(i=gn,gn=l,i!==null&&bf(i)),s}function bf(s){gn===null?gn=s:gn.push.apply(gn,s)}function zT(s){for(var i=s;;){if(i.flags&16384){var l=i.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var f=l[h],y=f.getSnapshot;f=f.value;try{if(!er(y(),f))return!1}catch{return!1}}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ds(s,i){for(i&=~Af,i&=~Ec,s.suspendedLanes|=i,s.pingedLanes&=~i,s=s.expirationTimes;0<i;){var l=31-on(i),h=1<<l;s[l]=-1,i&=~h}}function O_(s){if(($e&6)!==0)throw Error(t(327));zo();var i=pi(s,0);if((i&1)===0)return yn(s,Ze()),null;var l=Ic(s,i);if(s.tag!==0&&l===2){var h=Sn(s);h!==0&&(i=h,l=Cf(s,h))}if(l===1)throw l=gl,Ci(s,0),Ds(s,i),yn(s,Ze()),l;if(l===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=i,bi(s,gn,Yr),yn(s,Ze()),null}function Pf(s,i){var l=$e;$e|=1;try{return s(i)}finally{$e=l,$e===0&&(Uo=Ze()+500,ec&&Rs())}}function ki(s){Ps!==null&&Ps.tag===0&&($e&6)===0&&zo();var i=$e;$e|=1;var l=$n.transition,h=Ve;try{if($n.transition=null,Ve=1,s)return s()}finally{Ve=h,$n.transition=l,$e=i,($e&6)===0&&Rs()}}function Nf(){In=Bo.current,rt(Bo)}function Ci(s,i){s.finishedWork=null,s.finishedLanes=0;var l=s.timeoutHandle;if(l!==-1&&(s.timeoutHandle=-1,vT(l)),Et!==null)for(l=Et.return;l!==null;){var h=l;switch(jd(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Yu();break;case 3:Fo(),rt(fn),rt(Jt),Zd();break;case 5:Jd(h);break;case 4:Fo();break;case 13:rt(lt);break;case 19:rt(lt);break;case 10:Wd(h.type._context);break;case 22:case 23:Nf()}l=l.return}if(Ft=s,Et=s=Vs(s.current,null),qt=In=i,bt=0,gl=null,Af=Ec=Ii=0,gn=yl=null,xi!==null){for(i=0;i<xi.length;i++)if(l=xi[i],h=l.interleaved,h!==null){l.interleaved=null;var f=h.next,y=l.pending;if(y!==null){var S=y.next;y.next=f,h.next=S}l.pending=h}xi=null}return s}function L_(s,i){do{var l=Et;try{if(qd(),cc.current=pc,hc){for(var h=ut.memoizedState;h!==null;){var f=h.queue;f!==null&&(f.pending=null),h=h.next}hc=!1}if(Ri=0,Mt=Ct=ut=null,cl=!1,hl=0,xf.current=null,l===null||l.return===null){bt=1,gl=i,Et=null;break}e:{var y=s,S=l.return,I=l,O=i;if(i=qt,I.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){var H=O,Z=I,te=Z.tag;if((Z.mode&1)===0&&(te===0||te===11||te===15)){var Y=Z.alternate;Y?(Z.updateQueue=Y.updateQueue,Z.memoizedState=Y.memoizedState,Z.lanes=Y.lanes):(Z.updateQueue=null,Z.memoizedState=null)}var ue=a_(S);if(ue!==null){ue.flags&=-257,l_(ue,S,I,y,i),ue.mode&1&&o_(y,H,i),i=ue,O=H;var de=i.updateQueue;if(de===null){var fe=new Set;fe.add(O),i.updateQueue=fe}else de.add(O);break e}else{if((i&1)===0){o_(y,H,i),Df();break e}O=Error(t(426))}}else if(at&&I.mode&1){var _t=a_(S);if(_t!==null){(_t.flags&65536)===0&&(_t.flags|=256),l_(_t,S,I,y,i),zd($o(O,I));break e}}y=O=$o(O,I),bt!==4&&(bt=2),yl===null?yl=[y]:yl.push(y),y=S;do{switch(y.tag){case 3:y.flags|=65536,i&=-i,y.lanes|=i;var j=s_(y,O,i);Py(y,j);break e;case 1:I=O;var M=y.type,U=y.stateNode;if((y.flags&128)===0&&(typeof M.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(bs===null||!bs.has(U)))){y.flags|=65536,i&=-i,y.lanes|=i;var ne=i_(y,I,i);Py(y,ne);break e}}y=y.return}while(y!==null)}$_(l)}catch(pe){i=pe,Et===l&&l!==null&&(Et=l=l.return);continue}break}while(!0)}function M_(){var s=wc.current;return wc.current=pc,s===null?pc:s}function Df(){(bt===0||bt===3||bt===2)&&(bt=4),Ft===null||(Ii&268435455)===0&&(Ec&268435455)===0||Ds(Ft,qt)}function Ic(s,i){var l=$e;$e|=2;var h=M_();(Ft!==s||qt!==i)&&(Yr=null,Ci(s,i));do try{HT();break}catch(f){L_(s,f)}while(!0);if(qd(),$e=l,wc.current=h,Et!==null)throw Error(t(261));return Ft=null,qt=0,bt}function HT(){for(;Et!==null;)F_(Et)}function qT(){for(;Et!==null&&!xu();)F_(Et)}function F_(s){var i=U_(s.alternate,s,In);s.memoizedProps=s.pendingProps,i===null?$_(s):Et=i,xf.current=null}function $_(s){var i=s;do{var l=i.alternate;if(s=i.return,(i.flags&32768)===0){if(l=MT(l,i,In),l!==null){Et=l;return}}else{if(l=FT(l,i),l!==null){l.flags&=32767,Et=l;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{bt=6,Et=null;return}}if(i=i.sibling,i!==null){Et=i;return}Et=i=s}while(i!==null);bt===0&&(bt=5)}function bi(s,i,l){var h=Ve,f=$n.transition;try{$n.transition=null,Ve=1,WT(s,i,l,h)}finally{$n.transition=f,Ve=h}return null}function WT(s,i,l,h){do zo();while(Ps!==null);if(($e&6)!==0)throw Error(t(327));l=s.finishedWork;var f=s.finishedLanes;if(l===null)return null;if(s.finishedWork=null,s.finishedLanes=0,l===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var y=l.lanes|l.childLanes;if(Xe(s,y),s===Ft&&(Et=Ft=null,qt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Tc||(Tc=!0,z_(Nn,function(){return zo(),null})),y=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||y){y=$n.transition,$n.transition=null;var S=Ve;Ve=1;var I=$e;$e|=4,xf.current=null,jT(s,l),C_(l,s),dT(Nd),ws=!!Pd,Nd=Pd=null,s.current=l,BT(l),md(),$e=I,Ve=S,$n.transition=y}else s.current=l;if(Tc&&(Tc=!1,Ps=s,xc=f),y=s.pendingLanes,y===0&&(bs=null),Iu(l.stateNode),yn(s,Ze()),i!==null)for(h=s.onRecoverableError,l=0;l<i.length;l++)f=i[l],h(f.value,{componentStack:f.stack,digest:f.digest});if(Sc)throw Sc=!1,s=If,If=null,s;return(xc&1)!==0&&s.tag!==0&&zo(),y=s.pendingLanes,(y&1)!==0?s===kf?_l++:(_l=0,kf=s):_l=0,Rs(),null}function zo(){if(Ps!==null){var s=_s(xc),i=$n.transition,l=Ve;try{if($n.transition=null,Ve=16>s?16:s,Ps===null)var h=!1;else{if(s=Ps,Ps=null,xc=0,($e&6)!==0)throw Error(t(331));var f=$e;for($e|=4,he=s.current;he!==null;){var y=he,S=y.child;if((he.flags&16)!==0){var I=y.deletions;if(I!==null){for(var O=0;O<I.length;O++){var H=I[O];for(he=H;he!==null;){var Z=he;switch(Z.tag){case 0:case 11:case 15:ml(8,Z,y)}var te=Z.child;if(te!==null)te.return=Z,he=te;else for(;he!==null;){Z=he;var Y=Z.sibling,ue=Z.return;if(x_(Z),Z===H){he=null;break}if(Y!==null){Y.return=ue,he=Y;break}he=ue}}}var de=y.alternate;if(de!==null){var fe=de.child;if(fe!==null){de.child=null;do{var _t=fe.sibling;fe.sibling=null,fe=_t}while(fe!==null)}}he=y}}if((y.subtreeFlags&2064)!==0&&S!==null)S.return=y,he=S;else e:for(;he!==null;){if(y=he,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:ml(9,y,y.return)}var j=y.sibling;if(j!==null){j.return=y.return,he=j;break e}he=y.return}}var M=s.current;for(he=M;he!==null;){S=he;var U=S.child;if((S.subtreeFlags&2064)!==0&&U!==null)U.return=S,he=U;else e:for(S=M;he!==null;){if(I=he,(I.flags&2048)!==0)try{switch(I.tag){case 0:case 11:case 15:vc(9,I)}}catch(pe){mt(I,I.return,pe)}if(I===S){he=null;break e}var ne=I.sibling;if(ne!==null){ne.return=I.return,he=ne;break e}he=I.return}}if($e=f,Rs(),En&&typeof En.onPostCommitFiberRoot=="function")try{En.onPostCommitFiberRoot(fi,s)}catch{}h=!0}return h}finally{Ve=l,$n.transition=i}}return!1}function j_(s,i,l){i=$o(l,i),i=s_(s,i,1),s=ks(s,i,1),i=un(),s!==null&&(gs(s,1,i),yn(s,i))}function mt(s,i,l){if(s.tag===3)j_(s,s,l);else for(;i!==null;){if(i.tag===3){j_(i,s,l);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(bs===null||!bs.has(h))){s=$o(l,s),s=i_(i,s,1),i=ks(i,s,1),s=un(),i!==null&&(gs(i,1,s),yn(i,s));break}}i=i.return}}function GT(s,i,l){var h=s.pingCache;h!==null&&h.delete(i),i=un(),s.pingedLanes|=s.suspendedLanes&l,Ft===s&&(qt&l)===l&&(bt===4||bt===3&&(qt&130023424)===qt&&500>Ze()-Rf?Ci(s,0):Af|=l),yn(s,i)}function B_(s,i){i===0&&((s.mode&1)===0?i=1:(i=ho,ho<<=1,(ho&130023424)===0&&(ho=4194304)));var l=un();s=Kr(s,i),s!==null&&(gs(s,i,l),yn(s,l))}function QT(s){var i=s.memoizedState,l=0;i!==null&&(l=i.retryLane),B_(s,l)}function KT(s,i){var l=0;switch(s.tag){case 13:var h=s.stateNode,f=s.memoizedState;f!==null&&(l=f.retryLane);break;case 19:h=s.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(i),B_(s,l)}var U_;U_=function(s,i,l){if(s!==null)if(s.memoizedProps!==i.pendingProps||fn.current)mn=!0;else{if((s.lanes&l)===0&&(i.flags&128)===0)return mn=!1,LT(s,i,l);mn=(s.flags&131072)!==0}else mn=!1,at&&(i.flags&1048576)!==0&&Ey(i,nc,i.index);switch(i.lanes=0,i.tag){case 2:var h=i.type;yc(s,i),s=i.pendingProps;var f=Po(i,Jt.current);Mo(i,l),f=nf(null,i,h,s,f,l);var y=rf();return i.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,pn(h)?(y=!0,Zu(i)):y=!1,i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Kd(i),f.updater=mc,i.stateNode=f,f._reactInternals=i,cf(i,h,s,l),i=pf(null,i,h,!0,y,l)):(i.tag=0,at&&y&&$d(i),ln(null,i,f,l),i=i.child),i;case 16:h=i.elementType;e:{switch(yc(s,i),s=i.pendingProps,f=h._init,h=f(h._payload),i.type=h,f=i.tag=JT(h),s=nr(h,s),f){case 0:i=ff(null,i,h,s,l);break e;case 1:i=p_(null,i,h,s,l);break e;case 11:i=u_(null,i,h,s,l);break e;case 14:i=c_(null,i,h,nr(h.type,s),l);break e}throw Error(t(306,h,""))}return i;case 0:return h=i.type,f=i.pendingProps,f=i.elementType===h?f:nr(h,f),ff(s,i,h,f,l);case 1:return h=i.type,f=i.pendingProps,f=i.elementType===h?f:nr(h,f),p_(s,i,h,f,l);case 3:e:{if(m_(i),s===null)throw Error(t(387));h=i.pendingProps,y=i.memoizedState,f=y.element,by(s,i),lc(i,h,null,l);var S=i.memoizedState;if(h=S.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},i.updateQueue.baseState=y,i.memoizedState=y,i.flags&256){f=$o(Error(t(423)),i),i=g_(s,i,h,l,f);break e}else if(h!==f){f=$o(Error(t(424)),i),i=g_(s,i,h,l,f);break e}else for(Rn=Ts(i.stateNode.containerInfo.firstChild),An=i,at=!0,tr=null,l=ky(i,null,h,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Vo(),h===f){i=Jr(s,i,l);break e}ln(s,i,h,l)}i=i.child}return i;case 5:return Dy(i),s===null&&Ud(i),h=i.type,f=i.pendingProps,y=s!==null?s.memoizedProps:null,S=f.children,Dd(h,f)?S=null:y!==null&&Dd(h,y)&&(i.flags|=32),f_(s,i),ln(s,i,S,l),i.child;case 6:return s===null&&Ud(i),null;case 13:return y_(s,i,l);case 4:return Xd(i,i.stateNode.containerInfo),h=i.pendingProps,s===null?i.child=Oo(i,null,h,l):ln(s,i,h,l),i.child;case 11:return h=i.type,f=i.pendingProps,f=i.elementType===h?f:nr(h,f),u_(s,i,h,f,l);case 7:return ln(s,i,i.pendingProps,l),i.child;case 8:return ln(s,i,i.pendingProps.children,l),i.child;case 12:return ln(s,i,i.pendingProps.children,l),i.child;case 10:e:{if(h=i.type._context,f=i.pendingProps,y=i.memoizedProps,S=f.value,et(ic,h._currentValue),h._currentValue=S,y!==null)if(er(y.value,S)){if(y.children===f.children&&!fn.current){i=Jr(s,i,l);break e}}else for(y=i.child,y!==null&&(y.return=i);y!==null;){var I=y.dependencies;if(I!==null){S=y.child;for(var O=I.firstContext;O!==null;){if(O.context===h){if(y.tag===1){O=Xr(-1,l&-l),O.tag=2;var H=y.updateQueue;if(H!==null){H=H.shared;var Z=H.pending;Z===null?O.next=O:(O.next=Z.next,Z.next=O),H.pending=O}}y.lanes|=l,O=y.alternate,O!==null&&(O.lanes|=l),Gd(y.return,l,i),I.lanes|=l;break}O=O.next}}else if(y.tag===10)S=y.type===i.type?null:y.child;else if(y.tag===18){if(S=y.return,S===null)throw Error(t(341));S.lanes|=l,I=S.alternate,I!==null&&(I.lanes|=l),Gd(S,l,i),S=y.sibling}else S=y.child;if(S!==null)S.return=y;else for(S=y;S!==null;){if(S===i){S=null;break}if(y=S.sibling,y!==null){y.return=S.return,S=y;break}S=S.return}y=S}ln(s,i,f.children,l),i=i.child}return i;case 9:return f=i.type,h=i.pendingProps.children,Mo(i,l),f=Mn(f),h=h(f),i.flags|=1,ln(s,i,h,l),i.child;case 14:return h=i.type,f=nr(h,i.pendingProps),f=nr(h.type,f),c_(s,i,h,f,l);case 15:return h_(s,i,i.type,i.pendingProps,l);case 17:return h=i.type,f=i.pendingProps,f=i.elementType===h?f:nr(h,f),yc(s,i),i.tag=1,pn(h)?(s=!0,Zu(i)):s=!1,Mo(i,l),n_(i,h,f),cf(i,h,f,l),pf(null,i,h,!0,s,l);case 19:return v_(s,i,l);case 22:return d_(s,i,l)}throw Error(t(156,i.tag))};function z_(s,i){return uo(s,i)}function XT(s,i,l,h){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(s,i,l,h){return new XT(s,i,l,h)}function Vf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function JT(s){if(typeof s=="function")return Vf(s)?1:0;if(s!=null){if(s=s.$$typeof,s===L)return 11;if(s===pt)return 14}return 2}function Vs(s,i){var l=s.alternate;return l===null?(l=jn(s.tag,i,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=i,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&14680064,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,i=s.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l}function kc(s,i,l,h,f,y){var S=2;if(h=s,typeof s=="function")Vf(s)&&(S=1);else if(typeof s=="string")S=5;else e:switch(s){case k:return Pi(l.children,f,y,i);case x:S=8,f|=8;break;case R:return s=jn(12,l,i,f|2),s.elementType=R,s.lanes=y,s;case C:return s=jn(13,l,i,f),s.elementType=C,s.lanes=y,s;case Qe:return s=jn(19,l,i,f),s.elementType=Qe,s.lanes=y,s;case Be:return Cc(l,f,y,i);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case P:S=10;break e;case D:S=9;break e;case L:S=11;break e;case pt:S=14;break e;case gt:S=16,h=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return i=jn(S,l,i,f),i.elementType=s,i.type=h,i.lanes=y,i}function Pi(s,i,l,h){return s=jn(7,s,h,i),s.lanes=l,s}function Cc(s,i,l,h){return s=jn(22,s,h,i),s.elementType=Be,s.lanes=l,s.stateNode={isHidden:!1},s}function Of(s,i,l){return s=jn(6,s,null,i),s.lanes=l,s}function Lf(s,i,l){return i=jn(4,s.children!==null?s.children:[],s.key,i),i.lanes=l,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}function YT(s,i,l,h,f){this.tag=i,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ms(0),this.expirationTimes=ms(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ms(0),this.identifierPrefix=h,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Mf(s,i,l,h,f,y,S,I,O){return s=new YT(s,i,l,I,O),i===1?(i=1,y===!0&&(i|=8)):i=0,y=jn(3,null,null,i),s.current=y,y.stateNode=s,y.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kd(y),s}function ZT(s,i,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:re,key:h==null?null:""+h,children:s,containerInfo:i,implementation:l}}function H_(s){if(!s)return As;s=s._reactInternals;e:{if(Gn(s)!==s||s.tag!==1)throw Error(t(170));var i=s;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(pn(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(s.tag===1){var l=s.type;if(pn(l))return _y(s,l,i)}return i}function q_(s,i,l,h,f,y,S,I,O){return s=Mf(l,h,!0,s,f,y,S,I,O),s.context=H_(null),l=s.current,h=un(),f=Ns(l),y=Xr(h,f),y.callback=i??null,ks(l,y,f),s.current.lanes=f,gs(s,f,h),yn(s,h),s}function bc(s,i,l,h){var f=i.current,y=un(),S=Ns(f);return l=H_(l),i.context===null?i.context=l:i.pendingContext=l,i=Xr(y,S),i.payload={element:s},h=h===void 0?null:h,h!==null&&(i.callback=h),s=ks(f,i,S),s!==null&&(ir(s,f,S,y),ac(s,f,S)),S}function Pc(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function W_(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<i?l:i}}function Ff(s,i){W_(s,i),(s=s.alternate)&&W_(s,i)}function ex(){return null}var G_=typeof reportError=="function"?reportError:function(s){console.error(s)};function $f(s){this._internalRoot=s}Nc.prototype.render=$f.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(t(409));bc(s,i,null,null)},Nc.prototype.unmount=$f.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;ki(function(){bc(null,s,null,null)}),i[qr]=null}};function Nc(s){this._internalRoot=s}Nc.prototype.unstable_scheduleHydration=function(s){if(s){var i=Nu();s={blockedOn:null,target:s,priority:i};for(var l=0;l<mr.length&&i!==0&&i<mr[l].priority;l++);mr.splice(l,0,s),l===0&&Ou(s)}};function jf(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Dc(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function Q_(){}function tx(s,i,l,h,f){if(f){if(typeof h=="function"){var y=h;h=function(){var H=Pc(S);y.call(H)}}var S=q_(i,h,s,0,null,!1,!1,"",Q_);return s._reactRootContainer=S,s[qr]=S.current,nl(s.nodeType===8?s.parentNode:s),ki(),S}for(;f=s.lastChild;)s.removeChild(f);if(typeof h=="function"){var I=h;h=function(){var H=Pc(O);I.call(H)}}var O=Mf(s,0,!1,null,null,!1,!1,"",Q_);return s._reactRootContainer=O,s[qr]=O.current,nl(s.nodeType===8?s.parentNode:s),ki(function(){bc(i,O,l,h)}),O}function Vc(s,i,l,h,f){var y=l._reactRootContainer;if(y){var S=y;if(typeof f=="function"){var I=f;f=function(){var O=Pc(S);I.call(O)}}bc(i,S,s,f)}else S=tx(l,i,s,f,h);return Pc(S)}bu=function(s){switch(s.tag){case 3:var i=s.stateNode;if(i.current.memoizedState.isDehydrated){var l=ps(i.pendingLanes);l!==0&&(ys(i,l|1),yn(i,Ze()),($e&6)===0&&(Uo=Ze()+500,Rs()))}break;case 13:ki(function(){var h=Kr(s,1);if(h!==null){var f=un();ir(h,s,1,f)}}),Ff(s,1)}},fo=function(s){if(s.tag===13){var i=Kr(s,134217728);if(i!==null){var l=un();ir(i,s,134217728,l)}Ff(s,134217728)}},Pu=function(s){if(s.tag===13){var i=Ns(s),l=Kr(s,i);if(l!==null){var h=un();ir(l,s,i,h)}Ff(s,i)}},Nu=function(){return Ve},Du=function(s,i){var l=Ve;try{return Ve=s,i()}finally{Ve=l}},ro=function(s,i,l){switch(i){case"input":if(Ia(s,l),i=l.name,l.type==="radio"&&i!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<l.length;i++){var h=l[i];if(h!==s&&h.form===s.form){var f=Ju(h);if(!f)throw Error(t(90));Ji(h),Ia(h,f)}}}break;case"textarea":to(s,l);break;case"select":i=l.value,i!=null&&Mr(s,!!l.multiple,i,!1)}},li=Pf,Ma=ki;var nx={usingClientEntryPoint:!1,Events:[il,Co,Ju,fr,La,Pf]},vl={findFiberByHostInstance:wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rx={bundleType:vl.bundleType,version:vl.version,rendererPackageName:vl.rendererPackageName,rendererConfig:vl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:G.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=ja(s),s===null?null:s.stateNode},findFiberByHostInstance:vl.findFiberByHostInstance||ex,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oc.isDisabled&&Oc.supportsFiber)try{fi=Oc.inject(rx),En=Oc}catch{}}return _n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nx,_n.createPortal=function(s,i){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jf(i))throw Error(t(200));return ZT(s,i,null,l)},_n.createRoot=function(s,i){if(!jf(s))throw Error(t(299));var l=!1,h="",f=G_;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onRecoverableError!==void 0&&(f=i.onRecoverableError)),i=Mf(s,1,!1,null,null,l,!1,h,f),s[qr]=i.current,nl(s.nodeType===8?s.parentNode:s),new $f(i)},_n.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=ja(i),s=s===null?null:s.stateNode,s},_n.flushSync=function(s){return ki(s)},_n.hydrate=function(s,i,l){if(!Dc(i))throw Error(t(200));return Vc(null,s,i,!0,l)},_n.hydrateRoot=function(s,i,l){if(!jf(s))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,f=!1,y="",S=G_;if(l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(S=l.onRecoverableError)),i=q_(i,null,s,1,l??null,f,!1,y,S),s[qr]=i.current,nl(s),h)for(s=0;s<h.length;s++)l=h[s],f=l._getVersion,f=f(l._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[l,f]:i.mutableSourceEagerHydrationData.push(l,f);return new Nc(i)},_n.render=function(s,i,l){if(!Dc(i))throw Error(t(200));return Vc(null,s,i,!1,l)},_n.unmountComponentAtNode=function(s){if(!Dc(s))throw Error(t(40));return s._reactRootContainer?(ki(function(){Vc(null,null,s,!1,function(){s._reactRootContainer=null,s[qr]=null})}),!0):!1},_n.unstable_batchedUpdates=Pf,_n.unstable_renderSubtreeIntoContainer=function(s,i,l,h){if(!Dc(l))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Vc(s,i,l,!1,h)},_n.version="18.3.1-next-f1338f8080-20240426",_n}var nv;function px(){if(nv)return zf.exports;nv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),zf.exports=fx(),zf.exports}var rv;function mx(){if(rv)return Lc;rv=1;var n=px();return Lc.createRoot=n.createRoot,Lc.hydrateRoot=n.hydrateRoot,Lc}var gx=mx();const yx=s0(gx);/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var sv="popstate";function _x(n={}){function e(o,a){let{pathname:u="/",search:d="",hash:p=""}=zi(o.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),mp("",{pathname:u,search:d,hash:p},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(o,a){let u=o.document.querySelector("base"),d="";if(u&&u.getAttribute("href")){let p=o.location.href,m=p.indexOf("#");d=m===-1?p:p.slice(0,m)}return d+"#"+(typeof a=="string"?a:Hl(a))}function r(o,a){cr(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return wx(e,t,r,n)}function ht(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function cr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function vx(){return Math.random().toString(36).substring(2,10)}function iv(n,e){return{usr:n.state,key:n.key,idx:e}}function mp(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?zi(e):e,state:t,key:e&&e.key||r||vx()}}function Hl({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function zi(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function wx(n,e,t,r={}){let{window:o=document.defaultView,v5Compat:a=!1}=r,u=o.history,d="POP",p=null,m=_();m==null&&(m=0,u.replaceState({...u.state,idx:m},""));function _(){return(u.state||{idx:null}).idx}function w(){d="POP";let b=_(),Q=b==null?null:b-m;m=b,p&&p({action:d,location:N.location,delta:Q})}function E(b,Q){d="PUSH";let B=mp(N.location,b,Q);t&&t(B,b),m=_()+1;let q=iv(B,m),G=N.createHref(B);try{u.pushState(q,"",G)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;o.location.assign(G)}a&&p&&p({action:d,location:N.location,delta:1})}function A(b,Q){d="REPLACE";let B=mp(N.location,b,Q);t&&t(B,b),m=_();let q=iv(B,m),G=N.createHref(B);u.replaceState(q,"",G),a&&p&&p({action:d,location:N.location,delta:0})}function V(b){return Ex(b)}let N={get action(){return d},get location(){return n(o,u)},listen(b){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(sv,w),p=b,()=>{o.removeEventListener(sv,w),p=null}},createHref(b){return e(o,b)},createURL:V,encodeLocation(b){let Q=V(b);return{pathname:Q.pathname,search:Q.search,hash:Q.hash}},push:E,replace:A,go(b){return u.go(b)}};return N}function Ex(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ht(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Hl(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function i0(n,e,t="/"){return Sx(n,e,t,!1)}function Sx(n,e,t,r){let o=typeof e=="string"?zi(e):e,a=as(o.pathname||"/",t);if(a==null)return null;let u=o0(n);Tx(u);let d=null;for(let p=0;d==null&&p<u.length;++p){let m=Vx(a);d=Nx(u[p],m,r)}return d}function o0(n,e=[],t=[],r="",o=!1){let a=(u,d,p=o,m)=>{let _={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(r)&&p)return;ht(_.relativePath.startsWith(r),`Absolute route path "${_.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(r.length)}let w=ss([r,_.relativePath]),E=t.concat(_);u.children&&u.children.length>0&&(ht(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),o0(u.children,e,E,w,p)),!(u.path==null&&!u.index)&&e.push({path:w,score:bx(w,u.index),routesMeta:E})};return n.forEach((u,d)=>{var p;if(u.path===""||!((p=u.path)!=null&&p.includes("?")))a(u,d);else for(let m of a0(u.path))a(u,d,!0,m)}),e}function a0(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,o=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return o?[a,""]:[a];let u=a0(r.join("/")),d=[];return d.push(...u.map(p=>p===""?a:[a,p].join("/"))),o&&d.push(...u),d.map(p=>n.startsWith("/")&&p===""?"/":p)}function Tx(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Px(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var xx=/^:[\w-]+$/,Ax=3,Rx=2,Ix=1,kx=10,Cx=-2,ov=n=>n==="*";function bx(n,e){let t=n.split("/"),r=t.length;return t.some(ov)&&(r+=Cx),e&&(r+=Rx),t.filter(o=>!ov(o)).reduce((o,a)=>o+(xx.test(a)?Ax:a===""?Ix:kx),r)}function Px(n,e){return n.length===e.length&&n.slice(0,-1).every((r,o)=>r===e[o])?n[n.length-1]-e[e.length-1]:0}function Nx(n,e,t=!1){let{routesMeta:r}=n,o={},a="/",u=[];for(let d=0;d<r.length;++d){let p=r[d],m=d===r.length-1,_=a==="/"?e:e.slice(a.length)||"/",w=ph({path:p.relativePath,caseSensitive:p.caseSensitive,end:m},_),E=p.route;if(!w&&m&&t&&!r[r.length-1].route.index&&(w=ph({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},_)),!w)return null;Object.assign(o,w.params),u.push({params:o,pathname:ss([a,w.pathname]),pathnameBase:Fx(ss([a,w.pathnameBase])),route:E}),w.pathnameBase!=="/"&&(a=ss([a,w.pathnameBase]))}return u}function ph(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=Dx(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let a=o[0],u=a.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:r.reduce((m,{paramName:_,isOptional:w},E)=>{if(_==="*"){let V=d[E]||"";u=a.slice(0,a.length-V.length).replace(/(.)\/+$/,"$1")}const A=d[E];return w&&!A?m[_]=void 0:m[_]=(A||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:u,pattern:n}}function Dx(n,e=!1,t=!0){cr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,p)=>(r.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function Vx(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return cr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function as(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var Ox=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Lx(n,e="/"){let{pathname:t,search:r="",hash:o=""}=typeof n=="string"?zi(n):n,a;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?a=av(t.substring(1),"/"):a=av(t,e)):a=e,{pathname:a,search:$x(r),hash:jx(o)}}function av(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Wf(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Mx(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function l0(n){let e=Mx(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function u0(n,e,t,r=!1){let o;typeof n=="string"?o=zi(n):(o={...n},ht(!o.pathname||!o.pathname.includes("?"),Wf("?","pathname","search",o)),ht(!o.pathname||!o.pathname.includes("#"),Wf("#","pathname","hash",o)),ht(!o.search||!o.search.includes("#"),Wf("#","search","hash",o)));let a=n===""||o.pathname==="",u=a?"/":o.pathname,d;if(u==null)d=t;else{let w=e.length-1;if(!r&&u.startsWith("..")){let E=u.split("/");for(;E[0]==="..";)E.shift(),w-=1;o.pathname=E.join("/")}d=w>=0?e[w]:"/"}let p=Lx(o,d),m=u&&u!=="/"&&u.endsWith("/"),_=(a||u===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(m||_)&&(p.pathname+="/"),p}var ss=n=>n.join("/").replace(/\/\/+/g,"/"),Fx=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),$x=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,jx=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,Bx=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function Ux(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function zx(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var c0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function h0(n,e){let t=n;if(typeof t!="string"||!Ox.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,o=!1;if(c0)try{let a=new URL(window.location.href),u=t.startsWith("//")?new URL(a.protocol+t):new URL(t),d=as(u.pathname,e);u.origin===a.origin&&d!=null?t=d+u.search+u.hash:o=!0}catch{cr(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:o,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var d0=["POST","PUT","PATCH","DELETE"];new Set(d0);var Hx=["GET",...d0];new Set(Hx);var ma=z.createContext(null);ma.displayName="DataRouter";var Mh=z.createContext(null);Mh.displayName="DataRouterState";var qx=z.createContext(!1),f0=z.createContext({isTransitioning:!1});f0.displayName="ViewTransition";var Wx=z.createContext(new Map);Wx.displayName="Fetchers";var Gx=z.createContext(null);Gx.displayName="Await";var Hn=z.createContext(null);Hn.displayName="Navigation";var iu=z.createContext(null);iu.displayName="Location";var Vr=z.createContext({outlet:null,matches:[],isDataRoute:!1});Vr.displayName="Route";var om=z.createContext(null);om.displayName="RouteError";var p0="REACT_ROUTER_ERROR",Qx="REDIRECT",Kx="ROUTE_ERROR_RESPONSE";function Xx(n){if(n.startsWith(`${p0}:${Qx}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function Jx(n){if(n.startsWith(`${p0}:${Kx}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Bx(e.status,e.statusText,e.data)}catch{}}function Yx(n,{relative:e}={}){ht(ou(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=z.useContext(Hn),{hash:o,pathname:a,search:u}=au(n,{relative:e}),d=a;return t!=="/"&&(d=a==="/"?t:ss([t,a])),r.createHref({pathname:d,search:u,hash:o})}function ou(){return z.useContext(iu)!=null}function Hi(){return ht(ou(),"useLocation() may be used only in the context of a <Router> component."),z.useContext(iu).location}var m0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function g0(n){z.useContext(Hn).static||z.useLayoutEffect(n)}function y0(){let{isDataRoute:n}=z.useContext(Vr);return n?dA():Zx()}function Zx(){ht(ou(),"useNavigate() may be used only in the context of a <Router> component.");let n=z.useContext(ma),{basename:e,navigator:t}=z.useContext(Hn),{matches:r}=z.useContext(Vr),{pathname:o}=Hi(),a=JSON.stringify(l0(r)),u=z.useRef(!1);return g0(()=>{u.current=!0}),z.useCallback((p,m={})=>{if(cr(u.current,m0),!u.current)return;if(typeof p=="number"){t.go(p);return}let _=u0(p,JSON.parse(a),o,m.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:ss([e,_.pathname])),(m.replace?t.replace:t.push)(_,m.state,m)},[e,t,a,o,n])}z.createContext(null);function eA(){let{matches:n}=z.useContext(Vr),e=n[n.length-1];return e?e.params:{}}function au(n,{relative:e}={}){let{matches:t}=z.useContext(Vr),{pathname:r}=Hi(),o=JSON.stringify(l0(t));return z.useMemo(()=>u0(n,JSON.parse(o),r,e==="path"),[n,o,r,e])}function tA(n,e){return _0(n,e)}function _0(n,e,t,r,o){var B;ht(ou(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=z.useContext(Hn),{matches:u}=z.useContext(Vr),d=u[u.length-1],p=d?d.params:{},m=d?d.pathname:"/",_=d?d.pathnameBase:"/",w=d&&d.route;{let q=w&&w.path||"";w0(m,!w||q.endsWith("*")||q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${q}"> to <Route path="${q==="/"?"*":`${q}/*`}">.`)}let E=Hi(),A;if(e){let q=typeof e=="string"?zi(e):e;ht(_==="/"||((B=q.pathname)==null?void 0:B.startsWith(_)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${q.pathname}" was given in the \`location\` prop.`),A=q}else A=E;let V=A.pathname||"/",N=V;if(_!=="/"){let q=_.replace(/^\//,"").split("/");N="/"+V.replace(/^\//,"").split("/").slice(q.length).join("/")}let b=i0(n,{pathname:N});cr(w||b!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),cr(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Q=oA(b&&b.map(q=>Object.assign({},q,{params:Object.assign({},p,q.params),pathname:ss([_,a.encodeLocation?a.encodeLocation(q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?_:ss([_,a.encodeLocation?a.encodeLocation(q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathnameBase])})),u,t,r,o);return e&&Q?z.createElement(iu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},Q):Q}function nA(){let n=hA(),e=Ux(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=z.createElement(z.Fragment,null,z.createElement("p",null," Hey developer "),z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",z.createElement("code",{style:a},"ErrorBoundary")," or"," ",z.createElement("code",{style:a},"errorElement")," prop on your route.")),z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),t?z.createElement("pre",{style:o},t):null,u)}var rA=z.createElement(nA,null),v0=class extends z.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=Jx(n.digest);t&&(n=t)}let e=n!==void 0?z.createElement(Vr.Provider,{value:this.props.routeContext},z.createElement(om.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?z.createElement(sA,{error:n},e):e}};v0.contextType=qx;var Gf=new WeakMap;function sA({children:n,error:e}){let{basename:t}=z.useContext(Hn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=Xx(e.digest);if(r){let o=Gf.get(e);if(o)throw o;let a=h0(r.location,t);if(c0&&!Gf.get(e))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const u=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw Gf.set(e,u),u}return z.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return n}function iA({routeContext:n,match:e,children:t}){let r=z.useContext(ma);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),z.createElement(Vr.Provider,{value:n},t)}function oA(n,e=[],t=null,r=null,o=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,u=t==null?void 0:t.errors;if(u!=null){let _=a.findIndex(w=>w.route.id&&(u==null?void 0:u[w.route.id])!==void 0);ht(_>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),a=a.slice(0,Math.min(a.length,_+1))}let d=!1,p=-1;if(t)for(let _=0;_<a.length;_++){let w=a[_];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(p=_),w.route.id){let{loaderData:E,errors:A}=t,V=w.route.loader&&!E.hasOwnProperty(w.route.id)&&(!A||A[w.route.id]===void 0);if(w.route.lazy||V){d=!0,p>=0?a=a.slice(0,p+1):a=[a[0]];break}}}let m=t&&r?(_,w)=>{var E,A;r(_,{location:t.location,params:((A=(E=t.matches)==null?void 0:E[0])==null?void 0:A.params)??{},unstable_pattern:zx(t.matches),errorInfo:w})}:void 0;return a.reduceRight((_,w,E)=>{let A,V=!1,N=null,b=null;t&&(A=u&&w.route.id?u[w.route.id]:void 0,N=w.route.errorElement||rA,d&&(p<0&&E===0?(w0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),V=!0,b=null):p===E&&(V=!0,b=w.route.hydrateFallbackElement||null)));let Q=e.concat(a.slice(0,E+1)),B=()=>{let q;return A?q=N:V?q=b:w.route.Component?q=z.createElement(w.route.Component,null):w.route.element?q=w.route.element:q=_,z.createElement(iA,{match:w,routeContext:{outlet:_,matches:Q,isDataRoute:t!=null},children:q})};return t&&(w.route.ErrorBoundary||w.route.errorElement||E===0)?z.createElement(v0,{location:t.location,revalidation:t.revalidation,component:N,error:A,children:B(),routeContext:{outlet:null,matches:Q,isDataRoute:!0},onError:m}):B()},null)}function am(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function aA(n){let e=z.useContext(ma);return ht(e,am(n)),e}function lA(n){let e=z.useContext(Mh);return ht(e,am(n)),e}function uA(n){let e=z.useContext(Vr);return ht(e,am(n)),e}function lm(n){let e=uA(n),t=e.matches[e.matches.length-1];return ht(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function cA(){return lm("useRouteId")}function hA(){var r;let n=z.useContext(om),e=lA("useRouteError"),t=lm("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function dA(){let{router:n}=aA("useNavigate"),e=lm("useNavigate"),t=z.useRef(!1);return g0(()=>{t.current=!0}),z.useCallback(async(o,a={})=>{cr(t.current,m0),t.current&&(typeof o=="number"?await n.navigate(o):await n.navigate(o,{fromRouteId:e,...a}))},[n,e])}var lv={};function w0(n,e,t){!e&&!lv[n]&&(lv[n]=!0,cr(!1,t))}z.memo(fA);function fA({routes:n,future:e,state:t,onError:r}){return _0(n,void 0,t,r,e)}function gp(n){ht(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function pA({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:o,static:a=!1,unstable_useTransitions:u}){ht(!ou(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),p=z.useMemo(()=>({basename:d,navigator:o,static:a,unstable_useTransitions:u,future:{}}),[d,o,a,u]);typeof t=="string"&&(t=zi(t));let{pathname:m="/",search:_="",hash:w="",state:E=null,key:A="default"}=t,V=z.useMemo(()=>{let N=as(m,d);return N==null?null:{location:{pathname:N,search:_,hash:w,state:E,key:A},navigationType:r}},[d,m,_,w,E,A,r]);return cr(V!=null,`<Router basename="${d}"> is not able to match the URL "${m}${_}${w}" because it does not start with the basename, so the <Router> won't render anything.`),V==null?null:z.createElement(Hn.Provider,{value:p},z.createElement(iu.Provider,{children:e,value:V}))}function mA({children:n,location:e}){return tA(yp(n),e)}function yp(n,e=[]){let t=[];return z.Children.forEach(n,(r,o)=>{if(!z.isValidElement(r))return;let a=[...e,o];if(r.type===z.Fragment){t.push.apply(t,yp(r.props.children,a));return}ht(r.type===gp,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ht(!r.props.index||!r.props.children,"An index route cannot have child routes.");let u={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=yp(r.props.children,a)),t.push(u)}),t}var Zc="get",eh="application/x-www-form-urlencoded";function Fh(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function gA(n){return Fh(n)&&n.tagName.toLowerCase()==="button"}function yA(n){return Fh(n)&&n.tagName.toLowerCase()==="form"}function _A(n){return Fh(n)&&n.tagName.toLowerCase()==="input"}function vA(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function wA(n,e){return n.button===0&&(!e||e==="_self")&&!vA(n)}var Mc=null;function EA(){if(Mc===null)try{new FormData(document.createElement("form"),0),Mc=!1}catch{Mc=!0}return Mc}var SA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Qf(n){return n!=null&&!SA.has(n)?(cr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${eh}"`),null):n}function TA(n,e){let t,r,o,a,u;if(yA(n)){let d=n.getAttribute("action");r=d?as(d,e):null,t=n.getAttribute("method")||Zc,o=Qf(n.getAttribute("enctype"))||eh,a=new FormData(n)}else if(gA(n)||_A(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=n.getAttribute("formaction")||d.getAttribute("action");if(r=p?as(p,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||Zc,o=Qf(n.getAttribute("formenctype"))||Qf(d.getAttribute("enctype"))||eh,a=new FormData(d,n),!EA()){let{name:m,type:_,value:w}=n;if(_==="image"){let E=m?`${m}.`:"";a.append(`${E}x`,"0"),a.append(`${E}y`,"0")}else m&&a.append(m,w)}}else{if(Fh(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Zc,r=null,o=eh,u=n}return a&&o==="text/plain"&&(u=a,a=void 0),{action:r,method:t.toLowerCase(),encType:o,formData:a,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function um(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function xA(n,e,t,r){let o=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?o.pathname.endsWith("/")?o.pathname=`${o.pathname}_.${r}`:o.pathname=`${o.pathname}.${r}`:o.pathname==="/"?o.pathname=`_root.${r}`:e&&as(o.pathname,e)==="/"?o.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${r}`,o}async function AA(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function RA(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function IA(n,e,t){let r=await Promise.all(n.map(async o=>{let a=e.routes[o.route.id];if(a){let u=await AA(a,t);return u.links?u.links():[]}return[]}));return PA(r.flat(1).filter(RA).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function uv(n,e,t,r,o,a){let u=(p,m)=>t[m]?p.route.id!==t[m].route.id:!0,d=(p,m)=>{var _;return t[m].pathname!==p.pathname||((_=t[m].route.path)==null?void 0:_.endsWith("*"))&&t[m].params["*"]!==p.params["*"]};return a==="assets"?e.filter((p,m)=>u(p,m)||d(p,m)):a==="data"?e.filter((p,m)=>{var w;let _=r.routes[p.route.id];if(!_||!_.hasLoader)return!1;if(u(p,m)||d(p,m))return!0;if(p.route.shouldRevalidate){let E=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((w=t[0])==null?void 0:w.params)||{},nextUrl:new URL(n,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function kA(n,e,{includeHydrateFallback:t}={}){return CA(n.map(r=>{let o=e.routes[r.route.id];if(!o)return[];let a=[o.module];return o.clientActionModule&&(a=a.concat(o.clientActionModule)),o.clientLoaderModule&&(a=a.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(a=a.concat(o.hydrateFallbackModule)),o.imports&&(a=a.concat(o.imports)),a}).flat(1))}function CA(n){return[...new Set(n)]}function bA(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function PA(n,e){let t=new Set;return new Set(e),n.reduce((r,o)=>{let a=JSON.stringify(bA(o));return t.has(a)||(t.add(a),r.push({key:a,link:o})),r},[])}function E0(){let n=z.useContext(ma);return um(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function NA(){let n=z.useContext(Mh);return um(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var cm=z.createContext(void 0);cm.displayName="FrameworkContext";function S0(){let n=z.useContext(cm);return um(n,"You must render this element inside a <HydratedRouter> element"),n}function DA(n,e){let t=z.useContext(cm),[r,o]=z.useState(!1),[a,u]=z.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:m,onMouseLeave:_,onTouchStart:w}=e,E=z.useRef(null);z.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let N=Q=>{Q.forEach(B=>{u(B.isIntersecting)})},b=new IntersectionObserver(N,{threshold:.5});return E.current&&b.observe(E.current),()=>{b.disconnect()}}},[n]),z.useEffect(()=>{if(r){let N=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(N)}}},[r]);let A=()=>{o(!0)},V=()=>{o(!1),u(!1)};return t?n!=="intent"?[a,E,{}]:[a,E,{onFocus:El(d,A),onBlur:El(p,V),onMouseEnter:El(m,A),onMouseLeave:El(_,V),onTouchStart:El(w,A)}]:[!1,E,{}]}function El(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function VA({page:n,...e}){let{router:t}=E0(),r=z.useMemo(()=>i0(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?z.createElement(LA,{page:n,matches:r,...e}):null}function OA(n){let{manifest:e,routeModules:t}=S0(),[r,o]=z.useState([]);return z.useEffect(()=>{let a=!1;return IA(n,e,t).then(u=>{a||o(u)}),()=>{a=!0}},[n,e,t]),r}function LA({page:n,matches:e,...t}){let r=Hi(),{future:o,manifest:a,routeModules:u}=S0(),{basename:d}=E0(),{loaderData:p,matches:m}=NA(),_=z.useMemo(()=>uv(n,e,m,a,r,"data"),[n,e,m,a,r]),w=z.useMemo(()=>uv(n,e,m,a,r,"assets"),[n,e,m,a,r]),E=z.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let N=new Set,b=!1;if(e.forEach(B=>{var G;let q=a.routes[B.route.id];!q||!q.hasLoader||(!_.some(le=>le.route.id===B.route.id)&&B.route.id in p&&((G=u[B.route.id])!=null&&G.shouldRevalidate)||q.hasClientLoader?b=!0:N.add(B.route.id))}),N.size===0)return[];let Q=xA(n,d,o.unstable_trailingSlashAwareDataRequests,"data");return b&&N.size>0&&Q.searchParams.set("_routes",e.filter(B=>N.has(B.route.id)).map(B=>B.route.id).join(",")),[Q.pathname+Q.search]},[d,o.unstable_trailingSlashAwareDataRequests,p,r,a,_,e,n,u]),A=z.useMemo(()=>kA(w,a),[w,a]),V=OA(w);return z.createElement(z.Fragment,null,E.map(N=>z.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...t})),A.map(N=>z.createElement("link",{key:N,rel:"modulepreload",href:N,...t})),V.map(({key:N,link:b})=>z.createElement("link",{key:N,nonce:t.nonce,...b,crossOrigin:b.crossOrigin??t.crossOrigin})))}function MA(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var FA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{FA&&(window.__reactRouterVersion="7.13.0")}catch{}function $A({basename:n,children:e,unstable_useTransitions:t,window:r}){let o=z.useRef();o.current==null&&(o.current=_x({window:r,v5Compat:!0}));let a=o.current,[u,d]=z.useState({action:a.action,location:a.location}),p=z.useCallback(m=>{t===!1?d(m):z.startTransition(()=>d(m))},[t]);return z.useLayoutEffect(()=>a.listen(p),[a,p]),z.createElement(pA,{basename:n,children:e,location:u.location,navigationType:u.action,navigator:a,unstable_useTransitions:t})}var T0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ql=z.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:o,reloadDocument:a,replace:u,state:d,target:p,to:m,preventScrollReset:_,viewTransition:w,unstable_defaultShouldRevalidate:E,...A},V){let{basename:N,unstable_useTransitions:b}=z.useContext(Hn),Q=typeof m=="string"&&T0.test(m),B=h0(m,N);m=B.to;let q=Yx(m,{relative:o}),[G,le,re]=DA(r,A),k=zA(m,{replace:u,state:d,target:p,preventScrollReset:_,relative:o,viewTransition:w,unstable_defaultShouldRevalidate:E,unstable_useTransitions:b});function x(P){e&&e(P),P.defaultPrevented||k(P)}let R=z.createElement("a",{...A,...re,href:B.absoluteURL||q,onClick:B.isExternal||a?e:x,ref:MA(V,le),target:p,"data-discover":!Q&&t==="render"?"true":void 0});return G&&!Q?z.createElement(z.Fragment,null,R,z.createElement(VA,{page:q})):R});ql.displayName="Link";var jA=z.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:o=!1,style:a,to:u,viewTransition:d,children:p,...m},_){let w=au(u,{relative:m.relative}),E=Hi(),A=z.useContext(Mh),{navigator:V,basename:N}=z.useContext(Hn),b=A!=null&&QA(w)&&d===!0,Q=V.encodeLocation?V.encodeLocation(w).pathname:w.pathname,B=E.pathname,q=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;t||(B=B.toLowerCase(),q=q?q.toLowerCase():null,Q=Q.toLowerCase()),q&&N&&(q=as(q,N)||q);const G=Q!=="/"&&Q.endsWith("/")?Q.length-1:Q.length;let le=B===Q||!o&&B.startsWith(Q)&&B.charAt(G)==="/",re=q!=null&&(q===Q||!o&&q.startsWith(Q)&&q.charAt(Q.length)==="/"),k={isActive:le,isPending:re,isTransitioning:b},x=le?e:void 0,R;typeof r=="function"?R=r(k):R=[r,le?"active":null,re?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let P=typeof a=="function"?a(k):a;return z.createElement(ql,{...m,"aria-current":x,className:R,ref:_,style:P,to:u,viewTransition:d},typeof p=="function"?p(k):p)});jA.displayName="NavLink";var BA=z.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:o,state:a,method:u=Zc,action:d,onSubmit:p,relative:m,preventScrollReset:_,viewTransition:w,unstable_defaultShouldRevalidate:E,...A},V)=>{let{unstable_useTransitions:N}=z.useContext(Hn),b=WA(),Q=GA(d,{relative:m}),B=u.toLowerCase()==="get"?"get":"post",q=typeof d=="string"&&T0.test(d),G=le=>{if(p&&p(le),le.defaultPrevented)return;le.preventDefault();let re=le.nativeEvent.submitter,k=(re==null?void 0:re.getAttribute("formmethod"))||u,x=()=>b(re||le.currentTarget,{fetcherKey:e,method:k,navigate:t,replace:o,state:a,relative:m,preventScrollReset:_,viewTransition:w,unstable_defaultShouldRevalidate:E});N&&t!==!1?z.startTransition(()=>x()):x()};return z.createElement("form",{ref:V,method:B,action:Q,onSubmit:r?p:G,...A,"data-discover":!q&&n==="render"?"true":void 0})});BA.displayName="Form";function UA(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function x0(n){let e=z.useContext(ma);return ht(e,UA(n)),e}function zA(n,{target:e,replace:t,state:r,preventScrollReset:o,relative:a,viewTransition:u,unstable_defaultShouldRevalidate:d,unstable_useTransitions:p}={}){let m=y0(),_=Hi(),w=au(n,{relative:a});return z.useCallback(E=>{if(wA(E,e)){E.preventDefault();let A=t!==void 0?t:Hl(_)===Hl(w),V=()=>m(n,{replace:A,state:r,preventScrollReset:o,relative:a,viewTransition:u,unstable_defaultShouldRevalidate:d});p?z.startTransition(()=>V()):V()}},[_,m,w,t,r,e,n,o,a,u,d,p])}var HA=0,qA=()=>`__${String(++HA)}__`;function WA(){let{router:n}=x0("useSubmit"),{basename:e}=z.useContext(Hn),t=cA(),r=n.fetch,o=n.navigate;return z.useCallback(async(a,u={})=>{let{action:d,method:p,encType:m,formData:_,body:w}=TA(a,e);if(u.navigate===!1){let E=u.fetcherKey||qA();await r(E,t,u.action||d,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:_,body:w,formMethod:u.method||p,formEncType:u.encType||m,flushSync:u.flushSync})}else await o(u.action||d,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:_,body:w,formMethod:u.method||p,formEncType:u.encType||m,replace:u.replace,state:u.state,fromRouteId:t,flushSync:u.flushSync,viewTransition:u.viewTransition})},[r,o,e,t])}function GA(n,{relative:e}={}){let{basename:t}=z.useContext(Hn),r=z.useContext(Vr);ht(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),a={...au(n||".",{relative:e})},u=Hi();if(n==null){a.search=u.search;let d=new URLSearchParams(a.search),p=d.getAll("index");if(p.some(_=>_==="")){d.delete("index"),p.filter(w=>w).forEach(w=>d.append("index",w));let _=d.toString();a.search=_?`?${_}`:""}}return(!n||n===".")&&o.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:ss([t,a.pathname])),Hl(a)}function QA(n,{relative:e}={}){let t=z.useContext(f0);ht(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=x0("useViewTransitionState"),o=au(n,{relative:e});if(!t.isTransitioning)return!1;let a=as(t.currentLocation.pathname,r)||t.currentLocation.pathname,u=as(t.nextLocation.pathname,r)||t.nextLocation.pathname;return ph(o.pathname,u)!=null||ph(o.pathname,a)!=null}function A0(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var o=n.length;for(e=0;e<o;e++)n[e]&&(t=A0(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function R0(){for(var n,e,t=0,r="",o=arguments.length;t<o;t++)(n=arguments[t])&&(e=A0(n))&&(r&&(r+=" "),r+=e);return r}const hm="-",KA=n=>{const e=JA(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:u=>{const d=u.split(hm);return d[0]===""&&d.length!==1&&d.shift(),I0(d,e)||XA(u)},getConflictingClassGroupIds:(u,d)=>{const p=t[u]||[];return d&&r[u]?[...p,...r[u]]:p}}},I0=(n,e)=>{var u;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),o=r?I0(n.slice(1),r):void 0;if(o)return o;if(e.validators.length===0)return;const a=n.join(hm);return(u=e.validators.find(({validator:d})=>d(a)))==null?void 0:u.classGroupId},cv=/^\[(.+)\]$/,XA=n=>{if(cv.test(n)){const e=cv.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},JA=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return ZA(Object.entries(n.classGroups),t).forEach(([a,u])=>{_p(u,r,a,e)}),r},_p=(n,e,t,r)=>{n.forEach(o=>{if(typeof o=="string"){const a=o===""?e:hv(e,o);a.classGroupId=t;return}if(typeof o=="function"){if(YA(o)){_p(o(r),e,t,r);return}e.validators.push({validator:o,classGroupId:t});return}Object.entries(o).forEach(([a,u])=>{_p(u,hv(e,a),t,r)})})},hv=(n,e)=>{let t=n;return e.split(hm).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},YA=n=>n.isThemeGetter,ZA=(n,e)=>e?n.map(([t,r])=>{const o=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([u,d])=>[e+u,d])):a);return[t,o]}):n,eR=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const o=(a,u)=>{t.set(a,u),e++,e>n&&(e=0,r=t,t=new Map)};return{get(a){let u=t.get(a);if(u!==void 0)return u;if((u=r.get(a))!==void 0)return o(a,u),u},set(a,u){t.has(a)?t.set(a,u):o(a,u)}}},k0="!",tR=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,o=e[0],a=e.length,u=d=>{const p=[];let m=0,_=0,w;for(let b=0;b<d.length;b++){let Q=d[b];if(m===0){if(Q===o&&(r||d.slice(b,b+a)===e)){p.push(d.slice(_,b)),_=b+a;continue}if(Q==="/"){w=b;continue}}Q==="["?m++:Q==="]"&&m--}const E=p.length===0?d:d.substring(_),A=E.startsWith(k0),V=A?E.substring(1):E,N=w&&w>_?w-_:void 0;return{modifiers:p,hasImportantModifier:A,baseClassName:V,maybePostfixModifierPosition:N}};return t?d=>t({className:d,parseClassName:u}):u},nR=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},rR=n=>({cache:eR(n.cacheSize),parseClassName:tR(n),...KA(n)}),sR=/\s+/,iR=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:o}=e,a=[],u=n.trim().split(sR);let d="";for(let p=u.length-1;p>=0;p-=1){const m=u[p],{modifiers:_,hasImportantModifier:w,baseClassName:E,maybePostfixModifierPosition:A}=t(m);let V=!!A,N=r(V?E.substring(0,A):E);if(!N){if(!V){d=m+(d.length>0?" "+d:d);continue}if(N=r(E),!N){d=m+(d.length>0?" "+d:d);continue}V=!1}const b=nR(_).join(":"),Q=w?b+k0:b,B=Q+N;if(a.includes(B))continue;a.push(B);const q=o(N,V);for(let G=0;G<q.length;++G){const le=q[G];a.push(Q+le)}d=m+(d.length>0?" "+d:d)}return d};function oR(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=C0(e))&&(r&&(r+=" "),r+=t);return r}const C0=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=C0(n[r]))&&(t&&(t+=" "),t+=e);return t};function aR(n,...e){let t,r,o,a=u;function u(p){const m=e.reduce((_,w)=>w(_),n());return t=rR(m),r=t.cache.get,o=t.cache.set,a=d,d(p)}function d(p){const m=r(p);if(m)return m;const _=iR(p,t);return o(p,_),_}return function(){return a(oR.apply(null,arguments))}}const st=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},b0=/^\[(?:([a-z-]+):)?(.+)\]$/i,lR=/^\d+\/\d+$/,uR=new Set(["px","full","screen"]),cR=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,hR=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,dR=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,fR=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,pR=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Zr=n=>ta(n)||uR.has(n)||lR.test(n),Ls=n=>ga(n,"length",SR),ta=n=>!!n&&!Number.isNaN(Number(n)),Kf=n=>ga(n,"number",ta),Sl=n=>!!n&&Number.isInteger(Number(n)),mR=n=>n.endsWith("%")&&ta(n.slice(0,-1)),ke=n=>b0.test(n),Ms=n=>cR.test(n),gR=new Set(["length","size","percentage"]),yR=n=>ga(n,gR,P0),_R=n=>ga(n,"position",P0),vR=new Set(["image","url"]),wR=n=>ga(n,vR,xR),ER=n=>ga(n,"",TR),Tl=()=>!0,ga=(n,e,t)=>{const r=b0.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},SR=n=>hR.test(n)&&!dR.test(n),P0=()=>!1,TR=n=>fR.test(n),xR=n=>pR.test(n),AR=()=>{const n=st("colors"),e=st("spacing"),t=st("blur"),r=st("brightness"),o=st("borderColor"),a=st("borderRadius"),u=st("borderSpacing"),d=st("borderWidth"),p=st("contrast"),m=st("grayscale"),_=st("hueRotate"),w=st("invert"),E=st("gap"),A=st("gradientColorStops"),V=st("gradientColorStopPositions"),N=st("inset"),b=st("margin"),Q=st("opacity"),B=st("padding"),q=st("saturate"),G=st("scale"),le=st("sepia"),re=st("skew"),k=st("space"),x=st("translate"),R=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",ke,e],L=()=>[ke,e],C=()=>["",Zr,Ls],Qe=()=>["auto",ta,ke],pt=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],gt=()=>["solid","dashed","dotted","double","none"],Be=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ie=()=>["start","end","center","between","around","evenly","stretch"],me=()=>["","0",ke],ae=()=>["auto","avoid","all","avoid-page","page","left","right","column"],F=()=>[ta,ke];return{cacheSize:500,separator:":",theme:{colors:[Tl],spacing:[Zr,Ls],blur:["none","",Ms,ke],brightness:F(),borderColor:[n],borderRadius:["none","","full",Ms,ke],borderSpacing:L(),borderWidth:C(),contrast:F(),grayscale:me(),hueRotate:F(),invert:me(),gap:L(),gradientColorStops:[n],gradientColorStopPositions:[mR,Ls],inset:D(),margin:D(),opacity:F(),padding:L(),saturate:F(),scale:F(),sepia:me(),skew:F(),space:L(),translate:L()},classGroups:{aspect:[{aspect:["auto","square","video",ke]}],container:["container"],columns:[{columns:[Ms]}],"break-after":[{"break-after":ae()}],"break-before":[{"break-before":ae()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...pt(),ke]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[N]}],"inset-x":[{"inset-x":[N]}],"inset-y":[{"inset-y":[N]}],start:[{start:[N]}],end:[{end:[N]}],top:[{top:[N]}],right:[{right:[N]}],bottom:[{bottom:[N]}],left:[{left:[N]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Sl,ke]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ke]}],grow:[{grow:me()}],shrink:[{shrink:me()}],order:[{order:["first","last","none",Sl,ke]}],"grid-cols":[{"grid-cols":[Tl]}],"col-start-end":[{col:["auto",{span:["full",Sl,ke]},ke]}],"col-start":[{"col-start":Qe()}],"col-end":[{"col-end":Qe()}],"grid-rows":[{"grid-rows":[Tl]}],"row-start-end":[{row:["auto",{span:[Sl,ke]},ke]}],"row-start":[{"row-start":Qe()}],"row-end":[{"row-end":Qe()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ke]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ke]}],gap:[{gap:[E]}],"gap-x":[{"gap-x":[E]}],"gap-y":[{"gap-y":[E]}],"justify-content":[{justify:["normal",...ie()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...ie(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...ie(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[B]}],px:[{px:[B]}],py:[{py:[B]}],ps:[{ps:[B]}],pe:[{pe:[B]}],pt:[{pt:[B]}],pr:[{pr:[B]}],pb:[{pb:[B]}],pl:[{pl:[B]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ke,e]}],"min-w":[{"min-w":[ke,e,"min","max","fit"]}],"max-w":[{"max-w":[ke,e,"none","full","min","max","fit","prose",{screen:[Ms]},Ms]}],h:[{h:[ke,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ke,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ke,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ke,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ms,Ls]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Kf]}],"font-family":[{font:[Tl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ke]}],"line-clamp":[{"line-clamp":["none",ta,Kf]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Zr,ke]}],"list-image":[{"list-image":["none",ke]}],"list-style-type":[{list:["none","disc","decimal",ke]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[Q]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[Q]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...gt(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Zr,Ls]}],"underline-offset":[{"underline-offset":["auto",Zr,ke]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ke]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ke]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[Q]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...pt(),_R]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",yR]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},wR]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[V]}],"gradient-via-pos":[{via:[V]}],"gradient-to-pos":[{to:[V]}],"gradient-from":[{from:[A]}],"gradient-via":[{via:[A]}],"gradient-to":[{to:[A]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[d]}],"border-w-x":[{"border-x":[d]}],"border-w-y":[{"border-y":[d]}],"border-w-s":[{"border-s":[d]}],"border-w-e":[{"border-e":[d]}],"border-w-t":[{"border-t":[d]}],"border-w-r":[{"border-r":[d]}],"border-w-b":[{"border-b":[d]}],"border-w-l":[{"border-l":[d]}],"border-opacity":[{"border-opacity":[Q]}],"border-style":[{border:[...gt(),"hidden"]}],"divide-x":[{"divide-x":[d]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[d]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[Q]}],"divide-style":[{divide:gt()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...gt()]}],"outline-offset":[{"outline-offset":[Zr,ke]}],"outline-w":[{outline:[Zr,Ls]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:C()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[Q]}],"ring-offset-w":[{"ring-offset":[Zr,Ls]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Ms,ER]}],"shadow-color":[{shadow:[Tl]}],opacity:[{opacity:[Q]}],"mix-blend":[{"mix-blend":[...Be(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Be()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[p]}],"drop-shadow":[{"drop-shadow":["","none",Ms,ke]}],grayscale:[{grayscale:[m]}],"hue-rotate":[{"hue-rotate":[_]}],invert:[{invert:[w]}],saturate:[{saturate:[q]}],sepia:[{sepia:[le]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[p]}],"backdrop-grayscale":[{"backdrop-grayscale":[m]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[_]}],"backdrop-invert":[{"backdrop-invert":[w]}],"backdrop-opacity":[{"backdrop-opacity":[Q]}],"backdrop-saturate":[{"backdrop-saturate":[q]}],"backdrop-sepia":[{"backdrop-sepia":[le]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[u]}],"border-spacing-x":[{"border-spacing-x":[u]}],"border-spacing-y":[{"border-spacing-y":[u]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ke]}],duration:[{duration:F()}],ease:[{ease:["linear","in","out","in-out",ke]}],delay:[{delay:F()}],animate:[{animate:["none","spin","ping","pulse","bounce",ke]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[G]}],"scale-x":[{"scale-x":[G]}],"scale-y":[{"scale-y":[G]}],rotate:[{rotate:[Sl,ke]}],"translate-x":[{"translate-x":[x]}],"translate-y":[{"translate-y":[x]}],"skew-x":[{"skew-x":[re]}],"skew-y":[{"skew-y":[re]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ke]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ke]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ke]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Zr,Ls,Kf]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},RR=aR(AR);function ei(...n){return RR(R0(n))}const dm=z.forwardRef(({className:n,type:e,...t},r)=>ee.jsx("input",{type:e,className:ei("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:r,...t}));dm.displayName="Input";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),N0=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var kR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CR=z.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:o="",children:a,iconNode:u,...d},p)=>z.createElement("svg",{ref:p,...kR,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:N0("lucide",o),...d},[...u.map(([m,_])=>z.createElement(m,_)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=(n,e)=>{const t=z.forwardRef(({className:r,...o},a)=>z.createElement(CR,{ref:a,iconNode:e,className:N0(`lucide-${IR(n)}`,r),...o}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bR=ti("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PR=ti("Dice5",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M16 8h.01",key:"cr5u4v"}],["path",{d:"M8 8h.01",key:"1e4136"}],["path",{d:"M8 16h.01",key:"18s6g9"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M12 12h.01",key:"1mp3jc"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NR=ti("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=ti("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DR=ti("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VR=ti("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OR=ti("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=ti("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),LR="modulepreload",MR=function(n){return"/"+n},fv={},FR=function(e,t,r){let o=Promise.resolve();if(t&&t.length>0){let u=function(m){return Promise.all(m.map(_=>Promise.resolve(_).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),p=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));o=u(t.map(m=>{if(m=MR(m),m in fv)return;fv[m]=!0;const _=m.endsWith(".css"),w=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${w}`))return;const E=document.createElement("link");if(E.rel=_?"stylesheet":LR,_||(E.as="script"),E.crossOrigin="",E.href=m,p&&E.setAttribute("nonce",p),document.head.appendChild(E),_)return new Promise((A,V)=>{E.addEventListener("load",A),E.addEventListener("error",()=>V(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return o.then(u=>{for(const d of u||[])d.status==="rejected"&&a(d.reason);return e().catch(a)})},pv=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,mv=R0,$R=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return mv(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:o,defaultVariants:a}=e,u=Object.keys(o).map(m=>{const _=t==null?void 0:t[m],w=a==null?void 0:a[m];if(_===null)return null;const E=pv(_)||pv(w);return o[m][E]}),d=t&&Object.entries(t).reduce((m,_)=>{let[w,E]=_;return E===void 0||(m[w]=E),m},{}),p=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((m,_)=>{let{class:w,className:E,...A}=_;return Object.entries(A).every(V=>{let[N,b]=V;return Array.isArray(b)?b.includes({...a,...d}[N]):{...a,...d}[N]===b})?[...m,w,E]:m},[]);return mv(n,u,p,t==null?void 0:t.class,t==null?void 0:t.className)},jR=$R("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),na=z.forwardRef(({className:n,variant:e,size:t,...r},o)=>ee.jsx("button",{className:ei(jR({variant:e,size:t,className:n})),ref:o,...r}));na.displayName="Button";const Wl=z.forwardRef(({className:n,...e},t)=>ee.jsx("div",{ref:t,className:ei("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));Wl.displayName="Card";const vp=z.forwardRef(({className:n,...e},t)=>ee.jsx("div",{ref:t,className:ei("flex flex-col space-y-1.5 p-6",n),...e}));vp.displayName="CardHeader";const wp=z.forwardRef(({className:n,...e},t)=>ee.jsx("h3",{ref:t,className:ei("text-2xl font-semibold leading-none tracking-tight",n),...e}));wp.displayName="CardTitle";const BR=z.forwardRef(({className:n,...e},t)=>ee.jsx("p",{ref:t,className:ei("text-sm text-muted-foreground",n),...e}));BR.displayName="CardDescription";const Gl=z.forwardRef(({className:n,...e},t)=>ee.jsx("div",{ref:t,className:ei("p-6 pt-0",n),...e}));Gl.displayName="CardContent";const V0=z.forwardRef(({className:n,value:e,...t},r)=>ee.jsx("div",{ref:r,className:ei("relative h-2 w-full overflow-hidden rounded-full bg-secondary",n),...t,children:ee.jsx("div",{className:"h-full bg-primary transition-all duration-500 ease-out",style:{width:`${e||0}%`}})}));V0.displayName="Progress";const gv=[{label:"Reading PDF file...",pct:5,delay:0},{label:"Extracting text from pages...",pct:12,delay:3e3},{label:"Analyzing game structure...",pct:25,delay:8e3},{label:"Identifying game phases and actions...",pct:40,delay:15e3},{label:"Generating rules summary...",pct:60,delay:25e3},{label:"Formatting output...",pct:80,delay:45e3},{label:"Almost done...",pct:92,delay:6e4}];function UR(){const[n,e]=z.useState(0);z.useEffect(()=>{const r=gv.slice(1).map((o,a)=>setTimeout(()=>e(a+1),o.delay));return()=>r.forEach(clearTimeout)},[]);const t=gv[n];return ee.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:ee.jsx(Wl,{className:"w-full max-w-md",children:ee.jsxs(Gl,{className:"pt-8 pb-8 flex flex-col items-center gap-6",children:[ee.jsxs("div",{className:"relative",children:[ee.jsx("div",{className:"absolute inset-0 bg-primary/10 rounded-full animate-ping"}),ee.jsx("div",{className:"relative bg-primary/5 rounded-full p-6",children:ee.jsx(PR,{className:"w-10 h-10 text-primary animate-dice-bounce"})})]}),ee.jsxs("div",{className:"w-full space-y-3 text-center",children:[ee.jsx("p",{className:"text-sm font-medium",children:t.label}),ee.jsx(V0,{value:t.pct}),ee.jsx("p",{className:"text-xs text-muted-foreground",children:"This usually takes about a minute"})]})]})})})}const yv=`I am uploading the rulebook for a board game. Please create a "Rules Summary and Reference Sheet" for this game.

Follow these specific guidelines:

### 1. Tone and Style

* **Zero Flavor Text:** Do not include thematic descriptions (e.g., "You are a merchant in the middle ages..."). Only include mechanical instructions.

* **Imperative & Concise:** Use the imperative mood. Shorten sentences.
    * *Bad:* "The player should then take the dice and roll them."
    * *Good:* "Roll the dice."

* **High Density:** Pack information tightly. Only use bullet points and indentation to show hierarchy.

### 2. Structure

Organize the summary in this exact order:

---

## {{Title}} ({{Year}})
{{one line theme description (max 25 words)}}

### END OF GAME
* Trigger: What specifically triggers the end (e.g., "When the deck runs out").
* Scoring: A bulleted list of everything that provides Victory Points (Only if relevant).
* Tie-Breakers: List the tie-breaking rules in order (Don't show if co-op game).

### GAMEPLAY
* This is the main body. Break it down by Phases (e.g., "Phase 1: Income", "Phase 2: Action").
* Use bold headers for the Phase names.
* Use numbered lists for sequential steps within a phase.
* **Action List:** If there is a list of available actions (e.g., "On your turn, perform 1 of the following 4 actions"), use bold headings for each action name followed by the mechanical cost and resolution.

### KEY CONCEPTS
* If the game uses specific keywords (e.g., "Trample," "Ambush") or icons, provide a glossary section defining them briefly.

### SETUP
* List steps strictly in order.
* **Never use lists:** If starting resources/cards change based on the player count (e.g., "2 Players: 3 cards, 3 Players: 4 cards"), you MUST present this in text, not table.

---

### 3. Formatting Rules
* **Bold:** Use bolding for **Game Terms**, **Phase Names**, and **Action Names**.
* **Never use tables**
* **List and sublist:** To show that a sub-rule belongs to a parent rule.

### 4. Special Instructions
* If there are expansion modules included in the rulebook, create a separate section at the very bottom labeled "EXPANSIONS" and summarize them separately.
* Ignore "Solitaire" rules unless they are the primary way to play.
* Do not summarize "Strategy Tips" or "Example of Play" sections.

Begin the summary now based on the attached file.`,zR=()=>{};var _v={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let o=n.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},HR=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const o=n[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[r++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],u=n[t++],d=n[t++],p=((o&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const a=n[t++],u=n[t++];e[r++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},L0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<n.length;o+=3){const a=n[o],u=o+1<n.length,d=u?n[o+1]:0,p=o+2<n.length,m=p?n[o+2]:0,_=a>>2,w=(a&3)<<4|d>>4;let E=(d&15)<<2|m>>6,A=m&63;p||(A=64,u||(E=64)),r.push(t[_],t[w],t[E],t[A])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(O0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):HR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const m=o<n.length?t[n.charAt(o)]:64;++o;const w=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||d==null||m==null||w==null)throw new qR;const E=a<<2|d>>4;if(r.push(E),m!==64){const A=d<<4&240|m>>2;if(r.push(A),w!==64){const V=m<<6&192|w;r.push(V)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class qR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WR=function(n){const e=O0(n);return L0.encodeByteArray(e,!0)},mh=function(n){return WR(n).replace(/\./g,"")},GR=function(n){try{return L0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=()=>QR().__FIREBASE_DEFAULTS__,XR=()=>{if(typeof process>"u"||typeof _v>"u")return;const n=_v.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},JR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&GR(n[1]);return e&&JSON.parse(e)},fm=()=>{try{return zR()||KR()||XR()||JR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},YR=n=>{var e,t;return(t=(e=fm())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},ZR=n=>{const e=YR(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},M0=()=>{var n;return(n=fm())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function tI(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[mh(JSON.stringify(t)),mh(JSON.stringify(u)),""].join(".")}const Ll={};function rI(){const n={prod:[],emulator:[]};for(const e of Object.keys(Ll))Ll[e]?n.emulator.push(e):n.prod.push(e);return n}function sI(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let vv=!1;function iI(n,e){if(typeof window>"u"||typeof document>"u"||!pm(window.location.host)||Ll[n]===e||Ll[n]||vv)return;Ll[n]=e;function t(E){return`__firebase__banner__${E}`}const r="__firebase__banner",a=rI().prod.length>0;function u(){const E=document.getElementById(r);E&&E.remove()}function d(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function p(E,A){E.setAttribute("width","24"),E.setAttribute("id",A),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function m(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{vv=!0,u()},E}function _(E,A){E.setAttribute("id",A),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function w(){const E=sI(r),A=t("text"),V=document.getElementById(A)||document.createElement("span"),N=t("learnmore"),b=document.getElementById(N)||document.createElement("a"),Q=t("preprendIcon"),B=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const q=E.element;d(q),_(b,N);const G=m();p(B,Q),q.append(B,V,b,G),document.body.appendChild(q)}a?(V.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function aI(){var n;const e=(n=fm())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lI(){return!aI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uI(){try{return typeof indexedDB=="object"}catch{return!1}}function cI(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI="FirebaseError";class ya extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=hI,Object.setPrototypeOf(this,ya.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,F0.prototype.create)}}class F0{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?dI(a,r):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new ya(o,d,r)}}function dI(n,e){return n.replace(fI,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const fI=/\{\$([^}]+)}/g;function gh(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const a=n[o],u=e[o];if(wv(a)&&wv(u)){if(!gh(a,u))return!1}else if(a!==u)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function wv(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ua(n){return n&&n._delegate?n._delegate:n}class Ql{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new eI;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gI(e))try{this.getOrInitializeService({instanceIdentifier:Di})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});r.resolve(a)}catch{}}}}clearInstance(e=Di){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Di){return this.instances.has(e)}getOptions(e=Di){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&u.resolve(o)}return o}onInit(e,t){var r;const o=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(o,a);const u=this.instances.get(o);return u&&e(u,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:mI(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Di){return this.component?this.component.multipleInstances?e:Di:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mI(n){return n===Di?void 0:n}function gI(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new pI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Fe||(Fe={}));const _I={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},vI=Fe.INFO,wI={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},EI=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),o=wI[e];if(o)console[o](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $0{constructor(e){this.name=e,this._logLevel=vI,this._logHandler=EI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_I[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const SI=(n,e)=>e.some(t=>n instanceof t);let Ev,Sv;function TI(){return Ev||(Ev=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xI(){return Sv||(Sv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const j0=new WeakMap,Ep=new WeakMap,B0=new WeakMap,Xf=new WeakMap,mm=new WeakMap;function AI(n){const e=new Promise((t,r)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(Us(n.result)),o()},u=()=>{r(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&j0.set(t,n)}).catch(()=>{}),mm.set(e,n),e}function RI(n){if(Ep.has(n))return;const e=new Promise((t,r)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});Ep.set(n,e)}let Sp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ep.get(n);if(e==="objectStoreNames")return n.objectStoreNames||B0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Us(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function II(n){Sp=n(Sp)}function kI(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Jf(this),e,...t);return B0.set(r,e.sort?e.sort():[e]),Us(r)}:xI().includes(n)?function(...e){return n.apply(Jf(this),e),Us(j0.get(this))}:function(...e){return Us(n.apply(Jf(this),e))}}function CI(n){return typeof n=="function"?kI(n):(n instanceof IDBTransaction&&RI(n),SI(n,TI())?new Proxy(n,Sp):n)}function Us(n){if(n instanceof IDBRequest)return AI(n);if(Xf.has(n))return Xf.get(n);const e=CI(n);return e!==n&&(Xf.set(n,e),mm.set(e,n)),e}const Jf=n=>mm.get(n);function bI(n,e,{blocked:t,upgrade:r,blocking:o,terminated:a}={}){const u=indexedDB.open(n,e),d=Us(u);return r&&u.addEventListener("upgradeneeded",p=>{r(Us(u.result),p.oldVersion,p.newVersion,Us(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{a&&p.addEventListener("close",()=>a()),o&&p.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const PI=["get","getKey","getAll","getAllKeys","count"],NI=["put","add","delete","clear"],Yf=new Map;function Tv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Yf.get(e))return Yf.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=NI.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||PI.includes(t)))return;const a=async function(u,...d){const p=this.transaction(u,o?"readwrite":"readonly");let m=p.store;return r&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),o&&p.done]))[0]};return Yf.set(e,a),a}II(n=>({...n,get:(e,t,r)=>Tv(e,t)||n.get(e,t,r),has:(e,t)=>!!Tv(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(VI(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function VI(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Tp="@firebase/app",xv="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls=new $0("@firebase/app"),OI="@firebase/app-compat",LI="@firebase/analytics-compat",MI="@firebase/analytics",FI="@firebase/app-check-compat",$I="@firebase/app-check",jI="@firebase/auth",BI="@firebase/auth-compat",UI="@firebase/database",zI="@firebase/data-connect",HI="@firebase/database-compat",qI="@firebase/functions",WI="@firebase/functions-compat",GI="@firebase/installations",QI="@firebase/installations-compat",KI="@firebase/messaging",XI="@firebase/messaging-compat",JI="@firebase/performance",YI="@firebase/performance-compat",ZI="@firebase/remote-config",ek="@firebase/remote-config-compat",tk="@firebase/storage",nk="@firebase/storage-compat",rk="@firebase/firestore",sk="@firebase/ai",ik="@firebase/firestore-compat",ok="firebase",ak="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp="[DEFAULT]",lk={[Tp]:"fire-core",[OI]:"fire-core-compat",[MI]:"fire-analytics",[LI]:"fire-analytics-compat",[$I]:"fire-app-check",[FI]:"fire-app-check-compat",[jI]:"fire-auth",[BI]:"fire-auth-compat",[UI]:"fire-rtdb",[zI]:"fire-data-connect",[HI]:"fire-rtdb-compat",[qI]:"fire-fn",[WI]:"fire-fn-compat",[GI]:"fire-iid",[QI]:"fire-iid-compat",[KI]:"fire-fcm",[XI]:"fire-fcm-compat",[JI]:"fire-perf",[YI]:"fire-perf-compat",[ZI]:"fire-rc",[ek]:"fire-rc-compat",[tk]:"fire-gcs",[nk]:"fire-gcs-compat",[rk]:"fire-fst",[ik]:"fire-fst-compat",[sk]:"fire-vertex","fire-js":"fire-js",[ok]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh=new Map,uk=new Map,Ap=new Map;function Av(n,e){try{n.container.addComponent(e)}catch(t){ls.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function _h(n){const e=n.name;if(Ap.has(e))return ls.debug(`There were multiple attempts to register component ${e}.`),!1;Ap.set(e,n);for(const t of yh.values())Av(t,n);for(const t of uk.values())Av(t,n);return!0}function ck(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function hk(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zs=new F0("app","Firebase",dk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ql("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk=ak;function U0(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:xp,automaticDataCollectionEnabled:!0},e),o=r.name;if(typeof o!="string"||!o)throw zs.create("bad-app-name",{appName:String(o)});if(t||(t=M0()),!t)throw zs.create("no-options");const a=yh.get(o);if(a){if(gh(t,a.options)&&gh(r,a.config))return a;throw zs.create("duplicate-app",{appName:o})}const u=new yI(o);for(const p of Ap.values())u.addComponent(p);const d=new fk(t,r,u);return yh.set(o,d),d}function mk(n=xp){const e=yh.get(n);if(!e&&n===xp&&M0())return U0();if(!e)throw zs.create("no-app",{appName:n});return e}function ra(n,e,t){var r;let o=(r=lk[n])!==null&&r!==void 0?r:n;t&&(o+=`-${t}`);const a=o.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const d=[`Unable to register library "${o}" with version "${e}":`];a&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ls.warn(d.join(" "));return}_h(new Ql(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk="firebase-heartbeat-database",yk=1,Kl="firebase-heartbeat-store";let Zf=null;function z0(){return Zf||(Zf=bI(gk,yk,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Kl)}catch(t){console.warn(t)}}}}).catch(n=>{throw zs.create("idb-open",{originalErrorMessage:n.message})})),Zf}async function _k(n){try{const t=(await z0()).transaction(Kl),r=await t.objectStore(Kl).get(H0(n));return await t.done,r}catch(e){if(e instanceof ya)ls.warn(e.message);else{const t=zs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ls.warn(t.message)}}}async function Rv(n,e){try{const r=(await z0()).transaction(Kl,"readwrite");await r.objectStore(Kl).put(e,H0(n)),await r.done}catch(t){if(t instanceof ya)ls.warn(t.message);else{const r=zs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ls.warn(r.message)}}}function H0(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=1024,wk=30;class Ek{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Tk(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Iv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>wk){const u=xk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ls.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Iv(),{heartbeatsToSend:r,unsentEntries:o}=Sk(this._heartbeatsCache.heartbeats),a=mh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return ls.warn(t),""}}}function Iv(){return new Date().toISOString().substring(0,10)}function Sk(n,e=vk){const t=[];let r=n.slice();for(const o of n){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),kv(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),kv(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Tk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uI()?cI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await _k(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Rv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Rv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function kv(n){return mh(JSON.stringify({version:2,heartbeats:n})).length}function xk(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(n){_h(new Ql("platform-logger",e=>new DI(e),"PRIVATE")),_h(new Ql("heartbeat",e=>new Ek(e),"PRIVATE")),ra(Tp,xv,n),ra(Tp,xv,"esm2017"),ra("fire-js","")}Ak("");var Rk="firebase",Ik="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ra(Rk,Ik,"app");var Cv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hs,q0;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,x){function R(){}R.prototype=x.prototype,k.D=x.prototype,k.prototype=new R,k.prototype.constructor=k,k.C=function(P,D,L){for(var C=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)C[Qe-2]=arguments[Qe];return x.prototype[D].apply(P,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,x,R){R||(R=0);var P=Array(16);if(typeof x=="string")for(var D=0;16>D;++D)P[D]=x.charCodeAt(R++)|x.charCodeAt(R++)<<8|x.charCodeAt(R++)<<16|x.charCodeAt(R++)<<24;else for(D=0;16>D;++D)P[D]=x[R++]|x[R++]<<8|x[R++]<<16|x[R++]<<24;x=k.g[0],R=k.g[1],D=k.g[2];var L=k.g[3],C=x+(L^R&(D^L))+P[0]+3614090360&4294967295;x=R+(C<<7&4294967295|C>>>25),C=L+(D^x&(R^D))+P[1]+3905402710&4294967295,L=x+(C<<12&4294967295|C>>>20),C=D+(R^L&(x^R))+P[2]+606105819&4294967295,D=L+(C<<17&4294967295|C>>>15),C=R+(x^D&(L^x))+P[3]+3250441966&4294967295,R=D+(C<<22&4294967295|C>>>10),C=x+(L^R&(D^L))+P[4]+4118548399&4294967295,x=R+(C<<7&4294967295|C>>>25),C=L+(D^x&(R^D))+P[5]+1200080426&4294967295,L=x+(C<<12&4294967295|C>>>20),C=D+(R^L&(x^R))+P[6]+2821735955&4294967295,D=L+(C<<17&4294967295|C>>>15),C=R+(x^D&(L^x))+P[7]+4249261313&4294967295,R=D+(C<<22&4294967295|C>>>10),C=x+(L^R&(D^L))+P[8]+1770035416&4294967295,x=R+(C<<7&4294967295|C>>>25),C=L+(D^x&(R^D))+P[9]+2336552879&4294967295,L=x+(C<<12&4294967295|C>>>20),C=D+(R^L&(x^R))+P[10]+4294925233&4294967295,D=L+(C<<17&4294967295|C>>>15),C=R+(x^D&(L^x))+P[11]+2304563134&4294967295,R=D+(C<<22&4294967295|C>>>10),C=x+(L^R&(D^L))+P[12]+1804603682&4294967295,x=R+(C<<7&4294967295|C>>>25),C=L+(D^x&(R^D))+P[13]+4254626195&4294967295,L=x+(C<<12&4294967295|C>>>20),C=D+(R^L&(x^R))+P[14]+2792965006&4294967295,D=L+(C<<17&4294967295|C>>>15),C=R+(x^D&(L^x))+P[15]+1236535329&4294967295,R=D+(C<<22&4294967295|C>>>10),C=x+(D^L&(R^D))+P[1]+4129170786&4294967295,x=R+(C<<5&4294967295|C>>>27),C=L+(R^D&(x^R))+P[6]+3225465664&4294967295,L=x+(C<<9&4294967295|C>>>23),C=D+(x^R&(L^x))+P[11]+643717713&4294967295,D=L+(C<<14&4294967295|C>>>18),C=R+(L^x&(D^L))+P[0]+3921069994&4294967295,R=D+(C<<20&4294967295|C>>>12),C=x+(D^L&(R^D))+P[5]+3593408605&4294967295,x=R+(C<<5&4294967295|C>>>27),C=L+(R^D&(x^R))+P[10]+38016083&4294967295,L=x+(C<<9&4294967295|C>>>23),C=D+(x^R&(L^x))+P[15]+3634488961&4294967295,D=L+(C<<14&4294967295|C>>>18),C=R+(L^x&(D^L))+P[4]+3889429448&4294967295,R=D+(C<<20&4294967295|C>>>12),C=x+(D^L&(R^D))+P[9]+568446438&4294967295,x=R+(C<<5&4294967295|C>>>27),C=L+(R^D&(x^R))+P[14]+3275163606&4294967295,L=x+(C<<9&4294967295|C>>>23),C=D+(x^R&(L^x))+P[3]+4107603335&4294967295,D=L+(C<<14&4294967295|C>>>18),C=R+(L^x&(D^L))+P[8]+1163531501&4294967295,R=D+(C<<20&4294967295|C>>>12),C=x+(D^L&(R^D))+P[13]+2850285829&4294967295,x=R+(C<<5&4294967295|C>>>27),C=L+(R^D&(x^R))+P[2]+4243563512&4294967295,L=x+(C<<9&4294967295|C>>>23),C=D+(x^R&(L^x))+P[7]+1735328473&4294967295,D=L+(C<<14&4294967295|C>>>18),C=R+(L^x&(D^L))+P[12]+2368359562&4294967295,R=D+(C<<20&4294967295|C>>>12),C=x+(R^D^L)+P[5]+4294588738&4294967295,x=R+(C<<4&4294967295|C>>>28),C=L+(x^R^D)+P[8]+2272392833&4294967295,L=x+(C<<11&4294967295|C>>>21),C=D+(L^x^R)+P[11]+1839030562&4294967295,D=L+(C<<16&4294967295|C>>>16),C=R+(D^L^x)+P[14]+4259657740&4294967295,R=D+(C<<23&4294967295|C>>>9),C=x+(R^D^L)+P[1]+2763975236&4294967295,x=R+(C<<4&4294967295|C>>>28),C=L+(x^R^D)+P[4]+1272893353&4294967295,L=x+(C<<11&4294967295|C>>>21),C=D+(L^x^R)+P[7]+4139469664&4294967295,D=L+(C<<16&4294967295|C>>>16),C=R+(D^L^x)+P[10]+3200236656&4294967295,R=D+(C<<23&4294967295|C>>>9),C=x+(R^D^L)+P[13]+681279174&4294967295,x=R+(C<<4&4294967295|C>>>28),C=L+(x^R^D)+P[0]+3936430074&4294967295,L=x+(C<<11&4294967295|C>>>21),C=D+(L^x^R)+P[3]+3572445317&4294967295,D=L+(C<<16&4294967295|C>>>16),C=R+(D^L^x)+P[6]+76029189&4294967295,R=D+(C<<23&4294967295|C>>>9),C=x+(R^D^L)+P[9]+3654602809&4294967295,x=R+(C<<4&4294967295|C>>>28),C=L+(x^R^D)+P[12]+3873151461&4294967295,L=x+(C<<11&4294967295|C>>>21),C=D+(L^x^R)+P[15]+530742520&4294967295,D=L+(C<<16&4294967295|C>>>16),C=R+(D^L^x)+P[2]+3299628645&4294967295,R=D+(C<<23&4294967295|C>>>9),C=x+(D^(R|~L))+P[0]+4096336452&4294967295,x=R+(C<<6&4294967295|C>>>26),C=L+(R^(x|~D))+P[7]+1126891415&4294967295,L=x+(C<<10&4294967295|C>>>22),C=D+(x^(L|~R))+P[14]+2878612391&4294967295,D=L+(C<<15&4294967295|C>>>17),C=R+(L^(D|~x))+P[5]+4237533241&4294967295,R=D+(C<<21&4294967295|C>>>11),C=x+(D^(R|~L))+P[12]+1700485571&4294967295,x=R+(C<<6&4294967295|C>>>26),C=L+(R^(x|~D))+P[3]+2399980690&4294967295,L=x+(C<<10&4294967295|C>>>22),C=D+(x^(L|~R))+P[10]+4293915773&4294967295,D=L+(C<<15&4294967295|C>>>17),C=R+(L^(D|~x))+P[1]+2240044497&4294967295,R=D+(C<<21&4294967295|C>>>11),C=x+(D^(R|~L))+P[8]+1873313359&4294967295,x=R+(C<<6&4294967295|C>>>26),C=L+(R^(x|~D))+P[15]+4264355552&4294967295,L=x+(C<<10&4294967295|C>>>22),C=D+(x^(L|~R))+P[6]+2734768916&4294967295,D=L+(C<<15&4294967295|C>>>17),C=R+(L^(D|~x))+P[13]+1309151649&4294967295,R=D+(C<<21&4294967295|C>>>11),C=x+(D^(R|~L))+P[4]+4149444226&4294967295,x=R+(C<<6&4294967295|C>>>26),C=L+(R^(x|~D))+P[11]+3174756917&4294967295,L=x+(C<<10&4294967295|C>>>22),C=D+(x^(L|~R))+P[2]+718787259&4294967295,D=L+(C<<15&4294967295|C>>>17),C=R+(L^(D|~x))+P[9]+3951481745&4294967295,k.g[0]=k.g[0]+x&4294967295,k.g[1]=k.g[1]+(D+(C<<21&4294967295|C>>>11))&4294967295,k.g[2]=k.g[2]+D&4294967295,k.g[3]=k.g[3]+L&4294967295}r.prototype.u=function(k,x){x===void 0&&(x=k.length);for(var R=x-this.blockSize,P=this.B,D=this.h,L=0;L<x;){if(D==0)for(;L<=R;)o(this,k,L),L+=this.blockSize;if(typeof k=="string"){for(;L<x;)if(P[D++]=k.charCodeAt(L++),D==this.blockSize){o(this,P),D=0;break}}else for(;L<x;)if(P[D++]=k[L++],D==this.blockSize){o(this,P),D=0;break}}this.h=D,this.o+=x},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var x=1;x<k.length-8;++x)k[x]=0;var R=8*this.o;for(x=k.length-8;x<k.length;++x)k[x]=R&255,R/=256;for(this.u(k),k=Array(16),x=R=0;4>x;++x)for(var P=0;32>P;P+=8)k[R++]=this.g[x]>>>P&255;return k};function a(k,x){var R=d;return Object.prototype.hasOwnProperty.call(R,k)?R[k]:R[k]=x(k)}function u(k,x){this.h=x;for(var R=[],P=!0,D=k.length-1;0<=D;D--){var L=k[D]|0;P&&L==x||(R[D]=L,P=!1)}this.g=R}var d={};function p(k){return-128<=k&&128>k?a(k,function(x){return new u([x|0],0>x?-1:0)}):new u([k|0],0>k?-1:0)}function m(k){if(isNaN(k)||!isFinite(k))return w;if(0>k)return b(m(-k));for(var x=[],R=1,P=0;k>=R;P++)x[P]=k/R|0,R*=4294967296;return new u(x,0)}function _(k,x){if(k.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(k.charAt(0)=="-")return b(_(k.substring(1),x));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=m(Math.pow(x,8)),P=w,D=0;D<k.length;D+=8){var L=Math.min(8,k.length-D),C=parseInt(k.substring(D,D+L),x);8>L?(L=m(Math.pow(x,L)),P=P.j(L).add(m(C))):(P=P.j(R),P=P.add(m(C)))}return P}var w=p(0),E=p(1),A=p(16777216);n=u.prototype,n.m=function(){if(N(this))return-b(this).m();for(var k=0,x=1,R=0;R<this.g.length;R++){var P=this.i(R);k+=(0<=P?P:4294967296+P)*x,x*=4294967296}return k},n.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(V(this))return"0";if(N(this))return"-"+b(this).toString(k);for(var x=m(Math.pow(k,6)),R=this,P="";;){var D=G(R,x).g;R=Q(R,D.j(x));var L=((0<R.g.length?R.g[0]:R.h)>>>0).toString(k);if(R=D,V(R))return L+P;for(;6>L.length;)L="0"+L;P=L+P}},n.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function V(k){if(k.h!=0)return!1;for(var x=0;x<k.g.length;x++)if(k.g[x]!=0)return!1;return!0}function N(k){return k.h==-1}n.l=function(k){return k=Q(this,k),N(k)?-1:V(k)?0:1};function b(k){for(var x=k.g.length,R=[],P=0;P<x;P++)R[P]=~k.g[P];return new u(R,~k.h).add(E)}n.abs=function(){return N(this)?b(this):this},n.add=function(k){for(var x=Math.max(this.g.length,k.g.length),R=[],P=0,D=0;D<=x;D++){var L=P+(this.i(D)&65535)+(k.i(D)&65535),C=(L>>>16)+(this.i(D)>>>16)+(k.i(D)>>>16);P=C>>>16,L&=65535,C&=65535,R[D]=C<<16|L}return new u(R,R[R.length-1]&-2147483648?-1:0)};function Q(k,x){return k.add(b(x))}n.j=function(k){if(V(this)||V(k))return w;if(N(this))return N(k)?b(this).j(b(k)):b(b(this).j(k));if(N(k))return b(this.j(b(k)));if(0>this.l(A)&&0>k.l(A))return m(this.m()*k.m());for(var x=this.g.length+k.g.length,R=[],P=0;P<2*x;P++)R[P]=0;for(P=0;P<this.g.length;P++)for(var D=0;D<k.g.length;D++){var L=this.i(P)>>>16,C=this.i(P)&65535,Qe=k.i(D)>>>16,pt=k.i(D)&65535;R[2*P+2*D]+=C*pt,B(R,2*P+2*D),R[2*P+2*D+1]+=L*pt,B(R,2*P+2*D+1),R[2*P+2*D+1]+=C*Qe,B(R,2*P+2*D+1),R[2*P+2*D+2]+=L*Qe,B(R,2*P+2*D+2)}for(P=0;P<x;P++)R[P]=R[2*P+1]<<16|R[2*P];for(P=x;P<2*x;P++)R[P]=0;return new u(R,0)};function B(k,x){for(;(k[x]&65535)!=k[x];)k[x+1]+=k[x]>>>16,k[x]&=65535,x++}function q(k,x){this.g=k,this.h=x}function G(k,x){if(V(x))throw Error("division by zero");if(V(k))return new q(w,w);if(N(k))return x=G(b(k),x),new q(b(x.g),b(x.h));if(N(x))return x=G(k,b(x)),new q(b(x.g),x.h);if(30<k.g.length){if(N(k)||N(x))throw Error("slowDivide_ only works with positive integers.");for(var R=E,P=x;0>=P.l(k);)R=le(R),P=le(P);var D=re(R,1),L=re(P,1);for(P=re(P,2),R=re(R,2);!V(P);){var C=L.add(P);0>=C.l(k)&&(D=D.add(R),L=C),P=re(P,1),R=re(R,1)}return x=Q(k,D.j(x)),new q(D,x)}for(D=w;0<=k.l(x);){for(R=Math.max(1,Math.floor(k.m()/x.m())),P=Math.ceil(Math.log(R)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),L=m(R),C=L.j(x);N(C)||0<C.l(k);)R-=P,L=m(R),C=L.j(x);V(L)&&(L=E),D=D.add(L),k=Q(k,C)}return new q(D,k)}n.A=function(k){return G(this,k).h},n.and=function(k){for(var x=Math.max(this.g.length,k.g.length),R=[],P=0;P<x;P++)R[P]=this.i(P)&k.i(P);return new u(R,this.h&k.h)},n.or=function(k){for(var x=Math.max(this.g.length,k.g.length),R=[],P=0;P<x;P++)R[P]=this.i(P)|k.i(P);return new u(R,this.h|k.h)},n.xor=function(k){for(var x=Math.max(this.g.length,k.g.length),R=[],P=0;P<x;P++)R[P]=this.i(P)^k.i(P);return new u(R,this.h^k.h)};function le(k){for(var x=k.g.length+1,R=[],P=0;P<x;P++)R[P]=k.i(P)<<1|k.i(P-1)>>>31;return new u(R,k.h)}function re(k,x){var R=x>>5;x%=32;for(var P=k.g.length-R,D=[],L=0;L<P;L++)D[L]=0<x?k.i(L+R)>>>x|k.i(L+R+1)<<32-x:k.i(L+R);return new u(D,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,q0=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=_,Hs=u}).apply(typeof Cv<"u"?Cv:typeof self<"u"?self:typeof window<"u"?window:{});var Fc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var W0,Rl,G0,th,Rp,Q0,K0,X0;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,v){return c==Array.prototype||c==Object.prototype||(c[g]=v.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fc=="object"&&Fc];for(var g=0;g<c.length;++g){var v=c[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function o(c,g){if(g)e:{var v=r;c=c.split(".");for(var T=0;T<c.length-1;T++){var $=c[T];if(!($ in v))break e;v=v[$]}c=c[c.length-1],T=v[c],g=g(T),g!=T&&g!=null&&e(v,c,{configurable:!0,writable:!0,value:g})}}function a(c,g){c instanceof String&&(c+="");var v=0,T=!1,$={next:function(){if(!T&&v<c.length){var W=v++;return{value:g(W,c[W]),done:!1}}return T=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}o("Array.prototype.values",function(c){return c||function(){return a(this,function(g,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function p(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function m(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function _(c,g,v){return c.call.apply(c.bind,arguments)}function w(c,g,v){if(!c)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,T),c.apply(g,$)}}return function(){return c.apply(g,arguments)}}function E(c,g,v){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:w,E.apply(null,arguments)}function A(c,g){var v=Array.prototype.slice.call(arguments,1);return function(){var T=v.slice();return T.push.apply(T,arguments),c.apply(this,T)}}function V(c,g){function v(){}v.prototype=g.prototype,c.aa=g.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(T,$,W){for(var se=Array(arguments.length-2),We=2;We<arguments.length;We++)se[We-2]=arguments[We];return g.prototype[$].apply(T,se)}}function N(c){const g=c.length;if(0<g){const v=Array(g);for(let T=0;T<g;T++)v[T]=c[T];return v}return[]}function b(c,g){for(let v=1;v<arguments.length;v++){const T=arguments[v];if(p(T)){const $=c.length||0,W=T.length||0;c.length=$+W;for(let se=0;se<W;se++)c[$+se]=T[se]}else c.push(T)}}class Q{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function B(c){return/^[\s\xa0]*$/.test(c)}function q(){var c=d.navigator;return c&&(c=c.userAgent)?c:""}function G(c){return G[" "](c),c}G[" "]=function(){};var le=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function re(c,g,v){for(const T in c)g.call(v,c[T],T,c)}function k(c,g){for(const v in c)g.call(void 0,c[v],v,c)}function x(c){const g={};for(const v in c)g[v]=c[v];return g}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(c,g){let v,T;for(let $=1;$<arguments.length;$++){T=arguments[$];for(v in T)c[v]=T[v];for(let W=0;W<R.length;W++)v=R[W],Object.prototype.hasOwnProperty.call(T,v)&&(c[v]=T[v])}}function D(c){var g=1;c=c.split(":");const v=[];for(;0<g&&c.length;)v.push(c.shift()),g--;return c.length&&v.push(c.join(":")),v}function L(c){d.setTimeout(()=>{throw c},0)}function C(){var c=me;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class Qe{constructor(){this.h=this.g=null}add(g,v){const T=pt.get();T.set(g,v),this.h?this.h.next=T:this.g=T,this.h=T}}var pt=new Q(()=>new gt,c=>c.reset());class gt{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Be,ie=!1,me=new Qe,ae=()=>{const c=d.Promise.resolve(void 0);Be=()=>{c.then(F)}};var F=()=>{for(var c;c=C();){try{c.h.call(c.g)}catch(v){L(v)}var g=pt;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}ie=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ge(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}ge.prototype.h=function(){this.defaultPrevented=!0};var Ce=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};d.addEventListener("test",v,g),d.removeEventListener("test",v,g)}catch{}return c})();function Pe(c,g){if(ge.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,T=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(le){e:{try{G(g.nodeName);var $=!0;break e}catch{}$=!1}$||(g=null)}}else v=="mouseover"?g=c.fromElement:v=="mouseout"&&(g=c.toElement);this.relatedTarget=g,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Oe[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Pe.aa.h.call(this)}}V(Pe,ge);var Oe={2:"touch",3:"pen",4:"mouse"};Pe.prototype.h=function(){Pe.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ue="closure_listenable_"+(1e6*Math.random()|0),ze=0;function Ye(c,g,v,T,$){this.listener=c,this.proxy=null,this.src=g,this.type=v,this.capture=!!T,this.ha=$,this.key=++ze,this.da=this.fa=!1}function Ot(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Or(c){this.src=c,this.g={},this.h=0}Or.prototype.add=function(c,g,v,T,$){var W=c.toString();c=this.g[W],c||(c=this.g[W]=[],this.h++);var se=hs(c,g,T,$);return-1<se?(g=c[se],v||(g.fa=!1)):(g=new Ye(g,this.src,W,!!T,$),g.fa=v,c.push(g)),g};function Ji(c,g){var v=g.type;if(v in c.g){var T=c.g[v],$=Array.prototype.indexOf.call(T,g,void 0),W;(W=0<=$)&&Array.prototype.splice.call(T,$,1),W&&(Ot(g),c.g[v].length==0&&(delete c.g[v],c.h--))}}function hs(c,g,v,T){for(var $=0;$<c.length;++$){var W=c[$];if(!W.da&&W.listener==g&&W.capture==!!v&&W.ha==T)return $}return-1}var si="closure_lm_"+(1e6*Math.random()|0),Yi={};function Ra(c,g,v,T,$){if(Array.isArray(g)){for(var W=0;W<g.length;W++)Ra(c,g[W],v,T,$);return null}return v=Ca(v),c&&c[Ue]?c.K(g,v,m(T)?!!T.capture:!1,$):Ia(c,g,v,!1,T,$)}function Ia(c,g,v,T,$,W){if(!g)throw Error("Invalid event type");var se=m($)?!!$.capture:!!$,We=eo(c);if(We||(c[si]=We=new Or(c)),v=We.add(g,v,T,se,W),v.proxy)return v;if(T=Eu(),v.proxy=T,T.src=c,T.listener=v,c.addEventListener)Ce||($=se),$===void 0&&($=!1),c.addEventListener(g.toString(),T,$);else if(c.attachEvent)c.attachEvent(Mr(g.toString()),T);else if(c.addListener&&c.removeListener)c.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Eu(){function c(v){return g.call(c.src,c.listener,v)}const g=ka;return c}function Zi(c,g,v,T,$){if(Array.isArray(g))for(var W=0;W<g.length;W++)Zi(c,g[W],v,T,$);else T=m(T)?!!T.capture:!!T,v=Ca(v),c&&c[Ue]?(c=c.i,g=String(g).toString(),g in c.g&&(W=c.g[g],v=hs(W,v,T,$),-1<v&&(Ot(W[v]),Array.prototype.splice.call(W,v,1),W.length==0&&(delete c.g[g],c.h--)))):c&&(c=eo(c))&&(g=c.g[g.toString()],c=-1,g&&(c=hs(g,v,T,$)),(v=-1<c?g[c]:null)&&Lr(v))}function Lr(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[Ue])Ji(g.i,c);else{var v=c.type,T=c.proxy;g.removeEventListener?g.removeEventListener(v,T,c.capture):g.detachEvent?g.detachEvent(Mr(v),T):g.addListener&&g.removeListener&&g.removeListener(T),(v=eo(g))?(Ji(v,c),v.h==0&&(v.src=null,g[si]=null)):Ot(c)}}}function Mr(c){return c in Yi?Yi[c]:Yi[c]="on"+c}function ka(c,g){if(c.da)c=!0;else{g=new Pe(g,this);var v=c.listener,T=c.ha||c.src;c.fa&&Lr(c),c=v.call(T,g)}return c}function eo(c){return c=c[si],c instanceof Or?c:null}var to="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ca(c){return typeof c=="function"?c:(c[to]||(c[to]=function(g){return c.handleEvent(g)}),c[to])}function Rt(){J.call(this),this.i=new Or(this),this.M=this,this.F=null}V(Rt,J),Rt.prototype[Ue]=!0,Rt.prototype.removeEventListener=function(c,g,v,T){Zi(this,c,g,v,T)};function It(c,g){var v,T=c.F;if(T)for(v=[];T;T=T.F)v.push(T);if(c=c.M,T=g.type||g,typeof g=="string")g=new ge(g,c);else if(g instanceof ge)g.target=g.target||c;else{var $=g;g=new ge(T,c),P(g,$)}if($=!0,v)for(var W=v.length-1;0<=W;W--){var se=g.g=v[W];$=Fr(se,T,!0,g)&&$}if(se=g.g=c,$=Fr(se,T,!0,g)&&$,$=Fr(se,T,!1,g)&&$,v)for(W=0;W<v.length;W++)se=g.g=v[W],$=Fr(se,T,!1,g)&&$}Rt.prototype.N=function(){if(Rt.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var v=c.g[g],T=0;T<v.length;T++)Ot(v[T]);delete c.g[g],c.h--}}this.F=null},Rt.prototype.K=function(c,g,v,T){return this.i.add(String(c),g,!1,v,T)},Rt.prototype.L=function(c,g,v,T){return this.i.add(String(c),g,!0,v,T)};function Fr(c,g,v,T){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var $=!0,W=0;W<g.length;++W){var se=g[W];if(se&&!se.da&&se.capture==v){var We=se.listener,kt=se.ha||se.src;se.fa&&Ji(c.i,se),$=We.call(kt,T)!==!1&&$}}return $&&!T.defaultPrevented}function ba(c,g,v){if(typeof c=="function")v&&(c=E(c,v));else if(c&&typeof c.handleEvent=="function")c=E(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:d.setTimeout(c,g||0)}function ds(c){c.g=ba(()=>{c.g=null,c.i&&(c.i=!1,ds(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class ii extends J{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:ds(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oi(c){J.call(this),this.h=c,this.g={}}V(oi,J);var Pa=[];function Na(c){re(c.g,function(g,v){this.g.hasOwnProperty(v)&&Lr(g)},c),c.g={}}oi.prototype.N=function(){oi.aa.N.call(this),Na(this)},oi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Da=d.JSON.stringify,Va=d.JSON.parse,Oa=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function ai(){}ai.prototype.h=null;function no(c){return c.h||(c.h=c.i())}function ro(){}var Pn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dr(){ge.call(this,"d")}V(dr,ge);function so(){ge.call(this,"c")}V(so,ge);var fr={},La=null;function li(){return La=La||new Rt}fr.La="serverreachability";function Ma(c){ge.call(this,fr.La,c)}V(Ma,ge);function $r(c){const g=li();It(g,new Ma(g))}fr.STAT_EVENT="statevent";function Fa(c,g){ge.call(this,fr.STAT_EVENT,c),this.stat=g}V(Fa,ge);function yt(c){const g=li();It(g,new Fa(g,c))}fr.Ma="timingevent";function io(c,g){ge.call(this,fr.Ma,c),this.size=g}V(io,ge);function qn(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},g)}function ui(){this.g=!0}ui.prototype.xa=function(){this.g=!1};function ci(c,g,v,T,$,W){c.info(function(){if(c.g)if(W)for(var se="",We=W.split("&"),kt=0;kt<We.length;kt++){var Le=We[kt].split("=");if(1<Le.length){var Lt=Le[0];Le=Le[1];var wt=Lt.split("_");se=2<=wt.length&&wt[1]=="type"?se+(Lt+"="+Le+"&"):se+(Lt+"=redacted&")}}else se=null;else se=W;return"XMLHTTP REQ ("+T+") [attempt "+$+"]: "+g+`
`+v+`
`+se})}function oo(c,g,v,T,$,W,se){c.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+$+"]: "+g+`
`+v+`
`+W+" "+se})}function Wn(c,g,v,T){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+pd(c,v)+(T?" "+T:"")})}function $a(c,g){c.info(function(){return"TIMEOUT: "+g})}ui.prototype.info=function(){};function pd(c,g){if(!c.g)return g;if(!g)return null;try{var v=JSON.parse(g);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var T=v[c];if(!(2>T.length)){var $=T[1];if(Array.isArray($)&&!(1>$.length)){var W=$[0];if(W!="noop"&&W!="stop"&&W!="close")for(var se=1;se<$.length;se++)$[se]=""}}}}return Da(v)}catch{return g}}var ao={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Su={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gn;function hi(){}V(hi,ai),hi.prototype.g=function(){return new XMLHttpRequest},hi.prototype.i=function(){return{}},Gn=new hi;function Qn(c,g,v,T){this.j=c,this.i=g,this.l=v,this.R=T||1,this.U=new oi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Tu}function Tu(){this.i=null,this.g="",this.h=!1}var ja={},lo={};function uo(c,g,v){c.L=1,c.v=ys(Sn(g)),c.m=v,c.P=!0,Ba(c,null)}function Ba(c,g){c.F=Date.now(),Ze(c),c.A=Sn(c.v);var v=c.A,T=c.R;Array.isArray(T)||(T=[String(T)]),vs(v.i,"t",T),c.C=0,v=c.j.J,c.h=new Tu,c.g=Bu(c.j,v?g:null,!c.m),0<c.O&&(c.M=new ii(E(c.Y,c,c.g),c.O)),g=c.U,v=c.g,T=c.ca;var $="readystatechange";Array.isArray($)||($&&(Pa[0]=$.toString()),$=Pa);for(var W=0;W<$.length;W++){var se=Ra(v,$[W],T||g.handleEvent,!1,g.h||g);if(!se)break;g.g[se.key]=se}g=c.H?x(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),$r(),ci(c.i,c.u,c.A,c.l,c.R,c.m)}Qn.prototype.ca=function(c){c=c.target;const g=this.M;g&&dn(c)==3?g.j():this.Y(c)},Qn.prototype.Y=function(c){try{if(c==this.g)e:{const wt=dn(this.g);var g=this.g.Ba();const Vn=this.g.Z();if(!(3>wt)&&(wt!=3||this.g&&(this.h.h||this.g.oa()||Ga(this.g)))){this.J||wt!=4||g==7||(g==8||0>=Vn?$r(3):$r(2)),di(this);var v=this.g.Z();this.X=v;t:if(xu(this)){var T=Ga(this.g);c="";var $=T.length,W=dn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Nn(this),fs(this);var se="";break t}this.h.i=new d.TextDecoder}for(g=0;g<$;g++)this.h.h=!0,c+=this.h.i.decode(T[g],{stream:!(W&&g==$-1)});T.length=0,this.h.g+=c,this.C=0,se=this.h.g}else se=this.g.oa();if(this.o=v==200,oo(this.i,this.u,this.A,this.l,this.R,wt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var We,kt=this.g;if((We=kt.g?kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(We)){var Le=We;break t}}Le=null}if(v=Le)Wn(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ua(this,v);else{this.o=!1,this.s=3,yt(12),Nn(this),fs(this);break e}}if(this.P){v=!0;let xn;for(;!this.J&&this.C<se.length;)if(xn=md(this,se),xn==lo){wt==4&&(this.s=4,yt(14),v=!1),Wn(this.i,this.l,null,"[Incomplete Response]");break}else if(xn==ja){this.s=4,yt(15),Wn(this.i,this.l,se,"[Invalid Chunk]"),v=!1;break}else Wn(this.i,this.l,xn,null),Ua(this,xn);if(xu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||se.length!=0||this.h.h||(this.s=1,yt(16),v=!1),this.o=this.o&&v,!v)Wn(this.i,this.l,se,"[Invalid Chunked Response]"),Nn(this),fs(this);else if(0<se.length&&!this.W){this.W=!0;var Lt=this.j;Lt.g==this&&Lt.ba&&!Lt.M&&(Lt.j.info("Great, no buffering proxy detected. Bytes received: "+se.length),Ka(Lt),Lt.M=!0,yt(11))}}else Wn(this.i,this.l,se,null),Ua(this,se);wt==4&&Nn(this),this.o&&!this.J&&(wt==4?Eo(this.j,this):(this.o=!1,Ze(this)))}else go(this.g),v==400&&0<se.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),Nn(this),fs(this)}}}catch{}finally{}};function xu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function md(c,g){var v=c.C,T=g.indexOf(`
`,v);return T==-1?lo:(v=Number(g.substring(v,T)),isNaN(v)?ja:(T+=1,T+v>g.length?lo:(g=g.slice(T,T+v),c.C=T+v,g)))}Qn.prototype.cancel=function(){this.J=!0,Nn(this)};function Ze(c){c.S=Date.now()+c.I,Au(c,c.I)}function Au(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=qn(E(c.ba,c),g)}function di(c){c.B&&(d.clearTimeout(c.B),c.B=null)}Qn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?($a(this.i,this.A),this.L!=2&&($r(),yt(17)),Nn(this),this.s=2,fs(this)):Au(this,this.S-c)};function fs(c){c.j.G==0||c.J||Eo(c.j,c)}function Nn(c){di(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,Na(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function Ua(c,g){try{var v=c.j;if(v.G!=0&&(v.g==c||on(v.h,c))){if(!c.K&&on(v.h,c)&&v.G==3){try{var T=v.Da.g.parse(g)}catch{T=null}if(Array.isArray(T)&&T.length==3){var $=T;if($[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)wo(v),Zn(v);else break e;vo(v),yt(18)}}else v.za=$[1],0<v.za-v.T&&37500>$[2]&&v.F&&v.v==0&&!v.C&&(v.C=qn(E(v.Za,v),6e3));if(1>=Iu(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Hr(v,11)}else if((c.K||v.g==c)&&wo(v),!B(g))for($=v.Da.g.parse(g),g=0;g<$.length;g++){let Le=$[g];if(v.T=Le[0],Le=Le[1],v.G==2)if(Le[0]=="c"){v.K=Le[1],v.ia=Le[2];const Lt=Le[3];Lt!=null&&(v.la=Lt,v.j.info("VER="+v.la));const wt=Le[4];wt!=null&&(v.Aa=wt,v.j.info("SVER="+v.Aa));const Vn=Le[5];Vn!=null&&typeof Vn=="number"&&0<Vn&&(T=1.5*Vn,v.L=T,v.j.info("backChannelRequestTimeoutMs_="+T)),T=v;const xn=c.g;if(xn){const vi=xn.g?xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vi){var W=T.h;W.g||vi.indexOf("spdy")==-1&&vi.indexOf("quic")==-1&&vi.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(za(W,W.h),W.h=null))}if(T.D){const To=xn.g?xn.g.getResponseHeader("X-HTTP-Session-Id"):null;To&&(T.ya=To,Xe(T.I,T.D,To))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),T=v;var se=c;if(T.qa=ju(T,T.J?T.ia:null,T.W),se.K){ku(T.h,se);var We=se,kt=T.L;kt&&(We.I=kt),We.B&&(di(We),Ze(We)),T.g=se}else _i(T);0<v.i.length&&yr(v)}else Le[0]!="stop"&&Le[0]!="close"||Hr(v,7);else v.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?Hr(v,7):zt(v):Le[0]!="noop"&&v.l&&v.l.ta(Le),v.v=0)}}$r(4)}catch{}}var Ru=class{constructor(c,g){this.g=c,this.map=g}};function fi(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function En(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Iu(c){return c.h?1:c.g?c.g.size:0}function on(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function za(c,g){c.g?c.g.add(g):c.h=g}function ku(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}fi.prototype.cancel=function(){if(this.i=Cu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Cu(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const v of c.g.values())g=g.concat(v.D);return g}return N(c.i)}function co(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var g=[],v=c.length,T=0;T<v;T++)g.push(c[T]);return g}g=[],v=0;for(T in c)g[v++]=c[T];return g}function ho(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var g=[];c=c.length;for(var v=0;v<c;v++)g.push(v);return g}g=[],v=0;for(const T in c)g[v++]=T;return g}}}function ps(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var v=ho(c),T=co(c),$=T.length,W=0;W<$;W++)g.call(void 0,T[W],v&&v[W],c)}var pi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gd(c,g){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var T=c[v].indexOf("="),$=null;if(0<=T){var W=c[v].substring(0,T);$=c[v].substring(T+1)}else W=c[v];g(W,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function jr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof jr){this.h=c.h,mi(this,c.j),this.o=c.o,this.g=c.g,ms(this,c.s),this.l=c.l;var g=c.i,v=new pr;v.i=g.i,g.g&&(v.g=new Map(g.g),v.h=g.h),gs(this,v),this.m=c.m}else c&&(g=String(c).match(pi))?(this.h=!1,mi(this,g[1]||"",!0),this.o=Ve(g[2]||""),this.g=Ve(g[3]||"",!0),ms(this,g[4]),this.l=Ve(g[5]||"",!0),gs(this,g[6]||"",!0),this.m=Ve(g[7]||"")):(this.h=!1,this.i=new pr(null,this.h))}jr.prototype.toString=function(){var c=[],g=this.j;g&&c.push(_s(g,fo,!0),":");var v=this.g;return(v||g=="file")&&(c.push("//"),(g=this.o)&&c.push(_s(g,fo,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(_s(v,v.charAt(0)=="/"?Nu:Pu,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",_s(v,Ha)),c.join("")};function Sn(c){return new jr(c)}function mi(c,g,v){c.j=v?Ve(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function ms(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function gs(c,g,v){g instanceof pr?(c.i=g,mr(c.i,c.h)):(v||(g=_s(g,Du)),c.i=new pr(g,c.h))}function Xe(c,g,v){c.i.set(g,v)}function ys(c){return Xe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ve(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function _s(c,g,v){return typeof c=="string"?(c=encodeURI(c).replace(g,bu),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function bu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var fo=/[#\/\?@]/g,Pu=/[#\?:]/g,Nu=/[#\?]/g,Du=/[#\?@]/g,Ha=/#/g;function pr(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function Ut(c){c.g||(c.g=new Map,c.h=0,c.i&&gd(c.i,function(g,v){c.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}n=pr.prototype,n.add=function(c,g){Ut(this),this.i=null,c=Dn(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(g),this.h+=1,this};function Kn(c,g){Ut(c),g=Dn(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function Xn(c,g){return Ut(c),g=Dn(c,g),c.g.has(g)}n.forEach=function(c,g){Ut(this),this.g.forEach(function(v,T){v.forEach(function($){c.call(g,$,T,this)},this)},this)},n.na=function(){Ut(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),v=[];for(let T=0;T<g.length;T++){const $=c[T];for(let W=0;W<$.length;W++)v.push(g[T])}return v},n.V=function(c){Ut(this);let g=[];if(typeof c=="string")Xn(this,c)&&(g=g.concat(this.g.get(Dn(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)g=g.concat(c[v])}return g},n.set=function(c,g){return Ut(this),this.i=null,c=Dn(this,c),Xn(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},n.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function vs(c,g,v){Kn(c,g),0<v.length&&(c.i=null,c.g.set(Dn(c,g),N(v)),c.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var v=0;v<g.length;v++){var T=g[v];const W=encodeURIComponent(String(T)),se=this.V(T);for(T=0;T<se.length;T++){var $=W;se[T]!==""&&($+="="+encodeURIComponent(String(se[T]))),c.push($)}}return this.i=c.join("&")};function Dn(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function mr(c,g){g&&!c.j&&(Ut(c),c.i=null,c.g.forEach(function(v,T){var $=T.toLowerCase();T!=$&&(Kn(this,T),vs(this,$,v))},c)),c.j=g}function yd(c,g){const v=new ui;if(d.Image){const T=new Image;T.onload=A(hn,v,"TestLoadImage: loaded",!0,g,T),T.onerror=A(hn,v,"TestLoadImage: error",!1,g,T),T.onabort=A(hn,v,"TestLoadImage: abort",!1,g,T),T.ontimeout=A(hn,v,"TestLoadImage: timeout",!1,g,T),d.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=c}else g(!1)}function Vu(c,g){const v=new ui,T=new AbortController,$=setTimeout(()=>{T.abort(),hn(v,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:T.signal}).then(W=>{clearTimeout($),W.ok?hn(v,"TestPingServer: ok",!0,g):hn(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout($),hn(v,"TestPingServer: error",!1,g)})}function hn(c,g,v,T,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),T(v)}catch{}}function _d(){this.g=new Oa}function Ou(c,g,v){const T=v||"";try{ps(c,function($,W){let se=$;m($)&&(se=Da($)),g.push(T+W+"="+encodeURIComponent(se))})}catch($){throw g.push(T+"type="+encodeURIComponent("_badmap")),$}}function Br(c){this.l=c.Ub||null,this.j=c.eb||!1}V(Br,ai),Br.prototype.g=function(){return new gi(this.l,this.j)},Br.prototype.i=(function(c){return function(){return c}})({});function gi(c,g){Rt.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(gi,Rt),n=gi.prototype,n.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,Yn(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||d).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Jn(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Yn(this)),this.g&&(this.readyState=3,Yn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Lu(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Lu(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?Jn(this):Yn(this),this.readyState==3&&Lu(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Jn(this))},n.Qa=function(c){this.g&&(this.response=c,Jn(this))},n.ga=function(){this.g&&Jn(this)};function Jn(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Yn(c)}n.setRequestHeader=function(c,g){this.u.append(c,g)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=g.next();return c.join(`\r
`)};function Yn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(gi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Ur(c){let g="";return re(c,function(v,T){g+=T,g+=":",g+=v,g+=`\r
`}),g}function ws(c,g,v){e:{for(T in v){var T=!1;break e}T=!0}T||(v=Ur(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):Xe(c,g,v))}function ot(c){Rt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(ot,Rt);var vd=/^https?$/i,qa=["POST","PUT"];n=ot.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,g,v,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gn.g(),this.v=this.o?no(this.o):no(Gn),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(W){yi(this,W);return}if(c=v||"",v=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var $ in T)v.set($,T[$]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const W of T.keys())v.set(W,T.get(W));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(v.keys()).find(W=>W.toLowerCase()=="content-type"),$=d.FormData&&c instanceof d.FormData,!(0<=Array.prototype.indexOf.call(qa,g,void 0))||T||$||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,se]of v)this.g.setRequestHeader(W,se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{mo(this),this.u=!0,this.g.send(c),this.u=!1}catch(W){yi(this,W)}};function yi(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,po(c),Tn(c)}function po(c){c.A||(c.A=!0,It(c,"complete"),It(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,It(this,"complete"),It(this,"abort"),Tn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Tn(this,!0)),ot.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Wa(this):this.bb())},n.bb=function(){Wa(this)};function Wa(c){if(c.h&&typeof u<"u"&&(!c.v[1]||dn(c)!=4||c.Z()!=2)){if(c.u&&dn(c)==4)ba(c.Ea,0,c);else if(It(c,"readystatechange"),dn(c)==4){c.h=!1;try{const se=c.Z();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var T;if(T=se===0){var $=String(c.D).match(pi)[1]||null;!$&&d.self&&d.self.location&&($=d.self.location.protocol.slice(0,-1)),T=!vd.test($?$.toLowerCase():"")}v=T}if(v)It(c,"complete"),It(c,"success");else{c.m=6;try{var W=2<dn(c)?c.g.statusText:""}catch{W=""}c.l=W+" ["+c.Z()+"]",po(c)}}finally{Tn(c)}}}}function Tn(c,g){if(c.g){mo(c);const v=c.g,T=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||It(c,"ready");try{v.onreadystatechange=T}catch{}}}function mo(c){c.I&&(d.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function dn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<dn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),Va(g)}};function Ga(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function go(c){const g={};c=(c.g&&2<=dn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<c.length;T++){if(B(c[T]))continue;var v=D(c[T]);const $=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const W=g[$]||[];g[$]=W,W.push(v)}k(g,function(T){return T.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function gr(c,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||g}function Qa(c){this.Aa=0,this.i=[],this.j=new ui,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=gr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=gr("baseRetryDelayMs",5e3,c),this.cb=gr("retryDelaySeedMs",1e4,c),this.Wa=gr("forwardChannelMaxRetries",2,c),this.wa=gr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new fi(c&&c.concurrentRequestLimit),this.Da=new _d,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Qa.prototype,n.la=8,n.G=1,n.connect=function(c,g,v,T){yt(0),this.W=c,this.H=g||{},v&&T!==void 0&&(this.H.OSID=v,this.H.OAID=T),this.F=this.X,this.I=ju(this,null,this.W),yr(this)};function zt(c){if(yo(c),c.G==3){var g=c.U++,v=Sn(c.I);if(Xe(v,"SID",c.K),Xe(v,"RID",g),Xe(v,"TYPE","terminate"),zr(c,v),g=new Qn(c,c.j,g),g.L=2,g.v=ys(Sn(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(g.v.toString(),"")}catch{}!v&&d.Image&&(new Image().src=g.v,v=!0),v||(g.g=Bu(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Ze(g)}$u(c)}function Zn(c){c.g&&(Ka(c),c.g.cancel(),c.g=null)}function yo(c){Zn(c),c.u&&(d.clearTimeout(c.u),c.u=null),wo(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&d.clearTimeout(c.s),c.s=null)}function yr(c){if(!En(c.h)&&!c.s){c.s=!0;var g=c.Ga;Be||ae(),ie||(Be(),ie=!0),me.add(g,c),c.B=0}}function wd(c,g){return Iu(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=qn(E(c.Ga,c,g),Fu(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const $=new Qn(this,this.j,c);let W=this.o;if(this.S&&(W?(W=x(W),P(W,this.S)):W=this.S),this.m!==null||this.O||($.H=W,W=null),this.P)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var T=this.i[v];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(g+=T,4096<g){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=Es(this,$,g),v=Sn(this.I),Xe(v,"RID",c),Xe(v,"CVER",22),this.D&&Xe(v,"X-HTTP-Session-Id",this.D),zr(this,v),W&&(this.O?g="headers="+encodeURIComponent(String(Ur(W)))+"&"+g:this.m&&ws(v,this.m,W)),za(this.h,$),this.Ua&&Xe(v,"TYPE","init"),this.P?(Xe(v,"$req",g),Xe(v,"SID","null"),$.T=!0,uo($,v,null)):uo($,v,g),this.G=2}}else this.G==3&&(c?_o(this,c):this.i.length==0||En(this.h)||_o(this))};function _o(c,g){var v;g?v=g.l:v=c.U++;const T=Sn(c.I);Xe(T,"SID",c.K),Xe(T,"RID",v),Xe(T,"AID",c.T),zr(c,T),c.m&&c.o&&ws(T,c.m,c.o),v=new Qn(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),g&&(c.i=g.D.concat(c.i)),g=Es(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),za(c.h,v),uo(v,T,g)}function zr(c,g){c.H&&re(c.H,function(v,T){Xe(g,T,v)}),c.l&&ps({},function(v,T){Xe(g,T,v)})}function Es(c,g,v){v=Math.min(c.i.length,v);var T=c.l?E(c.l.Na,c.l,c):null;e:{var $=c.i;let W=-1;for(;;){const se=["count="+v];W==-1?0<v?(W=$[0].g,se.push("ofs="+W)):W=0:se.push("ofs="+W);let We=!0;for(let kt=0;kt<v;kt++){let Le=$[kt].g;const Lt=$[kt].map;if(Le-=W,0>Le)W=Math.max(0,$[kt].g-100),We=!1;else try{Ou(Lt,se,"req"+Le+"_")}catch{T&&T(Lt)}}if(We){T=se.join("&");break e}}}return c=c.i.splice(0,v),g.D=c,T}function _i(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;Be||ae(),ie||(Be(),ie=!0),me.add(g,c),c.v=0}}function vo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=qn(E(c.Fa,c),Fu(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,Mu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=qn(E(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),Zn(this),Mu(this))};function Ka(c){c.A!=null&&(d.clearTimeout(c.A),c.A=null)}function Mu(c){c.g=new Qn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=Sn(c.qa);Xe(g,"RID","rpc"),Xe(g,"SID",c.K),Xe(g,"AID",c.T),Xe(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&Xe(g,"TO",c.ja),Xe(g,"TYPE","xmlhttp"),zr(c,g),c.m&&c.o&&ws(g,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=ys(Sn(g)),v.m=null,v.P=!0,Ba(v,c)}n.Za=function(){this.C!=null&&(this.C=null,Zn(this),vo(this),yt(19))};function wo(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function Eo(c,g){var v=null;if(c.g==g){wo(c),Ka(c),c.g=null;var T=2}else if(on(c.h,g))v=g.D,ku(c.h,g),T=1;else return;if(c.G!=0){if(g.o)if(T==1){v=g.m?g.m.length:0,g=Date.now()-g.F;var $=c.B;T=li(),It(T,new io(T,v)),yr(c)}else _i(c);else if($=g.s,$==3||$==0&&0<g.X||!(T==1&&wd(c,g)||T==2&&vo(c)))switch(v&&0<v.length&&(g=c.h,g.i=g.i.concat(v)),$){case 1:Hr(c,5);break;case 4:Hr(c,10);break;case 3:Hr(c,6);break;default:Hr(c,2)}}}function Fu(c,g){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*g}function Hr(c,g){if(c.j.info("Error code "+g),g==2){var v=E(c.fb,c),T=c.Xa;const $=!T;T=new jr(T||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||mi(T,"https"),ys(T),$?yd(T.toString(),v):Vu(T.toString(),v)}else yt(2);c.G=0,c.l&&c.l.sa(g),$u(c),yo(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function $u(c){if(c.G=0,c.ka=[],c.l){const g=Cu(c.h);(g.length!=0||c.i.length!=0)&&(b(c.ka,g),b(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function ju(c,g,v){var T=v instanceof jr?Sn(v):new jr(v);if(T.g!="")g&&(T.g=g+"."+T.g),ms(T,T.s);else{var $=d.location;T=$.protocol,g=g?g+"."+$.hostname:$.hostname,$=+$.port;var W=new jr(null);T&&mi(W,T),g&&(W.g=g),$&&ms(W,$),v&&(W.l=v),T=W}return v=c.D,g=c.ya,v&&g&&Xe(T,v,g),Xe(T,"VER",c.la),zr(c,T),T}function Bu(c,g,v){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new ot(new Br({eb:v})):new ot(c.pa),g.Ha(c.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xa(){}n=Xa.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function So(){}So.prototype.g=function(c,g){return new an(c,g)};function an(c,g){Rt.call(this),this.g=new Qa(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!B(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!B(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new _r(this)}V(an,Rt),an.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){zt(this.g)},an.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=Da(c),c=v);g.i.push(new Ru(g.Ya++,c)),g.G==3&&yr(g)},an.prototype.N=function(){this.g.l=null,delete this.j,zt(this.g),delete this.g,an.aa.N.call(this)};function Uu(c){dr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const v in g){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}V(Uu,dr);function zu(){so.call(this),this.status=1}V(zu,so);function _r(c){this.g=c}V(_r,Xa),_r.prototype.ua=function(){It(this.g,"a")},_r.prototype.ta=function(c){It(this.g,new Uu(c))},_r.prototype.sa=function(c){It(this.g,new zu)},_r.prototype.ra=function(){It(this.g,"b")},So.prototype.createWebChannel=So.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,X0=function(){return new So},K0=function(){return li()},Q0=fr,Rp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ao.NO_ERROR=0,ao.TIMEOUT=8,ao.HTTP_ERROR=6,th=ao,Su.COMPLETE="complete",G0=Su,ro.EventType=Pn,Pn.OPEN="a",Pn.CLOSE="b",Pn.ERROR="c",Pn.MESSAGE="d",Rt.prototype.listen=Rt.prototype.K,Rl=ro,ot.prototype.listenOnce=ot.prototype.L,ot.prototype.getLastError=ot.prototype.Ka,ot.prototype.getLastErrorCode=ot.prototype.Ba,ot.prototype.getStatus=ot.prototype.Z,ot.prototype.getResponseJson=ot.prototype.Oa,ot.prototype.getResponseText=ot.prototype.oa,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Ha,W0=ot}).apply(typeof Fc<"u"?Fc:typeof self<"u"?self:typeof window<"u"?window:{});const bv="@firebase/firestore",Pv="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _a="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=new $0("@firebase/firestore");function Qo(){return Fi.logLevel}function ce(n,...e){if(Fi.logLevel<=Fe.DEBUG){const t=e.map(gm);Fi.debug(`Firestore (${_a}): ${n}`,...t)}}function us(n,...e){if(Fi.logLevel<=Fe.ERROR){const t=e.map(gm);Fi.error(`Firestore (${_a}): ${n}`,...t)}}function Gs(n,...e){if(Fi.logLevel<=Fe.WARN){const t=e.map(gm);Fi.warn(`Firestore (${_a}): ${n}`,...t)}}function gm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,J0(n,r,t)}function J0(n,e,t){let r=`FIRESTORE (${_a}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw us(r),new Error(r)}function He(n,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,n||J0(e,o,r)}function Re(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends ya{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(rn.UNAUTHENTICATED)))}shutdown(){}}class Ck{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class bk{constructor(e){this.t=e,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){He(this.o===void 0,42304);let r=this.i;const o=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let a=new is;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new is,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const p=a;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},d=p=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new is)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(He(typeof r.accessToken=="string",31837,{l:r}),new Y0(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string",2055,{h:e}),new rn(e)}}class Pk{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Nk{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Pk(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(rn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Nv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Dk{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hk(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){He(this.o===void 0,3512);const r=a=>{a.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,ce("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const o=a=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Nv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(He(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Nv(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vk(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=Vk(40);for(let a=0;a<o.length;++a)r.length<20&&o[a]<t&&(r+=e.charAt(o[a]%62))}return r}}function be(n,e){return n<e?-1:n>e?1:0}function Ip(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),o=e.codePointAt(t);if(r!==o){if(r<128&&o<128)return be(r,o);{const a=Z0(),u=Ok(a.encode(Dv(n,t)),a.encode(Dv(e,t)));return u!==0?u:be(r,o)}}t+=r>65535?2:1}return be(n.length,e.length)}function Dv(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function Ok(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return be(n[t],e[t]);return be(n.length,e.length)}function ca(n,e,t){return n.length===e.length&&n.every(((r,o)=>t(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="__name__";class Ar{constructor(e,t,r){t===void 0?t=0:t>e.length&&Se(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Se(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ar.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ar?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const a=Ar.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return be(e.length,t.length)}static compareSegments(e,t){const r=Ar.isNumericId(e),o=Ar.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?Ar.extractNumericId(e).compare(Ar.extractNumericId(t)):Ip(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hs.fromString(e.substring(4,e.length-2))}}class tt extends Ar{construct(e,t,r){return new tt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new oe(K.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((o=>o.length>0)))}return new tt(t)}static emptyPath(){return new tt([])}}const Lk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends Ar{construct(e,t,r){return new Qt(e,t,r)}static isValidIdentifier(e){return Lk.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Vv}static keyField(){return new Qt([Vv])}static fromServerFormat(e){const t=[];let r="",o=0;const a=()=>{if(r.length===0)throw new oe(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new oe(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new oe(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(r+=d,o++):(a(),o++)}if(a(),u)throw new oe(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(t)}static emptyPath(){return new Qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(tt.fromString(e))}static fromName(e){return new _e(tt.fromString(e).popFirst(5))}static empty(){return new _e(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new tt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(n,e,t){if(!t)throw new oe(K.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Mk(n,e,t,r){if(e===!0&&r===!0)throw new oe(K.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Ov(n){if(!_e.isDocumentKey(n))throw new oe(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Lv(n){if(_e.isDocumentKey(n))throw new oe(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function tE(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function $h(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Se(12329,{type:typeof n})}function $i(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new oe(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=$h(n);throw new oe(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(n,e){const t={typeString:n};return e&&(t.value=e),t}function lu(n,e){if(!tE(n))throw new oe(K.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const o=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const u=n[r];if(o&&typeof u!==o){t=`JSON field '${r}' must be a ${o}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new oe(K.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv=-62135596800,Fv=1e6;class it{static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Fv);return new it(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new oe(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new oe(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Mv)throw new oe(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Fv}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:it._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(lu(e,it._jsonSchema))return new it(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Mv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}it._jsonSchemaVersion="firestore/timestamp/1.0",it._jsonSchema={type:xt("string",it._jsonSchemaVersion),seconds:xt("number"),nanoseconds:xt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new it(0,0))}static max(){return new Ae(new it(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl=-1;function Fk(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Ae.fromTimestamp(r===1e9?new it(t+1,0):new it(t,r));return new Qs(o,_e.empty(),e)}function $k(n){return new Qs(n.readTime,n.key,Xl)}class Qs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Qs(Ae.min(),_e.empty(),Xl)}static max(){return new Qs(Ae.max(),_e.empty(),Xl)}}function jk(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(n.documentKey,e.documentKey),t!==0?t:be(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Uk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function va(n){if(n.code!==K.FAILED_PRECONDITION||n.message!==Bk)throw n;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new X(((r,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof X?t:X.resolve(t)}catch(t){return X.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):X.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):X.reject(t)}static resolve(e){return new X(((t,r)=>{t(e)}))}static reject(e){return new X(((t,r)=>{r(e)}))}static waitFor(e){return new X(((t,r)=>{let o=0,a=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++a,u&&a===o&&t()}),(p=>r(p)))})),u=!0,a===o&&t()}))}static or(e){let t=X.resolve(!1);for(const r of e)t=t.next((o=>o?X.resolve(o):r()));return t}static forEach(e,t){const r=[];return e.forEach(((o,a)=>{r.push(t.call(this,o,a))})),this.waitFor(r)}static mapArray(e,t){return new X(((r,o)=>{const a=e.length,u=new Array(a);let d=0;for(let p=0;p<a;p++){const m=p;t(e[m]).next((_=>{u[m]=_,++d,d===a&&r(u)}),(_=>o(_)))}}))}static doWhile(e,t){return new X(((r,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):r()};a()}))}}function zk(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function wa(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}jh.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m=-1;function Bh(n){return n==null}function vh(n){return n===0&&1/n==-1/0}function Hk(n){return typeof n=="number"&&Number.isInteger(n)&&!vh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="";function qk(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=$v(e)),e=Wk(n.get(t),e);return $v(e)}function Wk(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case nE:t+="";break;default:t+=a}}return t}function $v(n){return n+nE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function qi(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function rE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,t){this.comparator=e,this.root=t||Gt.EMPTY}insert(e,t){return new dt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gt.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $c(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $c(this.root,e,this.comparator,!1)}getReverseIterator(){return new $c(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $c(this.root,e,this.comparator,!0)}}class $c{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gt{constructor(e,t,r,o,a){this.key=e,this.value=t,this.color=r??Gt.RED,this.left=o??Gt.EMPTY,this.right=a??Gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,a){return new Gt(e??this.key,t??this.value,r??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const a=r(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,r),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Gt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}Gt.EMPTY=null,Gt.RED=!0,Gt.BLACK=!1;Gt.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,t,r,o,a){return this}insert(e,t,r){return new Gt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Bv(this.data.getIterator())}getIteratorFrom(e){return new Bv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Dt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=r.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Dt(this.comparator);return t.data=e,t}}class Bv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new lr([])}unionWith(e){let t=new Dt(Qt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new lr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ca(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new sE("Invalid base64 string: "+a):a}})(e);return new Kt(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a})(e);return new Kt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kt.EMPTY_BYTE_STRING=new Kt("");const Gk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ks(n){if(He(!!n,39018),typeof n=="string"){let e=0;const t=Gk.exec(n);if(He(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:vt(n.seconds),nanos:vt(n.nanos)}}function vt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Xs(n){return typeof n=="string"?Kt.fromBase64String(n):Kt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="server_timestamp",oE="__type__",aE="__previous_value__",lE="__local_write_time__";function vm(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[oE])===null||t===void 0?void 0:t.stringValue)===iE}function Uh(n){const e=n.mapValue.fields[aE];return vm(e)?Uh(e):e}function Jl(n){const e=Ks(n.mapValue.fields[lE].timestampValue);return new it(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e,t,r,o,a,u,d,p,m,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=m,this.isUsingEmulator=_}}const wh="(default)";class Yl{constructor(e,t){this.projectId=e,this.database=t||wh}static empty(){return new Yl("","")}get isDefaultDatabase(){return this.database===wh}isEqual(e){return e instanceof Yl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="__type__",Kk="__max__",jc={mapValue:{}},cE="__vector__",Eh="value";function Js(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?vm(n)?4:Jk(n)?9007199254740991:Xk(n)?10:11:Se(28295,{value:n})}function Dr(n,e){if(n===e)return!0;const t=Js(n);if(t!==Js(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Jl(n).isEqual(Jl(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=Ks(o.timestampValue),d=Ks(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,a){return Xs(o.bytesValue).isEqual(Xs(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,a){return vt(o.geoPointValue.latitude)===vt(a.geoPointValue.latitude)&&vt(o.geoPointValue.longitude)===vt(a.geoPointValue.longitude)})(n,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return vt(o.integerValue)===vt(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=vt(o.doubleValue),d=vt(a.doubleValue);return u===d?vh(u)===vh(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return ca(n.arrayValue.values||[],e.arrayValue.values||[],Dr);case 10:case 11:return(function(o,a){const u=o.mapValue.fields||{},d=a.mapValue.fields||{};if(jv(u)!==jv(d))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(d[p]===void 0||!Dr(u[p],d[p])))return!1;return!0})(n,e);default:return Se(52216,{left:n})}}function Zl(n,e){return(n.values||[]).find((t=>Dr(t,e)))!==void 0}function ha(n,e){if(n===e)return 0;const t=Js(n),r=Js(e);if(t!==r)return be(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return be(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=vt(a.integerValue||a.doubleValue),p=vt(u.integerValue||u.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return Uv(n.timestampValue,e.timestampValue);case 4:return Uv(Jl(n),Jl(e));case 5:return Ip(n.stringValue,e.stringValue);case 6:return(function(a,u){const d=Xs(a),p=Xs(u);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),p=u.split("/");for(let m=0;m<d.length&&m<p.length;m++){const _=be(d[m],p[m]);if(_!==0)return _}return be(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=be(vt(a.latitude),vt(u.latitude));return d!==0?d:be(vt(a.longitude),vt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return zv(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var d,p,m,_;const w=a.fields||{},E=u.fields||{},A=(d=w[Eh])===null||d===void 0?void 0:d.arrayValue,V=(p=E[Eh])===null||p===void 0?void 0:p.arrayValue,N=be(((m=A==null?void 0:A.values)===null||m===void 0?void 0:m.length)||0,((_=V==null?void 0:V.values)===null||_===void 0?void 0:_.length)||0);return N!==0?N:zv(A,V)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===jc.mapValue&&u===jc.mapValue)return 0;if(a===jc.mapValue)return 1;if(u===jc.mapValue)return-1;const d=a.fields||{},p=Object.keys(d),m=u.fields||{},_=Object.keys(m);p.sort(),_.sort();for(let w=0;w<p.length&&w<_.length;++w){const E=Ip(p[w],_[w]);if(E!==0)return E;const A=ha(d[p[w]],m[_[w]]);if(A!==0)return A}return be(p.length,_.length)})(n.mapValue,e.mapValue);default:throw Se(23264,{le:t})}}function Uv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return be(n,e);const t=Ks(n),r=Ks(e),o=be(t.seconds,r.seconds);return o!==0?o:be(t.nanos,r.nanos)}function zv(n,e){const t=n.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const a=ha(t[o],r[o]);if(a)return a}return be(t.length,r.length)}function da(n){return kp(n)}function kp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Ks(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Xs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return _e.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",o=!0;for(const a of t.values||[])o?o=!1:r+=",",r+=kp(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of r)a?a=!1:o+=",",o+=`${u}:${kp(t.fields[u])}`;return o+"}"})(n.mapValue):Se(61005,{value:n})}function nh(n){switch(Js(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Uh(n);return e?16+nh(e):16;case 5:return 2*n.stringValue.length;case 6:return Xs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,a)=>o+nh(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let o=0;return qi(r.fields,((a,u)=>{o+=a.length+nh(u)})),o})(n.mapValue);default:throw Se(13486,{value:n})}}function Hv(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Cp(n){return!!n&&"integerValue"in n}function wm(n){return!!n&&"arrayValue"in n}function qv(n){return!!n&&"nullValue"in n}function Wv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function rh(n){return!!n&&"mapValue"in n}function Xk(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[uE])===null||t===void 0?void 0:t.stringValue)===cE}function Ml(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return qi(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Ml(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ml(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Jk(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Kk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.value=e}static empty(){return new Bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!rh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ml(t)}setAll(e){let t=Qt.emptyPath(),r={},o=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,o),r={},o=[],t=d.popLast()}u?r[d.lastSegment()]=Ml(u):o.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,o)}delete(e){const t=this.field(e.popLast());rh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Dr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];rh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){qi(t,((o,a)=>e[o]=a));for(const o of r)delete e[o]}clone(){return new Bn(Ml(this.value))}}function hE(n){const e=[];return qi(n.fields,((t,r)=>{const o=new Qt([t]);if(rh(r)){const a=hE(r.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)})),new lr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,t,r,o,a,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new sn(e,0,Ae.min(),Ae.min(),Ae.min(),Bn.empty(),0)}static newFoundDocument(e,t,r,o){return new sn(e,1,t,Ae.min(),r,o,0)}static newNoDocument(e,t){return new sn(e,2,t,Ae.min(),Ae.min(),Bn.empty(),0)}static newUnknownDocument(e,t){return new sn(e,3,t,Ae.min(),Ae.min(),Bn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,t){this.position=e,this.inclusive=t}}function Gv(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const a=e[o],u=n.position[o];if(a.field.isKeyField()?r=_e.comparator(_e.fromName(u.referenceValue),t.key):r=ha(u,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Qv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Dr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,t="asc"){this.field=e,this.dir=t}}function Yk(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{}class Tt extends dE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new eC(e,t,r):t==="array-contains"?new rC(e,r):t==="in"?new sC(e,r):t==="not-in"?new iC(e,r):t==="array-contains-any"?new oC(e,r):new Tt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new tC(e,r):new nC(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ha(t,this.value)):t!==null&&Js(this.value)===Js(t)&&this.matchesComparison(ha(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hr extends dE{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new hr(e,t)}matches(e){return fE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function fE(n){return n.op==="and"}function pE(n){return Zk(n)&&fE(n)}function Zk(n){for(const e of n.filters)if(e instanceof hr)return!1;return!0}function bp(n){if(n instanceof Tt)return n.field.canonicalString()+n.op.toString()+da(n.value);if(pE(n))return n.filters.map((e=>bp(e))).join(",");{const e=n.filters.map((t=>bp(t))).join(",");return`${n.op}(${e})`}}function mE(n,e){return n instanceof Tt?(function(r,o){return o instanceof Tt&&r.op===o.op&&r.field.isEqual(o.field)&&Dr(r.value,o.value)})(n,e):n instanceof hr?(function(r,o){return o instanceof hr&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((a,u,d)=>a&&mE(u,o.filters[d])),!0):!1})(n,e):void Se(19439)}function gE(n){return n instanceof Tt?(function(t){return`${t.field.canonicalString()} ${t.op} ${da(t.value)}`})(n):n instanceof hr?(function(t){return t.op.toString()+" {"+t.getFilters().map(gE).join(" ,")+"}"})(n):"Filter"}class eC extends Tt{constructor(e,t,r){super(e,t,r),this.key=_e.fromName(r.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class tC extends Tt{constructor(e,t){super(e,"in",t),this.keys=yE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class nC extends Tt{constructor(e,t){super(e,"not-in",t),this.keys=yE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function yE(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((r=>_e.fromName(r.referenceValue)))}class rC extends Tt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wm(t)&&Zl(t.arrayValue,this.value)}}class sC extends Tt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Zl(this.value.arrayValue,t)}}class iC extends Tt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Zl(this.value.arrayValue,t)}}class oC extends Tt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Zl(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e,t=null,r=[],o=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=a,this.startAt=u,this.endAt=d,this.Pe=null}}function Kv(n,e=null,t=[],r=[],o=null,a=null,u=null){return new aC(n,e,t,r,o,a,u)}function Em(n){const e=Re(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>bp(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Bh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>da(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>da(r))).join(",")),e.Pe=t}return e.Pe}function Sm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Yk(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!mE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Qv(n.startAt,e.startAt)&&Qv(n.endAt,e.endAt)}function Pp(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,t=null,r=[],o=[],a=null,u="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=p,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function lC(n,e,t,r,o,a,u,d){return new Ea(n,e,t,r,o,a,u,d)}function Tm(n){return new Ea(n)}function Xv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function _E(n){return n.collectionGroup!==null}function Fl(n){const e=Re(n);if(e.Te===null){e.Te=[];const t=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Dt(Qt.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Te.push(new eu(a,r))})),t.has(Qt.keyField().canonicalString())||e.Te.push(new eu(Qt.keyField(),r))}return e.Te}function Cr(n){const e=Re(n);return e.Ie||(e.Ie=uC(e,Fl(n))),e.Ie}function uC(n,e){if(n.limitType==="F")return Kv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new eu(o.field,a)}));const t=n.endAt?new Sh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Sh(n.startAt.position,n.startAt.inclusive):null;return Kv(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Np(n,e){const t=n.filters.concat([e]);return new Ea(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Dp(n,e,t){return new Ea(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function zh(n,e){return Sm(Cr(n),Cr(e))&&n.limitType===e.limitType}function vE(n){return`${Em(Cr(n))}|lt:${n.limitType}`}function Ko(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((o=>gE(o))).join(", ")}]`),Bh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((o=>da(o))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((o=>da(o))).join(",")),`Target(${r})`})(Cr(n))}; limitType=${n.limitType})`}function Hh(n,e){return e.isFoundDocument()&&(function(r,o){const a=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):_e.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,o){for(const a of Fl(r))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,o){for(const a of r.filters)if(!a.matches(o))return!1;return!0})(n,e)&&(function(r,o){return!(r.startAt&&!(function(u,d,p){const m=Gv(u,d,p);return u.inclusive?m<=0:m<0})(r.startAt,Fl(r),o)||r.endAt&&!(function(u,d,p){const m=Gv(u,d,p);return u.inclusive?m>=0:m>0})(r.endAt,Fl(r),o))})(n,e)}function cC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function wE(n){return(e,t)=>{let r=!1;for(const o of Fl(n)){const a=hC(o,e,t);if(a!==0)return a;r=r||o.field.isKeyField()}return 0}}function hC(n,e,t){const r=n.field.isKeyField()?_e.comparator(e.key,t.key):(function(a,u,d){const p=u.data.field(a),m=d.data.field(a);return p!==null&&m!==null?ha(p,m):Se(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Se(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,a]of r)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){qi(this.inner,((t,r)=>{for(const[o,a]of r)e(o,a)}))}isEmpty(){return rE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC=new dt(_e.comparator);function cs(){return dC}const EE=new dt(_e.comparator);function Il(...n){let e=EE;for(const t of n)e=e.insert(t.key,t);return e}function SE(n){let e=EE;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Oi(){return $l()}function TE(){return $l()}function $l(){return new Wi((n=>n.toString()),((n,e)=>n.isEqual(e)))}const fC=new dt(_e.comparator),pC=new Dt(_e.comparator);function De(...n){let e=pC;for(const t of n)e=e.add(t);return e}const mC=new Dt(be);function gC(){return mC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vh(e)?"-0":e}}function xE(n){return{integerValue:""+n}}function yC(n,e){return Hk(e)?xE(e):xm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(){this._=void 0}}function _C(n,e,t){return n instanceof Th?(function(o,a){const u={fields:{[oE]:{stringValue:iE},[lE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&vm(a)&&(a=Uh(a)),a&&(u.fields[aE]=a),{mapValue:u}})(t,e):n instanceof tu?RE(n,e):n instanceof nu?IE(n,e):(function(o,a){const u=AE(o,a),d=Jv(u)+Jv(o.Ee);return Cp(u)&&Cp(o.Ee)?xE(d):xm(o.serializer,d)})(n,e)}function vC(n,e,t){return n instanceof tu?RE(n,e):n instanceof nu?IE(n,e):t}function AE(n,e){return n instanceof xh?(function(r){return Cp(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Th extends qh{}class tu extends qh{constructor(e){super(),this.elements=e}}function RE(n,e){const t=kE(e);for(const r of n.elements)t.some((o=>Dr(o,r)))||t.push(r);return{arrayValue:{values:t}}}class nu extends qh{constructor(e){super(),this.elements=e}}function IE(n,e){let t=kE(e);for(const r of n.elements)t=t.filter((o=>!Dr(o,r)));return{arrayValue:{values:t}}}class xh extends qh{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Jv(n){return vt(n.integerValue||n.doubleValue)}function kE(n){return wm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function wC(n,e){return n.field.isEqual(e.field)&&(function(r,o){return r instanceof tu&&o instanceof tu||r instanceof nu&&o instanceof nu?ca(r.elements,o.elements,Dr):r instanceof xh&&o instanceof xh?Dr(r.Ee,o.Ee):r instanceof Th&&o instanceof Th})(n.transform,e.transform)}class EC{constructor(e,t){this.version=e,this.transformResults=t}}class os{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new os}static exists(e){return new os(void 0,e)}static updateTime(e){return new os(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Wh{}function CE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new PE(n.key,os.none()):new uu(n.key,n.data,os.none());{const t=n.data,r=Bn.empty();let o=new Dt(Qt.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?r.delete(a):r.set(a,u),o=o.add(a)}return new Gi(n.key,r,new lr(o.toArray()),os.none())}}function SC(n,e,t){n instanceof uu?(function(o,a,u){const d=o.value.clone(),p=Zv(o.fieldTransforms,a,u.transformResults);d.setAll(p),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Gi?(function(o,a,u){if(!sh(o.precondition,a))return void a.convertToUnknownDocument(u.version);const d=Zv(o.fieldTransforms,a,u.transformResults),p=a.data;p.setAll(bE(o)),p.setAll(d),a.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(n,e,t):(function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function jl(n,e,t,r){return n instanceof uu?(function(a,u,d,p){if(!sh(a.precondition,u))return d;const m=a.value.clone(),_=ew(a.fieldTransforms,p,u);return m.setAll(_),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(n,e,t,r):n instanceof Gi?(function(a,u,d,p){if(!sh(a.precondition,u))return d;const m=ew(a.fieldTransforms,p,u),_=u.data;return _.setAll(bE(a)),_.setAll(m),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((w=>w.field)))})(n,e,t,r):(function(a,u,d){return sh(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function TC(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),a=AE(r.transform,o||null);a!=null&&(t===null&&(t=Bn.empty()),t.set(r.field,a))}return t||null}function Yv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&ca(r,o,((a,u)=>wC(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class uu extends Wh{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Gi extends Wh{constructor(e,t,r,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function bE(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function Zv(n,e,t){const r=new Map;He(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let o=0;o<t.length;o++){const a=n[o],u=a.transform,d=e.data.field(a.field);r.set(a.field,vC(u,d,t[o]))}return r}function ew(n,e,t){const r=new Map;for(const o of n){const a=o.transform,u=t.data.field(o.field);r.set(o.field,_C(a,u,e))}return r}class PE extends Wh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xC extends Wh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&SC(a,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=jl(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=jl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=TE();return this.mutations.forEach((o=>{const a=e.get(o.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(o.key)?null:d;const p=CE(u,d);p!==null&&r.set(o.key,p),u.isValidDocument()||u.convertToNoDocument(Ae.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),De())}isEqual(e){return this.batchId===e.batchId&&ca(this.mutations,e.mutations,((t,r)=>Yv(t,r)))&&ca(this.baseMutations,e.baseMutations,((t,r)=>Yv(t,r)))}}class Am{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){He(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let o=(function(){return fC})();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,r[u].version);return new Am(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St,Me;function kC(n){switch(n){case K.OK:return Se(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return Se(15467,{code:n})}}function NE(n){if(n===void 0)return us("GRPC error has no .code"),K.UNKNOWN;switch(n){case St.OK:return K.OK;case St.CANCELLED:return K.CANCELLED;case St.UNKNOWN:return K.UNKNOWN;case St.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case St.INTERNAL:return K.INTERNAL;case St.UNAVAILABLE:return K.UNAVAILABLE;case St.UNAUTHENTICATED:return K.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case St.NOT_FOUND:return K.NOT_FOUND;case St.ALREADY_EXISTS:return K.ALREADY_EXISTS;case St.PERMISSION_DENIED:return K.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case St.ABORTED:return K.ABORTED;case St.OUT_OF_RANGE:return K.OUT_OF_RANGE;case St.UNIMPLEMENTED:return K.UNIMPLEMENTED;case St.DATA_LOSS:return K.DATA_LOSS;default:return Se(39323,{code:n})}}(Me=St||(St={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=new Hs([4294967295,4294967295],0);function tw(n){const e=Z0().encode(n),t=new q0;return t.update(e),new Uint8Array(t.digest())}function nw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Hs([t,r],0),new Hs([o,a],0)]}class Rm{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new kl(`Invalid padding: ${t}`);if(r<0)throw new kl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new kl(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new kl(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Hs.fromNumber(this.fe)}pe(e,t,r){let o=e.add(t.multiply(Hs.fromNumber(r)));return o.compare(CC)===1&&(o=new Hs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=tw(e),[r,o]=nw(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(r,o,a);if(!this.ye(u))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Rm(a,o,t);return r.forEach((d=>u.insert(d))),u}insert(e){if(this.fe===0)return;const t=tw(e),[r,o]=nw(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(r,o,a);this.we(u)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class kl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,t,r,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,cu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Gh(Ae.min(),o,new dt(be),cs(),De())}}class cu{constructor(e,t,r,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new cu(r,t,De(),De(),De())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,t,r,o){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=o}}class DE{constructor(e,t){this.targetId=e,this.De=t}}class VE{constructor(e,t,r=Kt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class rw{constructor(){this.ve=0,this.Ce=sw(),this.Fe=Kt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=De(),t=De(),r=De();return this.Ce.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Se(38017,{changeType:a})}})),new cu(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=sw()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,He(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class bC{constructor(e){this.We=e,this.Ge=new Map,this.ze=cs(),this.je=Bc(),this.Je=Bc(),this.He=new dt(be)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:Se(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((r,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,r=e.De.count,o=this.st(t);if(o){const a=o.target;if(Pp(a))if(r===0){const u=new _e(a.path);this.Xe(t,u,sn.newNoDocument(u,Ae.min()))}else He(r===1,20013,{expectedCount:r});else{const u=this.ot(t);if(u!==r){const d=this._t(e),p=d?this.ut(d,e,u):1;if(p!==0){this.rt(t);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,m)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:a=0}=t;let u,d;try{u=Xs(r).toUint8Array()}catch(p){if(p instanceof sE)return Gs("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Rm(u,o,a)}catch(p){return Gs(p instanceof kl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.fe===0?null:d}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let o=0;return r.forEach((a=>{const u=this.We.lt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,a,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((a,u)=>{const d=this.st(u);if(d){if(a.current&&Pp(d.target)){const p=new _e(d.target.path);this.Tt(p).has(u)||this.It(u,p)||this.Xe(u,p,sn.newNoDocument(p,e))}a.Ne&&(t.set(u,a.Le()),a.ke())}}));let r=De();this.Je.forEach(((a,u)=>{let d=!0;u.forEachWhile((p=>{const m=this.st(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(a))})),this.ze.forEach(((a,u)=>u.setReadTime(e)));const o=new Gh(e,t,this.He,this.ze,r);return this.ze=cs(),this.je=Bc(),this.Je=Bc(),this.He=new dt(be),o}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new rw,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Dt(be),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Dt(be),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new rw),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Bc(){return new dt(_e.comparator)}function sw(){return new dt(_e.comparator)}const PC={asc:"ASCENDING",desc:"DESCENDING"},NC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DC={and:"AND",or:"OR"};class VC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Vp(n,e){return n.useProto3Json||Bh(e)?e:{value:e}}function Ah(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function OC(n,e){return Ah(n,e.toTimestamp())}function br(n){return He(!!n,49232),Ae.fromTimestamp((function(t){const r=Ks(t);return new it(r.seconds,r.nanos)})(n))}function Im(n,e){return Op(n,e).canonicalString()}function Op(n,e){const t=(function(o){return new tt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function LE(n){const e=tt.fromString(n);return He(BE(e),10190,{key:e.toString()}),e}function Lp(n,e){return Im(n.databaseId,e.path)}function ep(n,e){const t=LE(e);if(t.get(1)!==n.databaseId.projectId)throw new oe(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new oe(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _e(FE(t))}function ME(n,e){return Im(n.databaseId,e)}function LC(n){const e=LE(n);return e.length===4?tt.emptyPath():FE(e)}function Mp(n){return new tt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function FE(n){return He(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function iw(n,e,t){return{name:Lp(n,e),fields:t.value.mapValue.fields}}function MC(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Se(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(m,_){return m.useProto3Json?(He(_===void 0||typeof _=="string",58123),Kt.fromBase64String(_||"")):(He(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Kt.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(m){const _=m.code===void 0?K.UNKNOWN:NE(m.code);return new oe(_,m.message||"")})(u);t=new VE(r,o,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=ep(n,r.document.name),a=br(r.document.updateTime),u=r.document.createTime?br(r.document.createTime):Ae.min(),d=new Bn({mapValue:{fields:r.document.fields}}),p=sn.newFoundDocument(o,a,u,d),m=r.targetIds||[],_=r.removedTargetIds||[];t=new ih(m,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=ep(n,r.document),a=r.readTime?br(r.readTime):Ae.min(),u=sn.newNoDocument(o,a),d=r.removedTargetIds||[];t=new ih([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=ep(n,r.document),a=r.removedTargetIds||[];t=new ih([],a,o,null)}else{if(!("filter"in e))return Se(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:a}=r,u=new IC(o,a),d=r.targetId;t=new DE(d,u)}}return t}function FC(n,e){let t;if(e instanceof uu)t={update:iw(n,e.key,e.value)};else if(e instanceof PE)t={delete:Lp(n,e.key)};else if(e instanceof Gi)t={update:iw(n,e.key,e.data),updateMask:GC(e.fieldMask)};else{if(!(e instanceof xC))return Se(16599,{Rt:e.type});t={verify:Lp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,u){const d=u.transform;if(d instanceof Th)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof tu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof nu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof xh)return{fieldPath:u.field.canonicalString(),increment:d.Ee};throw Se(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:OC(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Se(27497)})(n,e.precondition)),t}function $C(n,e){return n&&n.length>0?(He(e!==void 0,14353),n.map((t=>(function(o,a){let u=o.updateTime?br(o.updateTime):br(a);return u.isEqual(Ae.min())&&(u=br(a)),new EC(u,o.transformResults||[])})(t,e)))):[]}function jC(n,e){return{documents:[ME(n,e.path)]}}function BC(n,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=ME(n,o);const a=(function(m){if(m.length!==0)return jE(hr.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(m){if(m.length!==0)return m.map((_=>(function(E){return{field:Xo(E.field),direction:HC(E.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=Vp(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{Vt:t,parent:o}}function UC(n){let e=LC(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){He(r===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=(function(w){const E=$E(w);return E instanceof hr&&pE(E)?E.getFilters():[E]})(t.where));let u=[];t.orderBy&&(u=(function(w){return w.map((E=>(function(V){return new eu(Jo(V.field),(function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(E)))})(t.orderBy));let d=null;t.limit&&(d=(function(w){let E;return E=typeof w=="object"?w.value:w,Bh(E)?null:E})(t.limit));let p=null;t.startAt&&(p=(function(w){const E=!!w.before,A=w.values||[];return new Sh(A,E)})(t.startAt));let m=null;return t.endAt&&(m=(function(w){const E=!w.before,A=w.values||[];return new Sh(A,E)})(t.endAt)),lC(e,o,u,a,d,"F",p,m)}function zC(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function $E(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Jo(t.unaryFilter.field);return Tt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Jo(t.unaryFilter.field);return Tt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Jo(t.unaryFilter.field);return Tt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Jo(t.unaryFilter.field);return Tt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Tt.create(Jo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return hr.create(t.compositeFilter.filters.map((r=>$E(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(t.compositeFilter.op))})(n):Se(30097,{filter:n})}function HC(n){return PC[n]}function qC(n){return NC[n]}function WC(n){return DC[n]}function Xo(n){return{fieldPath:n.canonicalString()}}function Jo(n){return Qt.fromServerFormat(n.fieldPath)}function jE(n){return n instanceof Tt?(function(t){if(t.op==="=="){if(Wv(t.value))return{unaryFilter:{field:Xo(t.field),op:"IS_NAN"}};if(qv(t.value))return{unaryFilter:{field:Xo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Wv(t.value))return{unaryFilter:{field:Xo(t.field),op:"IS_NOT_NAN"}};if(qv(t.value))return{unaryFilter:{field:Xo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xo(t.field),op:qC(t.op),value:t.value}}})(n):n instanceof hr?(function(t){const r=t.getFilters().map((o=>jE(o)));return r.length===1?r[0]:{compositeFilter:{op:WC(t.op),filters:r}}})(n):Se(54877,{filter:n})}function GC(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function BE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,t,r,o,a=Ae.min(),u=Ae.min(),d=Kt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Bs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e){this.gt=e}}function KC(n){const e=UC({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Dp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(){this.Dn=new JC}addToCollectionParentIndex(e,t){return this.Dn.add(t),X.resolve()}getCollectionParents(e,t){return X.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return X.resolve()}deleteFieldIndex(e,t){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,t){return X.resolve()}getDocumentsMatchingTarget(e,t){return X.resolve(null)}getIndexType(e,t){return X.resolve(0)}getFieldIndexes(e,t){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,t){return X.resolve(Qs.min())}getMinOffsetFromCollectionGroup(e,t){return X.resolve(Qs.min())}updateCollectionGroup(e,t,r){return X.resolve()}updateIndexEntries(e,t){return X.resolve()}}class JC{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Dt(tt.comparator),a=!o.has(r);return this.index[t]=o.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Dt(tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},UE=41943040;class wn{static withCacheSize(e){return new wn(e,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wn.DEFAULT_COLLECTION_PERCENTILE=10,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wn.DEFAULT=new wn(UE,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wn.DISABLED=new wn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new fa(0)}static ur(){return new fa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw="LruGarbageCollector",YC=1048576;function lw([n,e],[t,r]){const o=be(n,t);return o===0?be(e,r):o}class ZC{constructor(e){this.Tr=e,this.buffer=new Dt(lw),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();lw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class eb{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ce(aw,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){wa(t)?ce(aw,"Ignoring IndexedDB error during garbage collection: ",t):await va(t)}await this.Rr(3e5)}))}}class tb{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return X.resolve(jh.ue);const r=new ZC(t);return this.Vr.forEachTarget(e,(o=>r.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>r.Er(o))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(ow)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ow):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,o,a,u,d,p,m;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,u=Date.now(),this.nthSequenceNumber(e,o)))).next((w=>(r=w,d=Date.now(),this.removeTargets(e,r,t)))).next((w=>(a=w,p=Date.now(),this.removeOrphanedDocuments(e,r)))).next((w=>(m=Date.now(),Qo()<=Fe.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${o} in `+(d-u)+`ms
	Removed ${a} targets in `+(p-d)+`ms
	Removed ${w} documents in `+(m-p)+`ms
Total Duration: ${m-_}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:w}))))}}function nb(n,e){return new tb(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(){this.changes=new Wi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?X.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(r!==null&&jl(r.mutation,o,lr.empty(),it.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,De()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=De()){const o=Oi();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,r).next((a=>{let u=Il();return a.forEach(((d,p)=>{u=u.insert(d,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=Oi();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,De())))}populateOverlays(e,t,r){const o=[];return r.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,r,o){let a=cs();const u=$l(),d=(function(){return $l()})();return t.forEach(((p,m)=>{const _=r.get(m.key);o.has(m.key)&&(_===void 0||_.mutation instanceof Gi)?a=a.insert(m.key,m):_!==void 0?(u.set(m.key,_.mutation.getFieldMask()),jl(_.mutation,m,_.mutation.getFieldMask(),it.now())):u.set(m.key,lr.empty())})),this.recalculateAndSaveOverlays(e,a).next((p=>(p.forEach(((m,_)=>u.set(m,_))),t.forEach(((m,_)=>{var w;return d.set(m,new sb(_,(w=u.get(m))!==null&&w!==void 0?w:null))})),d)))}recalculateAndSaveOverlays(e,t){const r=$l();let o=new dt(((u,d)=>u-d)),a=De();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((p=>{const m=t.get(p);if(m===null)return;let _=r.get(p)||lr.empty();_=d.applyToLocalView(m,_),r.set(p,_);const w=(o.get(d.batchId)||De()).add(p);o=o.insert(d.batchId,w)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),m=p.key,_=p.value,w=TE();_.forEach((E=>{if(!a.has(E)){const A=CE(t.get(E),r.get(E));A!==null&&w.set(E,A),a=a.add(E)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,w))}return X.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,o){return(function(u){return _e.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):_E(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next((a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-a.size):X.resolve(Oi());let d=Xl,p=a;return u.next((m=>X.forEach(m,((_,w)=>(d<w.largestBatchId&&(d=w.largestBatchId),a.get(_)?X.resolve():this.remoteDocumentCache.getEntry(e,_).next((E=>{p=p.insert(_,E)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,p,m,De()))).next((_=>({batchId:d,changes:SE(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next((r=>{let o=Il();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const a=t.collectionGroup;let u=Il();return this.indexManager.getCollectionParents(e,a).next((d=>X.forEach(d,(p=>{const m=(function(w,E){return new Ea(E,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,o).next((_=>{_.forEach(((w,E)=>{u=u.insert(w,E)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,o)))).next((u=>{a.forEach(((p,m)=>{const _=m.getKey();u.get(_)===null&&(u=u.insert(_,sn.newInvalidDocument(_)))}));let d=Il();return u.forEach(((p,m)=>{const _=a.get(p);_!==void 0&&jl(_.mutation,m,lr.empty(),it.now()),Hh(t,m)&&(d=d.insert(p,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return X.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:br(o.createTime)}})(t)),X.resolve()}getNamedQuery(e,t){return X.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:KC(o.bundledQuery),readTime:br(o.readTime)}})(t)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(){this.overlays=new dt(_e.comparator),this.kr=new Map}getOverlay(e,t){return X.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Oi();return X.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&r.set(o,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((o,a)=>{this.wt(e,t,a)})),X.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.kr.get(r);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.kr.delete(r)),X.resolve()}getOverlaysForCollection(e,t,r){const o=Oi(),a=t.length+1,u=new _e(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const p=d.getNext().value,m=p.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&p.largestBatchId>r&&o.set(p.getKey(),p)}return X.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let a=new dt(((m,_)=>m-_));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let _=a.get(m.largestBatchId);_===null&&(_=Oi(),a=a.insert(m.largestBatchId,_)),_.set(m.getKey(),m)}}const d=Oi(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((m,_)=>d.set(m,_))),!(d.size()>=o)););return X.resolve(d)}wt(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const u=this.kr.get(o.largestBatchId).delete(r.key);this.kr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new RC(t,r));let a=this.kr.get(t);a===void 0&&(a=De(),this.kr.set(t,a)),this.kr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(){this.sessionToken=Kt.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(){this.qr=new Dt(Bt.Qr),this.$r=new Dt(Bt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new Bt(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new Bt(e,t))}Gr(e,t){e.forEach((r=>this.removeReference(r,t)))}zr(e){const t=new _e(new tt([])),r=new Bt(t,e),o=new Bt(t,e+1),a=[];return this.$r.forEachInRange([r,o],(u=>{this.Wr(u),a.push(u.key)})),a}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new _e(new tt([])),r=new Bt(t,e),o=new Bt(t,e+1);let a=De();return this.$r.forEachInRange([r,o],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new Bt(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Bt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return _e.comparator(e.key,t.key)||be(e.Hr,t.Hr)}static Ur(e,t){return be(e.Hr,t.Hr)||_e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Dt(Bt.Qr)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new AC(a,t,r,o);this.mutationQueue.push(u);for(const d of o)this.Yr=this.Yr.add(new Bt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return X.resolve(u)}lookupMutationBatch(e,t){return X.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.Xr(r),a=o<0?0:o;return X.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?_m:this.er-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Bt(t,0),o=new Bt(t,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,o],(u=>{const d=this.Zr(u.Hr);a.push(d)})),X.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Dt(be);return t.forEach((o=>{const a=new Bt(o,0),u=new Bt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,u],(d=>{r=r.add(d.Hr)}))})),X.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let a=r;_e.isDocumentKey(a)||(a=a.child(""));const u=new Bt(new _e(a),0);let d=new Dt(be);return this.Yr.forEachWhile((p=>{const m=p.key.path;return!!r.isPrefixOf(m)&&(m.length===o&&(d=d.add(p.Hr)),!0)}),u),X.resolve(this.ei(d))}ei(e){const t=[];return e.forEach((r=>{const o=this.Zr(r);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){He(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return X.forEach(t.mutations,(o=>{const a=new Bt(o.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=r}))}rr(e){}containsKey(e,t){const r=new Bt(t,0),o=this.Yr.firstAfterOrEqual(r);return X.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e){this.ni=e,this.docs=(function(){return new dt(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),a=o?o.size:0,u=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return X.resolve(r?r.document.mutableCopy():sn.newInvalidDocument(t))}getEntries(e,t){let r=cs();return t.forEach((o=>{const a=this.docs.get(o);r=r.insert(o,a?a.document.mutableCopy():sn.newInvalidDocument(o))})),X.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let a=cs();const u=t.path,d=new _e(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:m,value:{document:_}}=p.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||jk($k(_),r)<=0||(o.has(_.key)||Hh(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return X.resolve(a)}getAllFromCollectionGroup(e,t,r,o){Se(9500)}ri(e,t){return X.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new hb(this)}getSize(e){return X.resolve(this.size)}}class hb extends rb{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(r)})),X.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e){this.persistence=e,this.ii=new Wi((t=>Em(t)),Sm),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.si=0,this.oi=new km,this.targetCount=0,this._i=fa.ar()}forEachTarget(e,t){return this.ii.forEach(((r,o)=>t(o))),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),X.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new fa(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,X.resolve()}updateTargetData(e,t){return this.hr(t),X.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,t,r){let o=0;const a=[];return this.ii.forEach(((u,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.ii.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),X.waitFor(a).next((()=>o))}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return X.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),X.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((u=>{a.push(o.markPotentiallyOrphaned(e,u))})),X.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),X.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return X.resolve(r)}containsKey(e,t){return X.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e,t){this.ai={},this.overlays={},this.ui=new jh(0),this.ci=!1,this.ci=!0,this.li=new lb,this.referenceDelegate=e(this),this.hi=new db(this),this.indexManager=new XC,this.remoteDocumentCache=(function(o){return new cb(o)})((r=>this.referenceDelegate.Pi(r))),this.serializer=new QC(t),this.Ti=new ob(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ab,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new ub(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){ce("MemoryPersistence","Starting transaction:",e);const o=new fb(this.ui.next());return this.referenceDelegate.Ii(),r(o).next((a=>this.referenceDelegate.di(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Ei(e,t){return X.or(Object.values(this.ai).map((r=>()=>r.containsKey(e,t))))}}class fb extends Uk{constructor(e){super(),this.currentSequenceNumber=e}}class Cm{constructor(e){this.persistence=e,this.Ai=new km,this.Ri=null}static Vi(e){return new Cm(e)}get mi(){if(this.Ri)return this.Ri;throw Se(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),X.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),X.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),X.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.mi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.mi,(r=>{const o=_e.fromPath(r);return this.fi(e,o).next((a=>{a||t.removeEntry(o,Ae.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return X.or([()=>X.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Rh{constructor(e,t){this.persistence=e,this.gi=new Wi((r=>qk(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=nb(this,t)}static Vi(e,t){return new Rh(e,t)}Ii(){}di(e){return X.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}yr(e){let t=0;return this.gr(e,(r=>{t++})).next((()=>t))}gr(e,t){return X.forEach(this.gi,((r,o)=>this.Sr(e,r,o).next((a=>a?X.resolve():t(o)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ri(e,(u=>this.Sr(e,u,t).next((d=>{d||(r++,a.removeEntry(u,Ae.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),X.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),X.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),X.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),X.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=nh(e.data.value)),t}Sr(e,t,r){return X.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return X.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=o}static Es(e,t){let r=De(),o=De();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new bm(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return lI()?8:zk(oI())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,o){const a={result:null};return this.ps(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ys(e,t,o,r).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new pb;return this.ws(e,t,u).next((d=>{if(a.result=d,this.Rs)return this.Ss(e,t,u,d.size)}))})).next((()=>a.result))}Ss(e,t,r,o){return r.documentReadCount<this.Vs?(Qo()<=Fe.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",Ko(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),X.resolve()):(Qo()<=Fe.DEBUG&&ce("QueryEngine","Query:",Ko(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.fs*o?(Qo()<=Fe.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",Ko(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cr(t))):X.resolve())}ps(e,t){if(Xv(t))return X.resolve(null);let r=Cr(t);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Dp(t,null,"F"),r=Cr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const u=De(...a);return this.gs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,r).next((p=>{const m=this.bs(t,d);return this.Ds(t,m,u,p.readTime)?this.ps(e,Dp(t,null,"F")):this.vs(e,m,t,p)}))))})))))}ys(e,t,r,o){return Xv(t)||o.isEqual(Ae.min())?X.resolve(null):this.gs.getDocuments(e,r).next((a=>{const u=this.bs(t,a);return this.Ds(t,u,r,o)?X.resolve(null):(Qo()<=Fe.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ko(t)),this.vs(e,u,t,Fk(o,Xl)).next((d=>d)))}))}bs(e,t){let r=new Dt(wE(e));return t.forEach(((o,a)=>{Hh(e,a)&&(r=r.add(a))})),r}Ds(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}ws(e,t,r){return Qo()<=Fe.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",Ko(t)),this.gs.getDocumentsMatchingQuery(e,t,Qs.min(),r)}vs(e,t,r,o){return this.gs.getDocumentsMatchingQuery(e,r,o).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm="LocalStore",gb=3e8;class yb{constructor(e,t,r,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new dt(be),this.Ms=new Wi((a=>Em(a)),Sm),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ib(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function _b(n,e,t,r){return new yb(n,e,t,r)}async function HE(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next((a=>(o=a,t.Ns(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const u=[],d=[];let p=De();for(const m of o){u.push(m.batchId);for(const _ of m.mutations)p=p.add(_.key)}for(const m of a){d.push(m.batchId);for(const _ of m.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(r,p).next((m=>({Bs:m,removedBatchIds:u,addedBatchIds:d})))}))}))}function vb(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),a=t.Os.newChangeBuffer({trackRemovals:!0});return(function(d,p,m,_){const w=m.batch,E=w.keys();let A=X.resolve();return E.forEach((V=>{A=A.next((()=>_.getEntry(p,V))).next((N=>{const b=m.docVersions.get(V);He(b!==null,48541),N.version.compareTo(b)<0&&(w.applyToRemoteDocument(N,m),N.isValidDocument()&&(N.setReadTime(m.commitVersion),_.addEntry(N)))}))})),A.next((()=>d.mutationQueue.removeMutationBatch(p,w)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let p=De();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(p=p.add(d.batch.mutations[m].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(r,o)))}))}function qE(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function wb(n,e){const t=Re(n),r=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const d=[];e.targetChanges.forEach(((_,w)=>{const E=o.get(w);if(!E)return;d.push(t.hi.removeMatchingKeys(a,_.removedDocuments,w).next((()=>t.hi.addMatchingKeys(a,_.addedDocuments,w))));let A=E.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?A=A.withResumeToken(Kt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):_.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(_.resumeToken,r)),o=o.insert(w,A),(function(N,b,Q){return N.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=gb?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(E,A,_)&&d.push(t.hi.updateTargetData(a,A))}));let p=cs(),m=De();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))})),d.push(Eb(a,u,e.documentUpdates).next((_=>{p=_.Ls,m=_.ks}))),!r.isEqual(Ae.min())){const _=t.hi.getLastRemoteSnapshotVersion(a).next((w=>t.hi.setTargetsMetadata(a,a.currentSequenceNumber,r)));d.push(_)}return X.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,p,m))).next((()=>p))})).then((a=>(t.Fs=o,a)))}function Eb(n,e,t){let r=De(),o=De();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let u=cs();return t.forEach(((d,p)=>{const m=a.get(d);p.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(Ae.min())?(e.removeEntry(d,p.readTime),u=u.insert(d,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),u=u.insert(d,p)):ce(Pm,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",p.version)})),{Ls:u,ks:o}}))}function Sb(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=_m),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Tb(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return t.hi.getTargetData(r,e).next((a=>a?(o=a,X.resolve(o)):t.hi.allocateTargetId(r).next((u=>(o=new Bs(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=t.Fs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r}))}async function Fp(n,e,t){const r=Re(n),o=r.Fs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(u=>r.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!wa(u))throw u;ce(Pm,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(o.target)}function uw(n,e,t){const r=Re(n);let o=Ae.min(),a=De();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,m,_){const w=Re(p),E=w.Ms.get(_);return E!==void 0?X.resolve(w.Fs.get(E)):w.hi.getTargetData(m,_)})(r,u,Cr(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(u,d.targetId).next((p=>{a=p}))})).next((()=>r.Cs.getDocumentsMatchingQuery(u,e,t?o:Ae.min(),t?a:De()))).next((d=>(xb(r,cC(e),d),{documents:d,qs:a})))))}function xb(n,e,t){let r=n.xs.get(e)||Ae.min();t.forEach(((o,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.xs.set(e,r)}class cw{constructor(){this.activeTargetIds=gC()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ab{constructor(){this.Fo=new cw,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new cw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="ConnectivityMonitor";class dw{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ce(hw,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ce(hw,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uc=null;function $p(){return Uc===null?Uc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Uc++,"0x"+Uc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp="RestConnection",Ib={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class kb{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${o}`,this.Ko=this.databaseId.database===wh?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Wo(e,t,r,o,a){const u=$p(),d=this.Go(e,t.toUriEncodedString());ce(tp,`Sending RPC '${e}' ${u}:`,d,r);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(p,o,a);const{host:m}=new URL(d),_=pm(m);return this.jo(e,d,p,r,_).then((w=>(ce(tp,`Received RPC '${e}' ${u}: `,w),w)),(w=>{throw Gs(tp,`RPC '${e}' ${u} failed with error: `,w,"url: ",d,"request:",r),w}))}Jo(e,t,r,o,a,u){return this.Wo(e,t,r,o,a)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+_a})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,a)=>e[a]=o)),r&&r.headers.forEach(((o,a)=>e[a]=o))}Go(e,t){const r=Ib[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="WebChannelConnection";class bb extends kb{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,o,a){const u=$p();return new Promise(((d,p)=>{const m=new W0;m.setWithCredentials(!0),m.listenOnce(G0.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case th.NO_ERROR:const w=m.getResponseJson();ce(tn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(w)),d(w);break;case th.TIMEOUT:ce(tn,`RPC '${e}' ${u} timed out`),p(new oe(K.DEADLINE_EXCEEDED,"Request time out"));break;case th.HTTP_ERROR:const E=m.getStatus();if(ce(tn,`RPC '${e}' ${u} failed with status:`,E,"response text:",m.getResponseText()),E>0){let A=m.getResponseJson();Array.isArray(A)&&(A=A[0]);const V=A==null?void 0:A.error;if(V&&V.status&&V.message){const N=(function(Q){const B=Q.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(B)>=0?B:K.UNKNOWN})(V.status);p(new oe(N,V.message))}else p(new oe(K.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new oe(K.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{c_:e,streamId:u,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{ce(tn,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(o);ce(tn,`RPC '${e}' ${u} sending request:`,o),m.send(t,"POST",_,r,15)}))}P_(e,t,r){const o=$p(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=X0(),d=K0(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.zo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const _=a.join("");ce(tn,`Creating RPC '${e}' stream ${o}: ${_}`,p);const w=u.createWebChannel(_,p);this.T_(w);let E=!1,A=!1;const V=new Cb({Ho:b=>{A?ce(tn,`Not sending because RPC '${e}' stream ${o} is closed:`,b):(E||(ce(tn,`Opening RPC '${e}' stream ${o} transport.`),w.open(),E=!0),ce(tn,`RPC '${e}' stream ${o} sending:`,b),w.send(b))},Yo:()=>w.close()}),N=(b,Q,B)=>{b.listen(Q,(q=>{try{B(q)}catch(G){setTimeout((()=>{throw G}),0)}}))};return N(w,Rl.EventType.OPEN,(()=>{A||(ce(tn,`RPC '${e}' stream ${o} transport opened.`),V.s_())})),N(w,Rl.EventType.CLOSE,(()=>{A||(A=!0,ce(tn,`RPC '${e}' stream ${o} transport closed`),V.__(),this.I_(w))})),N(w,Rl.EventType.ERROR,(b=>{A||(A=!0,Gs(tn,`RPC '${e}' stream ${o} transport errored. Name:`,b.name,"Message:",b.message),V.__(new oe(K.UNAVAILABLE,"The operation could not be completed")))})),N(w,Rl.EventType.MESSAGE,(b=>{var Q;if(!A){const B=b.data[0];He(!!B,16349);const q=B,G=(q==null?void 0:q.error)||((Q=q[0])===null||Q===void 0?void 0:Q.error);if(G){ce(tn,`RPC '${e}' stream ${o} received error:`,G);const le=G.status;let re=(function(R){const P=St[R];if(P!==void 0)return NE(P)})(le),k=G.message;re===void 0&&(re=K.INTERNAL,k="Unknown error status: "+le+" with message "+G.message),A=!0,V.__(new oe(re,k)),w.close()}else ce(tn,`RPC '${e}' stream ${o} received:`,B),V.a_(B)}})),N(d,Q0.STAT_EVENT,(b=>{b.stat===Rp.PROXY?ce(tn,`RPC '${e}' stream ${o} detected buffering proxy`):b.stat===Rp.NOPROXY&&ce(tn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{V.o_()}),0),V}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function np(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(n){return new VC(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e,t,r=1e3,o=1.5,a=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=o,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-r);o>0&&ce("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="PersistentStream";class GE{constructor(e,t,r,o,a,u,d,p){this.Fi=e,this.w_=r,this.S_=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new WE(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===K.RESOURCE_EXHAUSTED?(us(t.toString()),us("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.b_===t&&this.W_(r,o)}),(r=>{e((()=>{const o=new oe(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(o)}))}))}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.e_((()=>{r((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{r((()=>this.G_(o)))})),this.stream.onMessage((o=>{r((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return ce(fw,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(ce(fw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Pb extends GE{constructor(e,t,r,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,u),this.serializer=a}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=MC(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Ae.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Ae.min():u.readTime?br(u.readTime):Ae.min()})(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=Mp(this.serializer),t.addTarget=(function(a,u){let d;const p=u.target;if(d=Pp(p)?{documents:jC(a,p)}:{query:BC(a,p).Vt},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=OE(a,u.resumeToken);const m=Vp(a,u.expectedCount);m!==null&&(d.expectedCount=m)}else if(u.snapshotVersion.compareTo(Ae.min())>0){d.readTime=Ah(a,u.snapshotVersion.toTimestamp());const m=Vp(a,u.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const r=zC(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=Mp(this.serializer),t.removeTarget=e,this.k_(t)}}class Nb extends GE{constructor(e,t,r,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,u),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return He(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,He(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){He(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=$C(e.writeResults,e.commitTime),r=br(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=Mp(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>FC(this.serializer,r)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{}class Vb extends Db{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new oe(K.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Wo(e,Op(t,r),o,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new oe(K.UNKNOWN,a.toString())}))}Jo(e,t,r,o,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Jo(e,Op(t,r),o,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new oe(K.UNKNOWN,u.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class Ob{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(us(t),this._a=!1):ce("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji="RemoteStore";class Lb{constructor(e,t,r,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo((u=>{r.enqueueAndForget((async()=>{Qi(this)&&(ce(ji,"Restarting streams for network reachability change."),await(async function(p){const m=Re(p);m.Ia.add(4),await hu(m),m.Aa.set("Unknown"),m.Ia.delete(4),await Kh(m)})(this))}))})),this.Aa=new Ob(r,o)}}async function Kh(n){if(Qi(n))for(const e of n.da)await e(!0)}async function hu(n){for(const e of n.da)await e(!1)}function QE(n,e){const t=Re(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Om(t)?Vm(t):Sa(t).x_()&&Dm(t,e))}function Nm(n,e){const t=Re(n),r=Sa(t);t.Ta.delete(e),r.x_()&&KE(t,e),t.Ta.size===0&&(r.x_()?r.B_():Qi(t)&&t.Aa.set("Unknown"))}function Dm(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Sa(n).H_(e)}function KE(n,e){n.Ra.$e(e),Sa(n).Y_(e)}function Vm(n){n.Ra=new bC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Sa(n).start(),n.Aa.aa()}function Om(n){return Qi(n)&&!Sa(n).M_()&&n.Ta.size>0}function Qi(n){return Re(n).Ia.size===0}function XE(n){n.Ra=void 0}async function Mb(n){n.Aa.set("Online")}async function Fb(n){n.Ta.forEach(((e,t)=>{Dm(n,e)}))}async function $b(n,e){XE(n),Om(n)?(n.Aa.la(e),Vm(n)):n.Aa.set("Unknown")}async function jb(n,e,t){if(n.Aa.set("Online"),e instanceof VE&&e.state===2&&e.cause)try{await(async function(o,a){const u=a.cause;for(const d of a.targetIds)o.Ta.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.Ta.delete(d),o.Ra.removeTarget(d))})(n,e)}catch(r){ce(ji,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ih(n,r)}else if(e instanceof ih?n.Ra.Ye(e):e instanceof DE?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Ae.min()))try{const r=await qE(n.localStore);t.compareTo(r)>=0&&await(function(a,u){const d=a.Ra.Pt(u);return d.targetChanges.forEach(((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const _=a.Ta.get(m);_&&a.Ta.set(m,_.withResumeToken(p.resumeToken,u))}})),d.targetMismatches.forEach(((p,m)=>{const _=a.Ta.get(p);if(!_)return;a.Ta.set(p,_.withResumeToken(Kt.EMPTY_BYTE_STRING,_.snapshotVersion)),KE(a,p);const w=new Bs(_.target,p,m,_.sequenceNumber);Dm(a,w)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(r){ce(ji,"Failed to raise snapshot:",r),await Ih(n,r)}}async function Ih(n,e,t){if(!wa(e))throw e;n.Ia.add(1),await hu(n),n.Aa.set("Offline"),t||(t=()=>qE(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ce(ji,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Kh(n)}))}function JE(n,e){return e().catch((t=>Ih(n,t,e)))}async function Xh(n){const e=Re(n),t=Ys(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:_m;for(;Bb(e);)try{const o=await Sb(e.localStore,r);if(o===null){e.Pa.length===0&&t.B_();break}r=o.batchId,Ub(e,o)}catch(o){await Ih(e,o)}YE(e)&&ZE(e)}function Bb(n){return Qi(n)&&n.Pa.length<10}function Ub(n,e){n.Pa.push(e);const t=Ys(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function YE(n){return Qi(n)&&!Ys(n).M_()&&n.Pa.length>0}function ZE(n){Ys(n).start()}async function zb(n){Ys(n).na()}async function Hb(n){const e=Ys(n);for(const t of n.Pa)e.X_(t.mutations)}async function qb(n,e,t){const r=n.Pa.shift(),o=Am.from(r,e,t);await JE(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Xh(n)}async function Wb(n,e){e&&Ys(n).Z_&&await(async function(r,o){if((function(u){return kC(u)&&u!==K.ABORTED})(o.code)){const a=r.Pa.shift();Ys(r).N_(),await JE(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,o))),await Xh(r)}})(n,e),YE(n)&&ZE(n)}async function pw(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),ce(ji,"RemoteStore received new credentials");const r=Qi(t);t.Ia.add(3),await hu(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Kh(t)}async function Gb(n,e){const t=Re(n);e?(t.Ia.delete(2),await Kh(t)):e||(t.Ia.add(2),await hu(t),t.Aa.set("Unknown"))}function Sa(n){return n.Va||(n.Va=(function(t,r,o){const a=Re(t);return a.ia(),new Pb(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Zo:Mb.bind(null,n),e_:Fb.bind(null,n),n_:$b.bind(null,n),J_:jb.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),Om(n)?Vm(n):n.Aa.set("Unknown")):(await n.Va.stop(),XE(n))}))),n.Va}function Ys(n){return n.ma||(n.ma=(function(t,r,o){const a=Re(t);return a.ia(),new Nb(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:zb.bind(null,n),n_:Wb.bind(null,n),ea:Hb.bind(null,n),ta:qb.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await Xh(n)):(await n.ma.stop(),n.Pa.length>0&&(ce(ji,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,t,r,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=a,this.deferred=new is,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,a){const u=Date.now()+r,d=new Lm(e,t,u,o,a);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mm(n,e){if(us("AsyncQueue",`${e}: ${n}`),wa(n))return new oe(K.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{static emptySet(e){return new sa(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||_e.comparator(t.key,r.key):(t,r)=>_e.comparator(t.key,r.key),this.keyedMap=Il(),this.sortedSet=new dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof sa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=r.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new sa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(){this.fa=new dt(_e.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Se(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,r)=>{e.push(r)})),e}}class pa{constructor(e,t,r,o,a,u,d,p,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,o,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new pa(e,t,sa.emptySet(t),u,r,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class Kb{constructor(){this.queries=gw(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const o=Re(t),a=o.queries;o.queries=gw(),a.forEach(((u,d)=>{for(const p of d.wa)p.onError(r)}))})(this,new oe(K.ABORTED,"Firestore shutting down"))}}function gw(){return new Wi((n=>vE(n)),zh)}async function e1(n,e){const t=Re(n);let r=3;const o=e.query;let a=t.queries.get(o);a?!a.Sa()&&e.ba()&&(r=2):(a=new Qb,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await t.onListen(o,!0);break;case 1:a.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=Mm(u,`Initialization of query '${Ko(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.wa.push(e),e.va(t.onlineState),a.ya&&e.Ca(a.ya)&&Fm(t)}async function t1(n,e){const t=Re(n),r=e.query;let o=3;const a=t.queries.get(r);if(a){const u=a.wa.indexOf(e);u>=0&&(a.wa.splice(u,1),a.wa.length===0?o=e.ba()?0:1:!a.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Xb(n,e){const t=Re(n);let r=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const d of u.wa)d.Ca(o)&&(r=!0);u.ya=o}}r&&Fm(t)}function Jb(n,e,t){const r=Re(n),o=r.queries.get(e);if(o)for(const a of o.wa)a.onError(t);r.queries.delete(e)}function Fm(n){n.Da.forEach((e=>{e.next()}))}var jp,yw;(yw=jp||(jp={})).Fa="default",yw.Cache="cache";class n1{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new pa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=pa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==jp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e){this.key=e}}class s1{constructor(e){this.key=e}}class Yb{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=De(),this.mutatedKeys=De(),this.Xa=wE(e),this.eu=new sa(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new mw,o=t?t.eu:this.eu;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,w)=>{const E=o.get(_),A=Hh(this.query,w)?w:null,V=!!E&&this.mutatedKeys.has(E.key),N=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let b=!1;E&&A?E.data.isEqual(A.data)?V!==N&&(r.track({type:3,doc:A}),b=!0):this.iu(E,A)||(r.track({type:2,doc:A}),b=!0,(p&&this.Xa(A,p)>0||m&&this.Xa(A,m)<0)&&(d=!0)):!E&&A?(r.track({type:0,doc:A}),b=!0):E&&!A&&(r.track({type:1,doc:E}),b=!0,(p||m)&&(d=!0)),b&&(A?(u=u.add(A),a=N?a.add(_):a.delete(_)):(u=u.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),a=a.delete(_.key),r.track({type:1,doc:_})}return{eu:u,ru:r,Ds:d,mutatedKeys:a}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const u=e.ru.pa();u.sort(((_,w)=>(function(A,V){const N=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{At:b})}};return N(A)-N(V)})(_.type,w.type)||this.Xa(_.doc,w.doc))),this.su(r),o=o!=null&&o;const d=t&&!o?this.ou():[],p=this.Za.size===0&&this.current&&!o?1:0,m=p!==this.Ya;return this.Ya=p,u.length!==0||m?{snapshot:new pa(this.query,e.eu,a,u,e.mutatedKeys,p===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new mw,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=De(),this.eu.forEach((r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))}));const t=[];return e.forEach((r=>{this.Za.has(r)||t.push(new s1(r))})),this.Za.forEach((r=>{e.has(r)||t.push(new r1(r))})),t}uu(e){this.Ha=e.qs,this.Za=De();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return pa.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const $m="SyncEngine";class Zb{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class eP{constructor(e){this.key=e,this.lu=!1}}class tP{constructor(e,t,r,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new Wi((d=>vE(d)),zh),this.Tu=new Map,this.Iu=new Set,this.du=new dt(_e.comparator),this.Eu=new Map,this.Au=new km,this.Ru={},this.Vu=new Map,this.mu=fa.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function nP(n,e,t=!0){const r=c1(n);let o;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.cu()):o=await i1(r,e,t,!0),o}async function rP(n,e){const t=c1(n);await i1(t,e,!0,!1)}async function i1(n,e,t,r){const o=await Tb(n.localStore,Cr(e)),a=o.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return r&&(d=await sP(n,e,a,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&QE(n.remoteStore,o),d}async function sP(n,e,t,r,o){n.gu=(w,E,A)=>(async function(N,b,Q,B){let q=b.view.nu(Q);q.Ds&&(q=await uw(N.localStore,b.query,!1).then((({documents:k})=>b.view.nu(k,q))));const G=B&&B.targetChanges.get(b.targetId),le=B&&B.targetMismatches.get(b.targetId)!=null,re=b.view.applyChanges(q,N.isPrimaryClient,G,le);return vw(N,b.targetId,re._u),re.snapshot})(n,w,E,A);const a=await uw(n.localStore,e,!0),u=new Yb(e,a.qs),d=u.nu(a.documents),p=cu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",o),m=u.applyChanges(d,n.isPrimaryClient,p);vw(n,t,m._u);const _=new Zb(e,t,u);return n.Pu.set(e,_),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),m.snapshot}async function iP(n,e,t){const r=Re(n),o=r.Pu.get(e),a=r.Tu.get(o.targetId);if(a.length>1)return r.Tu.set(o.targetId,a.filter((u=>!zh(u,e)))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Fp(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),t&&Nm(r.remoteStore,o.targetId),Bp(r,o.targetId)})).catch(va)):(Bp(r,o.targetId),await Fp(r.localStore,o.targetId,!0))}async function oP(n,e){const t=Re(n),r=t.Pu.get(e),o=t.Tu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Nm(t.remoteStore,r.targetId))}async function aP(n,e,t){const r=pP(n);try{const o=await(function(u,d){const p=Re(u),m=it.now(),_=d.reduce(((A,V)=>A.add(V.key)),De());let w,E;return p.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let V=cs(),N=De();return p.Os.getEntries(A,_).next((b=>{V=b,V.forEach(((Q,B)=>{B.isValidDocument()||(N=N.add(Q))}))})).next((()=>p.localDocuments.getOverlayedDocuments(A,V))).next((b=>{w=b;const Q=[];for(const B of d){const q=TC(B,w.get(B.key).overlayedDocument);q!=null&&Q.push(new Gi(B.key,q,hE(q.value.mapValue),os.exists(!0)))}return p.mutationQueue.addMutationBatch(A,m,Q,d)})).next((b=>{E=b;const Q=b.applyToLocalDocumentSet(w,N);return p.documentOverlayCache.saveOverlays(A,b.batchId,Q)}))})).then((()=>({batchId:E.batchId,changes:SE(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(u,d,p){let m=u.Ru[u.currentUser.toKey()];m||(m=new dt(be)),m=m.insert(d,p),u.Ru[u.currentUser.toKey()]=m})(r,o.batchId,t),await du(r,o.changes),await Xh(r.remoteStore)}catch(o){const a=Mm(o,"Failed to persist write");t.reject(a)}}async function o1(n,e){const t=Re(n);try{const r=await wb(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const u=t.Eu.get(a);u&&(He(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.lu=!0:o.modifiedDocuments.size>0?He(u.lu,14607):o.removedDocuments.size>0&&(He(u.lu,42227),u.lu=!1))})),await du(t,r,e)}catch(r){await va(r)}}function _w(n,e,t){const r=Re(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.Pu.forEach(((a,u)=>{const d=u.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const p=Re(u);p.onlineState=d;let m=!1;p.queries.forEach(((_,w)=>{for(const E of w.wa)E.va(d)&&(m=!0)})),m&&Fm(p)})(r.eventManager,e),o.length&&r.hu.J_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function lP(n,e,t){const r=Re(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Eu.get(e),a=o&&o.key;if(a){let u=new dt(_e.comparator);u=u.insert(a,sn.newNoDocument(a,Ae.min()));const d=De().add(a),p=new Gh(Ae.min(),new Map,new dt(be),u,d);await o1(r,p),r.du=r.du.remove(a),r.Eu.delete(e),jm(r)}else await Fp(r.localStore,e,!1).then((()=>Bp(r,e,t))).catch(va)}async function uP(n,e){const t=Re(n),r=e.batch.batchId;try{const o=await vb(t.localStore,e);l1(t,r,null),a1(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await du(t,o)}catch(o){await va(o)}}async function cP(n,e,t){const r=Re(n);try{const o=await(function(u,d){const p=Re(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let _;return p.mutationQueue.lookupMutationBatch(m,d).next((w=>(He(w!==null,37113),_=w.keys(),p.mutationQueue.removeMutationBatch(m,w)))).next((()=>p.mutationQueue.performConsistencyCheck(m))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(m,_,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,_))).next((()=>p.localDocuments.getDocuments(m,_)))}))})(r.localStore,e);l1(r,e,t),a1(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await du(r,o)}catch(o){await va(o)}}function a1(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function l1(n,e,t){const r=Re(n);let o=r.Ru[r.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),r.Ru[r.currentUser.toKey()]=o}}function Bp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((r=>{n.Au.containsKey(r)||u1(n,r)}))}function u1(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Nm(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),jm(n))}function vw(n,e,t){for(const r of t)r instanceof r1?(n.Au.addReference(r.key,e),hP(n,r)):r instanceof s1?(ce($m,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||u1(n,r.key)):Se(19791,{yu:r})}function hP(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(ce($m,"New document in limbo: "+t),n.Iu.add(r),jm(n))}function jm(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new _e(tt.fromString(e)),r=n.mu.next();n.Eu.set(r,new eP(t)),n.du=n.du.insert(t,r),QE(n.remoteStore,new Bs(Cr(Tm(t.path)),r,"TargetPurposeLimboResolution",jh.ue))}}async function du(n,e,t){const r=Re(n),o=[],a=[],u=[];r.Pu.isEmpty()||(r.Pu.forEach(((d,p)=>{u.push(r.gu(p,e,t).then((m=>{var _;if((m||t)&&r.isPrimaryClient){const w=m?!m.fromCache:(_=t==null?void 0:t.targetChanges.get(p.targetId))===null||_===void 0?void 0:_.current;r.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(m){o.push(m);const w=bm.Es(p.targetId,m);a.push(w)}})))})),await Promise.all(u),r.hu.J_(o),await(async function(p,m){const _=Re(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>X.forEach(m,(E=>X.forEach(E.Is,(A=>_.persistence.referenceDelegate.addReference(w,E.targetId,A))).next((()=>X.forEach(E.ds,(A=>_.persistence.referenceDelegate.removeReference(w,E.targetId,A)))))))))}catch(w){if(!wa(w))throw w;ce(Pm,"Failed to update sequence numbers: "+w)}for(const w of m){const E=w.targetId;if(!w.fromCache){const A=_.Fs.get(E),V=A.snapshotVersion,N=A.withLastLimboFreeSnapshotVersion(V);_.Fs=_.Fs.insert(E,N)}}})(r.localStore,a))}async function dP(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){ce($m,"User change. New user:",e.toKey());const r=await HE(t.localStore,e);t.currentUser=e,(function(a,u){a.Vu.forEach((d=>{d.forEach((p=>{p.reject(new oe(K.CANCELLED,u))}))})),a.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await du(t,r.Bs)}}function fP(n,e){const t=Re(n),r=t.Eu.get(e);if(r&&r.lu)return De().add(r.key);{let o=De();const a=t.Tu.get(e);if(!a)return o;for(const u of a){const d=t.Pu.get(u);o=o.unionWith(d.view.tu)}return o}}function c1(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=o1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lP.bind(null,e),e.hu.J_=Xb.bind(null,e.eventManager),e.hu.pu=Jb.bind(null,e.eventManager),e}function pP(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cP.bind(null,e),e}class kh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return _b(this.persistence,new mb,e.initialUser,this.serializer)}Du(e){return new zE(Cm.Vi,this.serializer)}bu(e){return new Ab}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kh.provider={build:()=>new kh};class mP extends kh{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){He(this.persistence.referenceDelegate instanceof Rh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new eb(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?wn.withCacheSize(this.cacheSizeBytes):wn.DEFAULT;return new zE((r=>Rh.Vi(r,t)),this.serializer)}}class Up{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_w(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=dP.bind(null,this.syncEngine),await Gb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Kb})()}createDatastore(e){const t=Qh(e.databaseInfo.databaseId),r=(function(a){return new bb(a)})(e.databaseInfo);return(function(a,u,d,p){return new Vb(a,u,d,p)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,o,a,u,d){return new Lb(r,o,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>_w(this.syncEngine,t,0)),(function(){return dw.C()?new dw:new Rb})())}createSyncEngine(e,t){return(function(o,a,u,d,p,m,_){const w=new tP(o,a,u,d,p,m);return _&&(w.fu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const a=Re(o);ce(ji,"RemoteStore shutting down."),a.Ia.add(5),await hu(a),a.Ea.shutdown(),a.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Up.provider={build:()=>new Up};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):us("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs="FirestoreClient";class gP{constructor(e,t,r,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=rn.UNAUTHENTICATED,this.clientId=ym.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async u=>{ce(Zs,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(ce(Zs,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new is;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Mm(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function rp(n,e){n.asyncQueue.verifyOperationInProgress(),ce(Zs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async o=>{r.isEqual(o)||(await HE(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>{Gs("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{ce("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{Gs("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),n._offlineComponents=e}async function ww(n,e){n.asyncQueue.verifyOperationInProgress();const t=await yP(n);ce(Zs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>pw(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,o)=>pw(e.remoteStore,o))),n._onlineComponents=e}async function yP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ce(Zs,"Using user provided OfflineComponentProvider");try{await rp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===K.FAILED_PRECONDITION||o.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Gs("Error using user provided cache. Falling back to memory cache: "+t),await rp(n,new kh)}}else ce(Zs,"Using default OfflineComponentProvider"),await rp(n,new mP(void 0));return n._offlineComponents}async function d1(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ce(Zs,"Using user provided OnlineComponentProvider"),await ww(n,n._uninitializedComponentsProvider._online)):(ce(Zs,"Using default OnlineComponentProvider"),await ww(n,new Up))),n._onlineComponents}function _P(n){return d1(n).then((e=>e.syncEngine))}async function f1(n){const e=await d1(n),t=e.eventManager;return t.onListen=nP.bind(null,e.syncEngine),t.onUnlisten=iP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=rP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=oP.bind(null,e.syncEngine),t}function vP(n,e,t={}){const r=new is;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,p,m){const _=new h1({next:E=>{_.Ou(),u.enqueueAndForget((()=>t1(a,w)));const A=E.docs.has(d);!A&&E.fromCache?m.reject(new oe(K.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&E.fromCache&&p&&p.source==="server"?m.reject(new oe(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(E)},error:E=>m.reject(E)}),w=new n1(Tm(d.path),_,{includeMetadataChanges:!0,ka:!0});return e1(a,w)})(await f1(n),n.asyncQueue,e,t,r))),r.promise}function wP(n,e,t={}){const r=new is;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,p,m){const _=new h1({next:E=>{_.Ou(),u.enqueueAndForget((()=>t1(a,w))),E.fromCache&&p.source==="server"?m.reject(new oe(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(E)},error:E=>m.reject(E)}),w=new n1(d,_,{includeMetadataChanges:!0,ka:!0});return e1(a,w)})(await f1(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1="firestore.googleapis.com",Sw=!0;class Tw{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new oe(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=m1,this.ssl=Sw}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Sw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=UE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<YC)throw new oe(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Mk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=p1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new oe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new oe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new oe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jh{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new kk;switch(r.type){case"firstParty":return new Nk(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new oe(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Ew.get(t);r&&(ce("ComponentProvider","Removing Datastore"),Ew.delete(t),r.terminate())})(this),Promise.resolve()}}function EP(n,e,t,r={}){var o;n=$i(n,Jh);const a=pm(e),u=n._getSettings(),d=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),p=`${e}:${t}`;a&&(tI(`https://${p}`),iI("Firestore",!0)),u.host!==m1&&u.host!==p&&Gs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},u),{host:p,ssl:a,emulatorOptions:r});if(!gh(m,d)&&(n._setSettings(m),r.mockUserToken)){let _,w;if(typeof r.mockUserToken=="string")_=r.mockUserToken,w=rn.MOCK_USER;else{_=nI(r.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new oe(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new rn(E)}n._authCredentials=new Ck(new Y0(_,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ki(this.firestore,e,this._query)}}class At{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new At(this.firestore,e,this._key)}toJSON(){return{type:At._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(lu(t,At._jsonSchema))return new At(e,r||null,new _e(tt.fromString(t.referencePath)))}}At._jsonSchemaVersion="firestore/documentReference/1.0",At._jsonSchema={type:xt("string",At._jsonSchemaVersion),referencePath:xt("string")};class qs extends Ki{constructor(e,t,r){super(e,t,Tm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new At(this.firestore,null,new _e(e))}withConverter(e){return new qs(this.firestore,e,this._path)}}function SP(n,e,...t){if(n=ua(n),eE("collection","path",e),n instanceof Jh){const r=tt.fromString(e,...t);return Lv(r),new qs(n,null,r)}{if(!(n instanceof At||n instanceof qs))throw new oe(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tt.fromString(e,...t));return Lv(r),new qs(n.firestore,null,r)}}function g1(n,e,...t){if(n=ua(n),arguments.length===1&&(e=ym.newId()),eE("doc","path",e),n instanceof Jh){const r=tt.fromString(e,...t);return Ov(r),new At(n,null,new _e(r))}{if(!(n instanceof At||n instanceof qs))throw new oe(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tt.fromString(e,...t));return Ov(r),new At(n.firestore,n instanceof qs?n.converter:null,new _e(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw="AsyncQueue";class Aw{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new WE(this,"async_queue_retry"),this.oc=()=>{const r=np();r&&ce(xw,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=np();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=np();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new is;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!wa(e))throw e;ce(xw,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((r=>{throw this.tc=r,this.nc=!1,us("INTERNAL UNHANDLED ERROR: ",Rw(r)),r})).then((r=>(this.nc=!1,r))))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=Lm.createAndSchedule(this,e,t,r,(a=>this.lc(a)));return this.ec.push(o),o}ac(){this.tc&&Se(47125,{hc:Rw(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function Rw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Yh extends Jh{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new Aw,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Aw(e),this._firestoreClient=void 0,await e}}}function TP(n,e){const t=typeof n=="object"?n:mk(),r=typeof n=="string"?n:wh,o=ck(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const a=ZR("firestore");a&&EP(o,...a)}return o}function Bm(n){if(n._terminated)throw new oe(K.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||xP(n),n._firestoreClient}function xP(n){var e,t,r;const o=n._freezeSettings(),a=(function(d,p,m,_){return new Qk(d,p,m,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,p1(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new gP(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&(function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Un(Kt.fromBase64String(e))}catch(t){throw new oe(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Un(Kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Un._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(lu(e,Un._jsonSchema))return Un.fromBase64String(e.bytes)}}Un._jsonSchemaVersion="firestore/bytes/1.0",Un._jsonSchema={type:xt("string",Un._jsonSchemaVersion),bytes:xt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new oe(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new oe(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new oe(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pr._jsonSchemaVersion}}static fromJSON(e){if(lu(e,Pr._jsonSchema))return new Pr(e.latitude,e.longitude)}}Pr._jsonSchemaVersion="firestore/geoPoint/1.0",Pr._jsonSchema={type:xt("string",Pr._jsonSchemaVersion),latitude:xt("number"),longitude:xt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==o[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Nr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(lu(e,Nr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Nr(e.vectorValues);throw new oe(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Nr._jsonSchemaVersion="firestore/vectorValue/1.0",Nr._jsonSchema={type:xt("string",Nr._jsonSchemaVersion),vectorValues:xt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP=/^__.*__$/;class RP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Gi(e,this.data,this.fieldMask,t,this.fieldTransforms):new uu(e,this.data,t,this.fieldTransforms)}}function _1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{Ec:n})}}class zm{constructor(e,t,r,o,a,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new zm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:r,mc:!1});return o.fc(e),o}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:r,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Ch(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(_1(this.Ec)&&AP.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class IP{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Qh(e)}Dc(e,t,r,o=!1){return new zm({Ec:e,methodName:t,bc:r,path:Qt.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function v1(n){const e=n._freezeSettings(),t=Qh(n._databaseId);return new IP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function kP(n,e,t,r,o,a={}){const u=n.Dc(a.merge||a.mergeFields?2:0,e,t,o);S1("Data must be an object, but it was:",u,r);const d=w1(r,u);let p,m;if(a.merge)p=new lr(u.fieldMask),m=u.fieldTransforms;else if(a.mergeFields){const _=[];for(const w of a.mergeFields){const E=bP(e,w,t);if(!u.contains(E))throw new oe(K.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);NP(_,E)||_.push(E)}p=new lr(_),m=u.fieldTransforms.filter((w=>p.covers(w.field)))}else p=null,m=u.fieldTransforms;return new RP(new Bn(d),p,m)}function CP(n,e,t,r=!1){return Hm(t,n.Dc(r?4:3,e))}function Hm(n,e){if(E1(n=ua(n)))return S1("Unsupported field value:",e,n),w1(n,e);if(n instanceof y1)return(function(r,o){if(!_1(o.Ec))throw o.wc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,o){const a=[];let u=0;for(const d of r){let p=Hm(d,o.yc(u));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),u++}return{arrayValue:{values:a}}})(n,e)}return(function(r,o){if((r=ua(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return yC(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=it.fromDate(r);return{timestampValue:Ah(o.serializer,a)}}if(r instanceof it){const a=new it(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ah(o.serializer,a)}}if(r instanceof Pr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Un)return{bytesValue:OE(o.serializer,r._byteString)};if(r instanceof At){const a=o.databaseId,u=r.firestore._databaseId;if(!u.isEqual(a))throw o.wc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Im(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Nr)return(function(u,d){return{mapValue:{fields:{[uE]:{stringValue:cE},[Eh]:{arrayValue:{values:u.toArray().map((m=>{if(typeof m!="number")throw d.wc("VectorValues must only contain numeric values.");return xm(d.serializer,m)}))}}}}}})(r,o);throw o.wc(`Unsupported field value: ${$h(r)}`)})(n,e)}function w1(n,e){const t={};return rE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qi(n,((r,o)=>{const a=Hm(o,e.Vc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function E1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof it||n instanceof Pr||n instanceof Un||n instanceof At||n instanceof y1||n instanceof Nr)}function S1(n,e,t){if(!E1(t)||!tE(t)){const r=$h(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function bP(n,e,t){if((e=ua(e))instanceof Um)return e._internalPath;if(typeof e=="string")return T1(n,e);throw Ch("Field path arguments must be of type string or ",n,!1,void 0,t)}const PP=new RegExp("[~\\*/\\[\\]]");function T1(n,e,t){if(e.search(PP)>=0)throw Ch(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Um(...e.split("."))._internalPath}catch{throw Ch(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ch(n,e,t,r,o){const a=r&&!r.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(a||u)&&(p+=" (found",a&&(p+=` in field ${r}`),u&&(p+=` in document ${o}`),p+=")"),new oe(K.INVALID_ARGUMENT,d+n+p)}function NP(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,t,r,o,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new At(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new DP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(qm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class DP extends x1{data(){return super.data()}}function qm(n,e){return typeof e=="string"?T1(n,e):e instanceof Um?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new oe(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wm{}class A1 extends Wm{}function OP(n,e,...t){let r=[];e instanceof Wm&&r.push(e),r=r.concat(t),(function(a){const u=a.filter((p=>p instanceof Qm)).length,d=a.filter((p=>p instanceof Gm)).length;if(u>1||u>0&&d>0)throw new oe(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)n=o._apply(n);return n}class Gm extends A1{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Gm(e,t,r)}_apply(e){const t=this._parse(e);return R1(e._query,t),new Ki(e.firestore,e.converter,Np(e._query,t))}_parse(e){const t=v1(e.firestore);return(function(a,u,d,p,m,_,w){let E;if(m.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new oe(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){kw(w,_);const V=[];for(const N of w)V.push(Iw(p,a,N));E={arrayValue:{values:V}}}else E=Iw(p,a,w)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||kw(w,_),E=CP(d,u,w,_==="in"||_==="not-in");return Tt.create(m,_,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Qm extends Wm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Qm(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:hr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,a){let u=o;const d=a.getFlattenedFilters();for(const p of d)R1(u,p),u=Np(u,p)})(e._query,t),new Ki(e.firestore,e.converter,Np(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Km extends A1{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Km(e,t)}_apply(e){const t=(function(o,a,u){if(o.startAt!==null)throw new oe(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new oe(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new eu(a,u)})(e._query,this._field,this._direction);return new Ki(e.firestore,e.converter,(function(o,a){const u=o.explicitOrderBy.concat([a]);return new Ea(o.path,o.collectionGroup,u,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function LP(n,e="asc"){const t=e,r=qm("orderBy",n);return Km._create(r,t)}function Iw(n,e,t){if(typeof(t=ua(t))=="string"){if(t==="")throw new oe(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_E(e)&&t.indexOf("/")!==-1)throw new oe(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(tt.fromString(t));if(!_e.isDocumentKey(r))throw new oe(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Hv(n,new _e(r))}if(t instanceof At)return Hv(n,t._key);throw new oe(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$h(t)}.`)}function kw(n,e){if(!Array.isArray(n)||n.length===0)throw new oe(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function R1(n,e){const t=(function(o,a){for(const u of o)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new oe(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class MP{convertValue(e,t="none"){switch(Js(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return qi(e,((o,a)=>{r[o]=this.convertValue(a,t)})),r}convertVectorValue(e){var t,r,o;const a=(o=(r=(t=e.fields)===null||t===void 0?void 0:t[Eh].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map((u=>vt(u.doubleValue)));return new Nr(a)}convertGeoPoint(e){return new Pr(vt(e.latitude),vt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Uh(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Jl(e));default:return null}}convertTimestamp(e){const t=Ks(e);return new it(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=tt.fromString(e);He(BE(r),9688,{name:e});const o=new Yl(r.get(1),r.get(3)),a=new _e(r.popFirst(5));return o.isEqual(t)||us(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FP(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class Cl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mi extends x1{constructor(e,t,r,o,a,u){super(e,t,r,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new oh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(qm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Mi._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Mi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Mi._jsonSchema={type:xt("string",Mi._jsonSchemaVersion),bundleSource:xt("string","DocumentSnapshot"),bundleName:xt("string"),bundle:xt("string")};class oh extends Mi{data(e={}){return super.data(e)}}class ia{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Cl(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new oh(this._firestore,this._userDataWriter,r.key,r,new Cl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new oe(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const p=new oh(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Cl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const p=new oh(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Cl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,_=-1;return d.type!==0&&(m=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),_=u.indexOf(d.doc.key)),{type:$P(d.type),doc:p,oldIndex:m,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ia._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ym.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],o=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function $P(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(n){n=$i(n,At);const e=$i(n.firestore,Yh);return vP(Bm(e),n._key).then((t=>HP(e,n,t)))}ia._jsonSchemaVersion="firestore/querySnapshot/1.0",ia._jsonSchema={type:xt("string",ia._jsonSchemaVersion),bundleSource:xt("string","QuerySnapshot"),bundleName:xt("string"),bundle:xt("string")};class I1 extends MP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Un(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,t)}}function BP(n){n=$i(n,Ki);const e=$i(n.firestore,Yh),t=Bm(e),r=new I1(e);return VP(n._query),wP(t,n._query).then((o=>new ia(e,r,n,o)))}function UP(n,e,t){n=$i(n,At);const r=$i(n.firestore,Yh),o=FP(n.converter,e);return zP(r,[kP(v1(r),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,os.none())])}function zP(n,e){return(function(r,o){const a=new is;return r.asyncQueue.enqueueAndForget((async()=>aP(await _P(r),o,a))),a.promise})(Bm(n),e)}function HP(n,e,t){const r=t.docs.get(e._key),o=new I1(n);return new Mi(n,o,e._key,r,new Cl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){_a=o})(pk),_h(new Ql("firestore",((r,{instanceIdentifier:o,options:a})=>{const u=r.getProvider("app").getImmediate(),d=new Yh(new bk(r.getProvider("auth-internal")),new Dk(u,r.getProvider("app-check-internal")),(function(m,_){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new oe(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yl(m.options.projectId,_)})(u,o),u);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),ra(bv,Pv,e),ra(bv,Pv,"esm2017")})();const qP={apiKey:void 0,authDomain:void 0,projectId:void 0},WP=U0(qP),Xm=TP(WP);async function GP(n,e){const t=g1(Xm,"summaries",n),r={...e,createdAt:new Date().toISOString()},o=new Promise((a,u)=>setTimeout(()=>u(new Error("Firestore save timed out after 15s")),15e3));await Promise.race([UP(t,r),o])}async function QP(n){const e=await jP(g1(Xm,"summaries",n));return e.exists()?{id:e.id,...e.data()}:null}async function KP(){const n=OP(SP(Xm,"summaries"),LP("createdAt","desc"));return(await BP(n)).docs.map(t=>({id:t.id,...t.data()}))}const XP="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let JP=(n=21)=>{let e="",t=crypto.getRandomValues(new Uint8Array(n|=0));for(;n--;)e+=XP[t[n]&63];return e};const zp="RFC3986",Hp={RFC1738:n=>String(n).replace(/%20/g,"+"),RFC3986:n=>String(n)},YP="RFC1738",ZP=Array.isArray,Tr=(()=>{const n=[];for(let e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n})(),sp=1024,e2=(n,e,t,r,o)=>{if(n.length===0)return n;let a=n;if(typeof n=="symbol"?a=Symbol.prototype.toString.call(n):typeof n!="string"&&(a=String(n)),t==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(d){return"%26%23"+parseInt(d.slice(2),16)+"%3B"});let u="";for(let d=0;d<a.length;d+=sp){const p=a.length>=sp?a.slice(d,d+sp):a,m=[];for(let _=0;_<p.length;++_){let w=p.charCodeAt(_);if(w===45||w===46||w===95||w===126||w>=48&&w<=57||w>=65&&w<=90||w>=97&&w<=122||o===YP&&(w===40||w===41)){m[m.length]=p.charAt(_);continue}if(w<128){m[m.length]=Tr[w];continue}if(w<2048){m[m.length]=Tr[192|w>>6]+Tr[128|w&63];continue}if(w<55296||w>=57344){m[m.length]=Tr[224|w>>12]+Tr[128|w>>6&63]+Tr[128|w&63];continue}_+=1,w=65536+((w&1023)<<10|p.charCodeAt(_)&1023),m[m.length]=Tr[240|w>>18]+Tr[128|w>>12&63]+Tr[128|w>>6&63]+Tr[128|w&63]}u+=m.join("")}return u};function t2(n){return!n||typeof n!="object"?!1:!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))}function Cw(n,e){if(ZP(n)){const t=[];for(let r=0;r<n.length;r+=1)t.push(e(n[r]));return t}return e(n)}const n2=Object.prototype.hasOwnProperty,k1={brackets(n){return String(n)+"[]"},comma:"comma",indices(n,e){return String(n)+"["+e+"]"},repeat(n){return String(n)}},Rr=Array.isArray,r2=Array.prototype.push,C1=function(n,e){r2.apply(n,Rr(e)?e:[e])},s2=Date.prototype.toISOString,Nt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e2,encodeValuesOnly:!1,format:zp,formatter:Hp[zp],indices:!1,serializeDate(n){return s2.call(n)},skipNulls:!1,strictNullHandling:!1};function i2(n){return typeof n=="string"||typeof n=="number"||typeof n=="boolean"||typeof n=="symbol"||typeof n=="bigint"}const ip={};function b1(n,e,t,r,o,a,u,d,p,m,_,w,E,A,V,N,b,Q){let B=n,q=Q,G=0,le=!1;for(;(q=q.get(ip))!==void 0&&!le;){const P=q.get(n);if(G+=1,typeof P<"u"){if(P===G)throw new RangeError("Cyclic object value");le=!0}typeof q.get(ip)>"u"&&(G=0)}if(typeof m=="function"?B=m(e,B):B instanceof Date?B=E==null?void 0:E(B):t==="comma"&&Rr(B)&&(B=Cw(B,function(P){return P instanceof Date?E==null?void 0:E(P):P})),B===null){if(a)return p&&!N?p(e,Nt.encoder,b,"key",A):e;B=""}if(i2(B)||t2(B)){if(p){const P=N?e:p(e,Nt.encoder,b,"key",A);return[(V==null?void 0:V(P))+"="+(V==null?void 0:V(p(B,Nt.encoder,b,"value",A)))]}return[(V==null?void 0:V(e))+"="+(V==null?void 0:V(String(B)))]}const re=[];if(typeof B>"u")return re;let k;if(t==="comma"&&Rr(B))N&&p&&(B=Cw(B,p)),k=[{value:B.length>0?B.join(",")||null:void 0}];else if(Rr(m))k=m;else{const P=Object.keys(B);k=_?P.sort(_):P}const x=d?String(e).replace(/\./g,"%2E"):String(e),R=r&&Rr(B)&&B.length===1?x+"[]":x;if(o&&Rr(B)&&B.length===0)return R+"[]";for(let P=0;P<k.length;++P){const D=k[P],L=typeof D=="object"&&typeof D.value<"u"?D.value:B[D];if(u&&L===null)continue;const C=w&&d?D.replace(/\./g,"%2E"):D,Qe=Rr(B)?typeof t=="function"?t(R,C):R:R+(w?"."+C:"["+C+"]");Q.set(n,G);const pt=new WeakMap;pt.set(ip,Q),C1(re,b1(L,Qe,t,r,o,a,u,d,t==="comma"&&N&&Rr(B)?null:p,m,_,w,E,A,V,N,b,pt))}return re}function o2(n=Nt){if(typeof n.allowEmptyArrays<"u"&&typeof n.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof n.encodeDotInKeys<"u"&&typeof n.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(n.encoder!==null&&typeof n.encoder<"u"&&typeof n.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=n.charset||Nt.charset;if(typeof n.charset<"u"&&n.charset!=="utf-8"&&n.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let t=zp;if(typeof n.format<"u"){if(!n2.call(Hp,n.format))throw new TypeError("Unknown format option provided.");t=n.format}const r=Hp[t];let o=Nt.filter;(typeof n.filter=="function"||Rr(n.filter))&&(o=n.filter);let a;if(n.arrayFormat&&n.arrayFormat in k1?a=n.arrayFormat:"indices"in n?a=n.indices?"indices":"repeat":a=Nt.arrayFormat,"commaRoundTrip"in n&&typeof n.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const u=typeof n.allowDots>"u"?n.encodeDotInKeys?!0:Nt.allowDots:!!n.allowDots;return{addQueryPrefix:typeof n.addQueryPrefix=="boolean"?n.addQueryPrefix:Nt.addQueryPrefix,allowDots:u,allowEmptyArrays:typeof n.allowEmptyArrays=="boolean"?!!n.allowEmptyArrays:Nt.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof n.charsetSentinel=="boolean"?n.charsetSentinel:Nt.charsetSentinel,commaRoundTrip:!!n.commaRoundTrip,delimiter:typeof n.delimiter>"u"?Nt.delimiter:n.delimiter,encode:typeof n.encode=="boolean"?n.encode:Nt.encode,encodeDotInKeys:typeof n.encodeDotInKeys=="boolean"?n.encodeDotInKeys:Nt.encodeDotInKeys,encoder:typeof n.encoder=="function"?n.encoder:Nt.encoder,encodeValuesOnly:typeof n.encodeValuesOnly=="boolean"?n.encodeValuesOnly:Nt.encodeValuesOnly,filter:o,format:t,formatter:r,serializeDate:typeof n.serializeDate=="function"?n.serializeDate:Nt.serializeDate,skipNulls:typeof n.skipNulls=="boolean"?n.skipNulls:Nt.skipNulls,sort:typeof n.sort=="function"?n.sort:null,strictNullHandling:typeof n.strictNullHandling=="boolean"?n.strictNullHandling:Nt.strictNullHandling}}function a2(n,e={}){let t=n;const r=o2(e);let o,a;typeof r.filter=="function"?(a=r.filter,t=a("",t)):Rr(r.filter)&&(a=r.filter,o=a);const u=[];if(typeof t!="object"||t===null)return"";const d=k1[r.arrayFormat],p=d==="comma"&&r.commaRoundTrip;o||(o=Object.keys(t)),r.sort&&o.sort(r.sort);const m=new WeakMap;for(let E=0;E<o.length;++E){const A=o[E];r.skipNulls&&t[A]===null||C1(u,b1(t[A],A,d,p,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,m))}const _=u.join(r.delimiter);let w=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?w+="utf8=%26%2310003%3B&":w+="utf8=%E2%9C%93&"),_.length>0?w+_:""}const Yo="4.104.0";let bw=!1,Bl,P1,N1,qp,D1,V1,O1,L1,M1;function l2(n,e={auto:!1}){if(bw)throw new Error(`you must \`import 'openai/shims/${n.kind}'\` before importing anything else from openai`);if(Bl)throw new Error(`can't \`import 'openai/shims/${n.kind}'\` after \`import 'openai/shims/${Bl}'\``);bw=e.auto,Bl=n.kind,P1=n.fetch,N1=n.FormData,qp=n.File,D1=n.ReadableStream,V1=n.getMultipartRequestOptions,O1=n.getDefaultAgent,L1=n.fileFromPath,M1=n.isFsReadStream}class u2{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function c2({manuallyImported:n}={}){const e=n?"You may need to use polyfills":"Add one of these imports before your first `import  from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let t,r,o,a;try{t=fetch,r=Request,o=Response,a=Headers}catch(u){throw new Error(`this environment is missing the following Web Fetch API type: ${u.message}. ${e}`)}return{kind:"web",fetch:t,Request:r,Response:o,Headers:a,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(u,d)=>({...d,body:new u2(u)}),getDefaultAgent:u=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:u=>!1}}const F1=()=>{Bl||l2(c2(),{auto:!0})};F1();class Ee extends Error{}class Xt extends Ee{constructor(e,t,r,o){super(`${Xt.makeMessage(e,t,r)}`),this.status=e,this.headers=o,this.request_id=o==null?void 0:o["x-request-id"],this.error=t;const a=t;this.code=a==null?void 0:a.code,this.param=a==null?void 0:a.param,this.type=a==null?void 0:a.type}static makeMessage(e,t,r){const o=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,t,r,o){if(!e||!o)return new Zh({message:r,cause:Gp(t)});const a=t==null?void 0:t.error;return e===400?new $1(e,a,r,o):e===401?new j1(e,a,r,o):e===403?new B1(e,a,r,o):e===404?new U1(e,a,r,o):e===409?new z1(e,a,r,o):e===422?new H1(e,a,r,o):e===429?new q1(e,a,r,o):e>=500?new W1(e,a,r,o):new Xt(e,a,r,o)}}class zn extends Xt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Zh extends Xt{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class Jm extends Zh{constructor({message:e}={}){super({message:e??"Request timed out."})}}class $1 extends Xt{}class j1 extends Xt{}class B1 extends Xt{}class U1 extends Xt{}class z1 extends Xt{}class H1 extends Xt{}class q1 extends Xt{}class W1 extends Xt{}class G1 extends Ee{constructor(){super("Could not parse response content as the length limit was reached")}}class Q1 extends Ee{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var zc=function(n,e,t,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!o:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(n,t):o?o.value=t:e.set(n,t),t},Ni=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},Cn;class ed{constructor(){Cn.set(this,void 0),this.buffer=new Uint8Array,zc(this,Cn,null,"f")}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e;let r=new Uint8Array(this.buffer.length+t.length);r.set(this.buffer),r.set(t,this.buffer.length),this.buffer=r;const o=[];let a;for(;(a=h2(this.buffer,Ni(this,Cn,"f")))!=null;){if(a.carriage&&Ni(this,Cn,"f")==null){zc(this,Cn,a.index,"f");continue}if(Ni(this,Cn,"f")!=null&&(a.index!==Ni(this,Cn,"f")+1||a.carriage)){o.push(this.decodeText(this.buffer.slice(0,Ni(this,Cn,"f")-1))),this.buffer=this.buffer.slice(Ni(this,Cn,"f")),zc(this,Cn,null,"f");continue}const u=Ni(this,Cn,"f")!==null?a.preceding-1:a.preceding,d=this.decodeText(this.buffer.slice(0,u));o.push(d),this.buffer=this.buffer.slice(a.index),zc(this,Cn,null,"f")}return o}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new Ee(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new Ee(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new Ee("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}Cn=new WeakMap;ed.NEWLINE_CHARS=new Set([`
`,"\r"]);ed.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function h2(n,e){for(let o=e??0;o<n.length;o++){if(n[o]===10)return{preceding:o,index:o+1,carriage:!1};if(n[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function d2(n){for(let r=0;r<n.length-1;r++){if(n[r]===10&&n[r+1]===10||n[r]===13&&n[r+1]===13)return r+2;if(n[r]===13&&n[r+1]===10&&r+3<n.length&&n[r+2]===13&&n[r+3]===10)return r+4}return-1}function K1(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class kr{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let r=!1;async function*o(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let a=!1;try{for await(const u of f2(e,t))if(!a){if(u.data.startsWith("[DONE]")){a=!0;continue}if(u.event===null||u.event.startsWith("response.")||u.event.startsWith("transcript.")){let d;try{d=JSON.parse(u.data)}catch(p){throw console.error("Could not parse message into JSON:",u.data),console.error("From chunk:",u.raw),p}if(d&&d.error)throw new Xt(void 0,d.error,void 0,nS(e.headers));yield d}else{let d;try{d=JSON.parse(u.data)}catch(p){throw console.error("Could not parse message into JSON:",u.data),console.error("From chunk:",u.raw),p}if(u.event=="error")throw new Xt(void 0,d.error,d.message,void 0);yield{event:u.event,data:d}}}a=!0}catch(u){if(u instanceof Error&&u.name==="AbortError")return;throw u}finally{a||t.abort()}}return new kr(o,t)}static fromReadableStream(e,t){let r=!1;async function*o(){const u=new ed,d=K1(e);for await(const p of d)for(const m of u.decode(p))yield m;for(const p of u.flush())yield p}async function*a(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let u=!1;try{for await(const d of o())u||d&&(yield JSON.parse(d));u=!0}catch(d){if(d instanceof Error&&d.name==="AbortError")return;throw d}finally{u||t.abort()}}return new kr(a,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],r=this.iterator(),o=a=>({next:()=>{if(a.length===0){const u=r.next();e.push(u),t.push(u)}return a.shift()}});return[new kr(()=>o(e),this.controller),new kr(()=>o(t),this.controller)]}toReadableStream(){const e=this;let t;const r=new TextEncoder;return new D1({async start(){t=e[Symbol.asyncIterator]()},async pull(o){try{const{value:a,done:u}=await t.next();if(u)return o.close();const d=r.encode(JSON.stringify(a)+`
`);o.enqueue(d)}catch(a){o.error(a)}},async cancel(){var o;await((o=t.return)==null?void 0:o.call(t))}})}}async function*f2(n,e){if(!n.body)throw e.abort(),new Ee("Attempted to iterate over a response with no body");const t=new m2,r=new ed,o=K1(n.body);for await(const a of p2(o))for(const u of r.decode(a)){const d=t.decode(u);d&&(yield d)}for(const a of r.flush()){const u=t.decode(a);u&&(yield u)}}async function*p2(n){let e=new Uint8Array;for await(const t of n){if(t==null)continue;const r=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?new TextEncoder().encode(t):t;let o=new Uint8Array(e.length+r.length);o.set(e),o.set(r,e.length),e=o;let a;for(;(a=d2(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class m2{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,r,o]=g2(e,":");return o.startsWith(" ")&&(o=o.substring(1)),t==="event"?this.event=o:t==="data"&&this.data.push(o),null}}function g2(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}const X1=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function",J1=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&td(n),td=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",y2=n=>J1(n)||X1(n)||M1(n);async function Y1(n,e,t){var o;if(n=await n,J1(n))return n;if(X1(n)){const a=await n.blob();e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()??"unknown_file");const u=td(a)?[await a.arrayBuffer()]:[a];return new qp(u,e,t)}const r=await _2(n);if(e||(e=w2(n)??"unknown_file"),!(t!=null&&t.type)){const a=(o=r[0])==null?void 0:o.type;typeof a=="string"&&(t={...t,type:a})}return new qp(r,e,t)}async function _2(n){var t;let e=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)e.push(n);else if(td(n))e.push(await n.arrayBuffer());else if(E2(n))for await(const r of n)e.push(r);else throw new Error(`Unexpected data type: ${typeof n}; constructor: ${(t=n==null?void 0:n.constructor)==null?void 0:t.name}; props: ${v2(n)}`);return e}function v2(n){return`[${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}function w2(n){var e;return op(n.name)||op(n.filename)||((e=op(n.path))==null?void 0:e.split(/[\\/]/).pop())}const op=n=>{if(typeof n=="string")return n;if(typeof Buffer<"u"&&n instanceof Buffer)return String(n)},E2=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function",Pw=n=>n&&typeof n=="object"&&n.body&&n[Symbol.toStringTag]==="MultipartBody",Bi=async n=>{const e=await S2(n.body);return V1(e,n)},S2=async n=>{const e=new N1;return await Promise.all(Object.entries(n||{}).map(([t,r])=>Wp(e,t,r))),e},Wp=async(n,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")n.append(e,String(t));else if(y2(t)){const r=await Y1(t);n.append(e,r)}else if(Array.isArray(t))await Promise.all(t.map(r=>Wp(n,e+"[]",r)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([r,o])=>Wp(n,`${e}[${r}]`,o)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}};var oa={},T2=function(n,e,t,r,o){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t},x2=function(n,e,t,r){if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},Hc;F1();async function Z1(n){var u;const{response:e}=n;if(n.options.stream)return Ws("response",e.status,e.url,e.headers,e.body),n.options.__streamClass?n.options.__streamClass.fromSSEResponse(e,n.controller):kr.fromSSEResponse(e,n.controller);if(e.status===204)return null;if(n.options.__binaryResponse)return e;const t=e.headers.get("content-type"),r=(u=t==null?void 0:t.split(";")[0])==null?void 0:u.trim();if((r==null?void 0:r.includes("application/json"))||(r==null?void 0:r.endsWith("+json"))){const d=await e.json();return Ws("response",e.status,e.url,e.headers,d),eS(d,e)}const a=await e.text();return Ws("response",e.status,e.url,e.headers,a),a}function eS(n,e){return!n||typeof n!="object"||Array.isArray(n)?n:Object.defineProperty(n,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}class nd extends Promise{constructor(e,t=Z1){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new nd(this.responsePromise,async t=>eS(e(await this.parseResponse(t),t),t.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class A2{constructor({baseURL:e,maxRetries:t=2,timeout:r=6e5,httpAgent:o,fetch:a}){this.baseURL=e,this.maxRetries=ap("maxRetries",t),this.timeout=ap("timeout",r),this.httpAgent=o,this.fetch=a??P1}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...b2(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${V2()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then(async o=>{const a=o&&td(o==null?void 0:o.body)?new DataView(await o.body.arrayBuffer()):(o==null?void 0:o.body)instanceof DataView?o.body:(o==null?void 0:o.body)instanceof ArrayBuffer?new DataView(o.body):o&&ArrayBuffer.isView(o==null?void 0:o.body)?new DataView(o.body.buffer):o==null?void 0:o.body;return{method:e,path:t,...o,body:a}}))}getAPIList(e,t,r){return this.requestAPIList(t,{method:"get",path:e,...r})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:t=0}={}){var N;const r={...e},{method:o,path:a,query:u,headers:d={}}=r,p=ArrayBuffer.isView(r.body)||r.__binaryRequest&&typeof r.body=="string"?r.body:Pw(r.body)?r.body.body:r.body?JSON.stringify(r.body,null,2):null,m=this.calculateContentLength(p),_=this.buildURL(a,u);"timeout"in r&&ap("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const w=r.httpAgent??this.httpAgent??O1(_),E=r.timeout+1e3;typeof((N=w==null?void 0:w.options)==null?void 0:N.timeout)=="number"&&E>(w.options.timeout??0)&&(w.options.timeout=E),this.idempotencyHeader&&o!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),d[this.idempotencyHeader]=e.idempotencyKey);const A=this.buildHeaders({options:r,headers:d,contentLength:m,retryCount:t});return{req:{method:o,...p&&{body:p},headers:A,...w&&{agent:w},signal:r.signal??null},url:_,timeout:r.timeout}}buildHeaders({options:e,headers:t,contentLength:r,retryCount:o}){const a={};r&&(a["content-length"]=r);const u=this.defaultHeaders(e);return Ow(a,u),Ow(a,t),Pw(e.body)&&Bl!=="node"&&delete a["content-type"],Wc(u,"x-stainless-retry-count")===void 0&&Wc(t,"x-stainless-retry-count")===void 0&&(a["x-stainless-retry-count"]=String(o)),Wc(u,"x-stainless-timeout")===void 0&&Wc(t,"x-stainless-timeout")===void 0&&e.timeout&&(a["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(a,t),a}async prepareOptions(e){}async prepareRequest(e,{url:t,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(t=>[...t])):{...e}:{}}makeStatusError(e,t,r,o){return Xt.generate(e,t,r,o)}request(e,t=null){return new nd(this.makeRequest(e,t))}async makeRequest(e,t){var w,E;const r=await e,o=r.maxRetries??this.maxRetries;t==null&&(t=o),await this.prepareOptions(r);const{req:a,url:u,timeout:d}=this.buildRequest(r,{retryCount:o-t});if(await this.prepareRequest(a,{url:u,options:r}),Ws("request",u,r,a.headers),(w=r.signal)!=null&&w.aborted)throw new zn;const p=new AbortController,m=await this.fetchWithTimeout(u,a,d,p).catch(Gp);if(m instanceof Error){if((E=r.signal)!=null&&E.aborted)throw new zn;if(t)return this.retryRequest(r,t);throw m.name==="AbortError"?new Jm:new Zh({cause:m})}const _=nS(m.headers);if(!m.ok){if(t&&this.shouldRetry(m)){const B=`retrying, ${t} attempts remaining`;return Ws(`response (error; ${B})`,m.status,u,_),this.retryRequest(r,t,_)}const A=await m.text().catch(B=>Gp(B).message),V=P2(A),N=V?void 0:A;throw Ws(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,m.status,u,_,N),this.makeStatusError(m.status,V,N,_)}return{response:m,options:r,controller:p}}requestAPIList(e,t){const r=this.makeRequest(t,null);return new R2(this,r,e)}buildURL(e,t){const r=D2(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return rS(o)||(t={...o,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(r.search=this.stringifyQuery(t)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([t,r])=>typeof r<"u").map(([t,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(t)}=`;throw new Ee(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,r,o){const{signal:a,...u}=t||{};a&&a.addEventListener("abort",()=>o.abort());const d=setTimeout(()=>o.abort(),r),p={signal:o.signal,...u};return p.method&&(p.method=p.method.toUpperCase()),this.fetch.call(void 0,e,p).finally(()=>{clearTimeout(d)})}shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,r){let o;const a=r==null?void 0:r["retry-after-ms"];if(a){const d=parseFloat(a);Number.isNaN(d)||(o=d)}const u=r==null?void 0:r["retry-after"];if(u&&!o){const d=parseFloat(u);Number.isNaN(d)?o=Date.parse(u)-Date.now():o=d*1e3}if(!(o&&0<=o&&o<60*1e3)){const d=e.maxRetries??this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(t,d)}return await fu(o),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,u=Math.min(.5*Math.pow(2,a),8),d=1-Math.random()*.25;return u*d*1e3}getUserAgent(){return`${this.constructor.name}/JS ${Yo}`}}class tS{constructor(e,t,r,o){Hc.set(this,void 0),T2(this,Hc,e),this.options=o,this.response=t,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new Ee("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t={...this.options};if("params"in e&&typeof t.query=="object")t.query={...t.query,...e.params};else if("url"in e){const r=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[o,a]of r)e.url.searchParams.set(o,a);t.query=void 0,t.path=e.url.toString()}return await x2(this,Hc,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Hc=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class R2 extends nd{constructor(e,t,r){super(t,async o=>new r(e,o.response,await Z1(o),o.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}}const nS=n=>new Proxy(Object.fromEntries(n.entries()),{get(e,t){const r=t.toString();return e[r.toLowerCase()]||e[r]}}),I2={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},ft=n=>typeof n=="object"&&n!==null&&!rS(n)&&Object.keys(n).every(e=>sS(I2,e)),k2=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yo,"X-Stainless-OS":Dw(Deno.build.os),"X-Stainless-Arch":Nw(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yo,"X-Stainless-OS":Dw(process.platform),"X-Stainless-Arch":Nw(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const n=C2();return n?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${n.browser}`,"X-Stainless-Runtime-Version":n.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function C2(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const r=t.exec(navigator.userAgent);if(r){const o=r[1]||0,a=r[2]||0,u=r[3]||0;return{browser:e,version:`${o}.${a}.${u}`}}}return null}const Nw=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",Dw=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Vw;const b2=()=>Vw??(Vw=k2()),P2=n=>{try{return JSON.parse(n)}catch{return}},N2=/^[a-z][a-z0-9+.-]*:/i,D2=n=>N2.test(n),fu=n=>new Promise(e=>setTimeout(e,n)),ap=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ee(`${n} must be an integer`);if(e<0)throw new Ee(`${n} must be a positive integer`);return e},Gp=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null)try{return new Error(JSON.stringify(n))}catch{}return new Error(n)},qc=n=>{var e,t,r,o;if(typeof process<"u")return((e=oa==null?void 0:oa[n])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(o=(r=(t=Deno.env)==null?void 0:t.get)==null?void 0:r.call(t,n))==null?void 0:o.trim()};function rS(n){if(!n)return!0;for(const e in n)return!1;return!0}function sS(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Ow(n,e){for(const t in e){if(!sS(e,t))continue;const r=t.toLowerCase();if(!r)continue;const o=e[t];o===null?delete n[r]:o!==void 0&&(n[r]=o)}}const Lw=new Set(["authorization","api-key"]);function Ws(n,...e){if(typeof process<"u"&&(oa==null?void 0:oa.DEBUG)==="true"){const t=e.map(r=>{if(!r)return r;if(r.headers){const a={...r,headers:{...r.headers}};for(const u in r.headers)Lw.has(u.toLowerCase())&&(a.headers[u]="REDACTED");return a}let o=null;for(const a in r)Lw.has(a.toLowerCase())&&(o??(o={...r}),o[a]="REDACTED");return o??r});console.log(`OpenAI:DEBUG:${n}`,...t)}}const V2=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)}),O2=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",L2=n=>typeof(n==null?void 0:n.get)=="function",Wc=(n,e)=>{var r;const t=e.toLowerCase();if(L2(n)){const o=((r=e[0])==null?void 0:r.toUpperCase())+e.substring(1).replace(/([^\w])(\w)/g,(a,u,d)=>u+d.toUpperCase());for(const a of[e,t,e.toUpperCase(),o]){const u=n.get(a);if(u)return u}}for(const[o,a]of Object.entries(n))if(o.toLowerCase()===t)return Array.isArray(a)?(a.length<=1||console.warn(`Received ${a.length} entries for the ${e} header, using the first entry.`),a[0]):a},M2=n=>{if(typeof Buffer<"u"){const e=Buffer.from(n,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(n),t=e.length,r=new Uint8Array(t);for(let o=0;o<t;o++)r[o]=e.charCodeAt(o);return Array.from(new Float32Array(r.buffer))}};function lp(n){return n!=null&&typeof n=="object"&&!Array.isArray(n)}class rd extends tS{constructor(e,t,r,o){super(e,t,r,o),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class Vt extends tS{constructor(e,t,r,o){super(e,t,r,o),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){var r;const e=this.getPaginatedItems();if(!e.length)return null;const t=(r=e[e.length-1])==null?void 0:r.id;return t?{params:{after:t}}:null}}class Te{constructor(e){this._client=e}}let iS=class extends Te{list(e,t={},r){return ft(t)?this.list(e,{},t):this._client.getAPIList(`/chat/completions/${e}/messages`,F2,{query:t,...r})}},sd=class extends Te{constructor(){super(...arguments),this.messages=new iS(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(`/chat/completions/${e}`,t)}update(e,t,r){return this._client.post(`/chat/completions/${e}`,{body:t,...r})}list(e={},t){return ft(e)?this.list({},e):this._client.getAPIList("/chat/completions",id,{query:e,...t})}del(e,t){return this._client.delete(`/chat/completions/${e}`,t)}};class id extends Vt{}class F2 extends Vt{}sd.ChatCompletionsPage=id;sd.Messages=iS;let od=class extends Te{constructor(){super(...arguments),this.completions=new sd(this._client)}};od.Completions=sd;od.ChatCompletionsPage=id;class oS extends Te{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:{Accept:"application/octet-stream",...t==null?void 0:t.headers},__binaryResponse:!0})}}class aS extends Te{create(e,t){return this._client.post("/audio/transcriptions",Bi({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}}))}}class lS extends Te{create(e,t){return this._client.post("/audio/translations",Bi({body:e,...t,__metadata:{model:e.model}}))}}class pu extends Te{constructor(){super(...arguments),this.transcriptions=new aS(this._client),this.translations=new lS(this._client),this.speech=new oS(this._client)}}pu.Transcriptions=aS;pu.Translations=lS;pu.Speech=oS;class Ym extends Te{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(e={},t){return ft(e)?this.list({},e):this._client.getAPIList("/batches",Zm,{query:e,...t})}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}}class Zm extends Vt{}Ym.BatchesPage=Zm;var or=function(n,e,t,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!o:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(n,t):o?o.value=t:e.set(n,t),t},ct=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},Qp,ah,lh,bl,Pl,uh,Nl,ts,Dl,bh,Ph,Zo,uS;class eg{constructor(){Qp.add(this),this.controller=new AbortController,ah.set(this,void 0),lh.set(this,()=>{}),bl.set(this,()=>{}),Pl.set(this,void 0),uh.set(this,()=>{}),Nl.set(this,()=>{}),ts.set(this,{}),Dl.set(this,!1),bh.set(this,!1),Ph.set(this,!1),Zo.set(this,!1),or(this,ah,new Promise((e,t)=>{or(this,lh,e,"f"),or(this,bl,t,"f")}),"f"),or(this,Pl,new Promise((e,t)=>{or(this,uh,e,"f"),or(this,Nl,t,"f")}),"f"),ct(this,ah,"f").catch(()=>{}),ct(this,Pl,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},ct(this,Qp,"m",uS).bind(this))},0)}_connected(){this.ended||(ct(this,lh,"f").call(this),this._emit("connect"))}get ended(){return ct(this,Dl,"f")}get errored(){return ct(this,bh,"f")}get aborted(){return ct(this,Ph,"f")}abort(){this.controller.abort()}on(e,t){return(ct(this,ts,"f")[e]||(ct(this,ts,"f")[e]=[])).push({listener:t}),this}off(e,t){const r=ct(this,ts,"f")[e];if(!r)return this;const o=r.findIndex(a=>a.listener===t);return o>=0&&r.splice(o,1),this}once(e,t){return(ct(this,ts,"f")[e]||(ct(this,ts,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,r)=>{or(this,Zo,!0,"f"),e!=="error"&&this.once("error",r),this.once(e,t)})}async done(){or(this,Zo,!0,"f"),await ct(this,Pl,"f")}_emit(e,...t){if(ct(this,Dl,"f"))return;e==="end"&&(or(this,Dl,!0,"f"),ct(this,uh,"f").call(this));const r=ct(this,ts,"f")[e];if(r&&(ct(this,ts,"f")[e]=r.filter(o=>!o.once),r.forEach(({listener:o})=>o(...t))),e==="abort"){const o=t[0];!ct(this,Zo,"f")&&!(r!=null&&r.length)&&Promise.reject(o),ct(this,bl,"f").call(this,o),ct(this,Nl,"f").call(this,o),this._emit("end");return}if(e==="error"){const o=t[0];!ct(this,Zo,"f")&&!(r!=null&&r.length)&&Promise.reject(o),ct(this,bl,"f").call(this,o),ct(this,Nl,"f").call(this,o),this._emit("end")}}_emitFinal(){}}ah=new WeakMap,lh=new WeakMap,bl=new WeakMap,Pl=new WeakMap,uh=new WeakMap,Nl=new WeakMap,ts=new WeakMap,Dl=new WeakMap,bh=new WeakMap,Ph=new WeakMap,Zo=new WeakMap,Qp=new WeakSet,uS=function(e){if(or(this,bh,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new zn),e instanceof zn)return or(this,Ph,!0,"f"),this._emit("abort",e);if(e instanceof Ee)return this._emit("error",e);if(e instanceof Error){const t=new Ee(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new Ee(String(e)))};var ye=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},kn=function(n,e,t,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!o:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(n,t):o?o.value=t:e.set(n,t),t},Wt,Kp,Ir,ch,ar,Li,ea,Vi,Nh,bn,hh,dh,Ul,Vl,Ol,Mw,Fw,$w,jw,Bw,Uw,zw;class ur extends eg{constructor(){super(...arguments),Wt.add(this),Kp.set(this,[]),Ir.set(this,{}),ch.set(this,{}),ar.set(this,void 0),Li.set(this,void 0),ea.set(this,void 0),Vi.set(this,void 0),Nh.set(this,void 0),bn.set(this,void 0),hh.set(this,void 0),dh.set(this,void 0),Ul.set(this,void 0)}[(Kp=new WeakMap,Ir=new WeakMap,ch=new WeakMap,ar=new WeakMap,Li=new WeakMap,ea=new WeakMap,Vi=new WeakMap,Nh=new WeakMap,bn=new WeakMap,hh=new WeakMap,dh=new WeakMap,Ul=new WeakMap,Wt=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("event",o=>{const a=t.shift();a?a.resolve(o):e.push(o)}),this.on("end",()=>{r=!0;for(const o of t)o.resolve(void 0);t.length=0}),this.on("abort",o=>{r=!0;for(const a of t)a.reject(o);t.length=0}),this.on("error",o=>{r=!0;for(const a of t)a.reject(o);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,u)=>t.push({resolve:a,reject:u})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new ur;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){var a;const r=t==null?void 0:t.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const o=kr.fromReadableStream(e,this.controller);for await(const u of o)ye(this,Wt,"m",Vl).call(this,u);if((a=o.controller.signal)!=null&&a.aborted)throw new zn;return this._addRun(ye(this,Wt,"m",Ol).call(this))}toReadableStream(){return new kr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,r,o,a){const u=new ur;return u._run(()=>u._runToolAssistantStream(e,t,r,o,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),u}async _createToolAssistantStream(e,t,r,o,a){var m;const u=a==null?void 0:a.signal;u&&(u.aborted&&this.controller.abort(),u.addEventListener("abort",()=>this.controller.abort()));const d={...o,stream:!0},p=await e.submitToolOutputs(t,r,d,{...a,signal:this.controller.signal});this._connected();for await(const _ of p)ye(this,Wt,"m",Vl).call(this,_);if((m=p.controller.signal)!=null&&m.aborted)throw new zn;return this._addRun(ye(this,Wt,"m",Ol).call(this))}static createThreadAssistantStream(e,t,r){const o=new ur;return o._run(()=>o._threadAssistantStream(e,t,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),o}static createAssistantStream(e,t,r,o){const a=new ur;return a._run(()=>a._runAssistantStream(e,t,r,{...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return ye(this,hh,"f")}currentRun(){return ye(this,dh,"f")}currentMessageSnapshot(){return ye(this,ar,"f")}currentRunStepSnapshot(){return ye(this,Ul,"f")}async finalRunSteps(){return await this.done(),Object.values(ye(this,Ir,"f"))}async finalMessages(){return await this.done(),Object.values(ye(this,ch,"f"))}async finalRun(){if(await this.done(),!ye(this,Li,"f"))throw Error("Final run was not received.");return ye(this,Li,"f")}async _createThreadAssistantStream(e,t,r){var d;const o=r==null?void 0:r.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const a={...t,stream:!0},u=await e.createAndRun(a,{...r,signal:this.controller.signal});this._connected();for await(const p of u)ye(this,Wt,"m",Vl).call(this,p);if((d=u.controller.signal)!=null&&d.aborted)throw new zn;return this._addRun(ye(this,Wt,"m",Ol).call(this))}async _createAssistantStream(e,t,r,o){var p;const a=o==null?void 0:o.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const u={...r,stream:!0},d=await e.create(t,u,{...o,signal:this.controller.signal});this._connected();for await(const m of d)ye(this,Wt,"m",Vl).call(this,m);if((p=d.controller.signal)!=null&&p.aborted)throw new zn;return this._addRun(ye(this,Wt,"m",Ol).call(this))}static accumulateDelta(e,t){for(const[r,o]of Object.entries(t)){if(!e.hasOwnProperty(r)){e[r]=o;continue}let a=e[r];if(a==null){e[r]=o;continue}if(r==="index"||r==="type"){e[r]=o;continue}if(typeof a=="string"&&typeof o=="string")a+=o;else if(typeof a=="number"&&typeof o=="number")a+=o;else if(lp(a)&&lp(o))a=this.accumulateDelta(a,o);else if(Array.isArray(a)&&Array.isArray(o)){if(a.every(u=>typeof u=="string"||typeof u=="number")){a.push(...o);continue}for(const u of o){if(!lp(u))throw new Error(`Expected array delta entry to be an object but got: ${u}`);const d=u.index;if(d==null)throw console.error(u),new Error("Expected array delta entry to have an `index` property");if(typeof d!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${d}`);const p=a[d];p==null?a.push(u):a[d]=this.accumulateDelta(p,u)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${o}, accValue: ${a}`);e[r]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,t,r){return await this._createThreadAssistantStream(t,e,r)}async _runAssistantStream(e,t,r,o){return await this._createAssistantStream(t,e,r,o)}async _runToolAssistantStream(e,t,r,o,a){return await this._createToolAssistantStream(r,e,t,o,a)}}Vl=function(e){if(!this.ended)switch(kn(this,hh,e,"f"),ye(this,Wt,"m",$w).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":ye(this,Wt,"m",zw).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ye(this,Wt,"m",Fw).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":ye(this,Wt,"m",Mw).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Ol=function(){if(this.ended)throw new Ee("stream has ended, this shouldn't happen");if(!ye(this,Li,"f"))throw Error("Final run has not been received");return ye(this,Li,"f")},Mw=function(e){const[t,r]=ye(this,Wt,"m",Bw).call(this,e,ye(this,ar,"f"));kn(this,ar,t,"f"),ye(this,ch,"f")[t.id]=t;for(const o of r){const a=t.content[o.index];(a==null?void 0:a.type)=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const o of e.data.delta.content){if(o.type=="text"&&o.text){let a=o.text,u=t.content[o.index];if(u&&u.type=="text")this._emit("textDelta",a,u.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(o.index!=ye(this,ea,"f")){if(ye(this,Vi,"f"))switch(ye(this,Vi,"f").type){case"text":this._emit("textDone",ye(this,Vi,"f").text,ye(this,ar,"f"));break;case"image_file":this._emit("imageFileDone",ye(this,Vi,"f").image_file,ye(this,ar,"f"));break}kn(this,ea,o.index,"f")}kn(this,Vi,t.content[o.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(ye(this,ea,"f")!==void 0){const o=e.data.content[ye(this,ea,"f")];if(o)switch(o.type){case"image_file":this._emit("imageFileDone",o.image_file,ye(this,ar,"f"));break;case"text":this._emit("textDone",o.text,ye(this,ar,"f"));break}}ye(this,ar,"f")&&this._emit("messageDone",e.data),kn(this,ar,void 0,"f")}},Fw=function(e){const t=ye(this,Wt,"m",jw).call(this,e);switch(kn(this,Ul,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&t.step_details.type=="tool_calls")for(const a of r.step_details.tool_calls)a.index==ye(this,Nh,"f")?this._emit("toolCallDelta",a,t.step_details.tool_calls[a.index]):(ye(this,bn,"f")&&this._emit("toolCallDone",ye(this,bn,"f")),kn(this,Nh,a.index,"f"),kn(this,bn,t.step_details.tool_calls[a.index],"f"),ye(this,bn,"f")&&this._emit("toolCallCreated",ye(this,bn,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":kn(this,Ul,void 0,"f"),e.data.step_details.type=="tool_calls"&&ye(this,bn,"f")&&(this._emit("toolCallDone",ye(this,bn,"f")),kn(this,bn,void 0,"f")),this._emit("runStepDone",e.data,t);break}},$w=function(e){ye(this,Kp,"f").push(e),this._emit("event",e)},jw=function(e){switch(e.event){case"thread.run.step.created":return ye(this,Ir,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=ye(this,Ir,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const o=ur.accumulateDelta(t,r.delta);ye(this,Ir,"f")[e.data.id]=o}return ye(this,Ir,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":ye(this,Ir,"f")[e.data.id]=e.data;break}if(ye(this,Ir,"f")[e.data.id])return ye(this,Ir,"f")[e.data.id];throw new Error("No snapshot available")},Bw=function(e,t){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let o=e.data;if(o.delta.content)for(const a of o.delta.content)if(a.index in t.content){let u=t.content[a.index];t.content[a.index]=ye(this,Wt,"m",Uw).call(this,a,u)}else t.content[a.index]=a,r.push(a);return[t,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Uw=function(e,t){return ur.accumulateDelta(t,e)},zw=function(e){switch(kn(this,dh,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":kn(this,Li,e.data,"f"),ye(this,bn,"f")&&(this._emit("toolCallDone",ye(this,bn,"f")),kn(this,bn,void 0,"f"));break}};class tg extends Te{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,r){return this._client.post(`/assistants/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e={},t){return ft(e)?this.list({},e):this._client.getAPIList("/assistants",ng,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class ng extends Vt{}tg.AssistantsPage=ng;function Hw(n){return typeof n.parse=="function"}const aa=n=>(n==null?void 0:n.role)==="assistant",cS=n=>(n==null?void 0:n.role)==="function",hS=n=>(n==null?void 0:n.role)==="tool";function rg(n){return(n==null?void 0:n.$brand)==="auto-parseable-response-format"}function mu(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function $2(n,e){return!e||!dS(e)?{...n,choices:n.choices.map(t=>({...t,message:{...t.message,parsed:null,...t.message.tool_calls?{tool_calls:t.message.tool_calls}:void 0}}))}:sg(n,e)}function sg(n,e){const t=n.choices.map(r=>{var o;if(r.finish_reason==="length")throw new G1;if(r.finish_reason==="content_filter")throw new Q1;return{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:((o=r.message.tool_calls)==null?void 0:o.map(a=>B2(e,a)))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?j2(e,r.message.content):null}}});return{...n,choices:t}}function j2(n,e){var t,r;return((t=n.response_format)==null?void 0:t.type)!=="json_schema"?null:((r=n.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in n.response_format?n.response_format.$parseRaw(e):JSON.parse(e):null}function B2(n,e){var r;const t=(r=n.tools)==null?void 0:r.find(o=>{var a;return((a=o.function)==null?void 0:a.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:mu(t)?t.$parseRaw(e.function.arguments):t!=null&&t.function.strict?JSON.parse(e.function.arguments):null}}}function U2(n,e){var r;if(!n)return!1;const t=(r=n.tools)==null?void 0:r.find(o=>{var a;return((a=o.function)==null?void 0:a.name)===e.function.name});return mu(t)||(t==null?void 0:t.function.strict)||!1}function dS(n){var e;return rg(n.response_format)?!0:((e=n.tools)==null?void 0:e.some(t=>mu(t)||t.type==="function"&&t.function.strict===!0))??!1}function z2(n){for(const e of n??[]){if(e.type!=="function")throw new Ee(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Ee(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var vn=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},nn,Xp,Dh,Jp,Yp,Zp,fS,em;const qw=10;class pS extends eg{constructor(){super(...arguments),nn.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=(r=e.choices[0])==null?void 0:r.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),(cS(e)||hS(e))&&e.content)this._emit("functionCallResult",e.content);else if(aa(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(aa(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Ee("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),vn(this,nn,"m",Xp).call(this)}async finalMessage(){return await this.done(),vn(this,nn,"m",Dh).call(this)}async finalFunctionCall(){return await this.done(),vn(this,nn,"m",Jp).call(this)}async finalFunctionCallResult(){return await this.done(),vn(this,nn,"m",Yp).call(this)}async totalUsage(){return await this.done(),vn(this,nn,"m",Zp).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=vn(this,nn,"m",Dh).call(this);t&&this._emit("finalMessage",t);const r=vn(this,nn,"m",Xp).call(this);r&&this._emit("finalContent",r);const o=vn(this,nn,"m",Jp).call(this);o&&this._emit("finalFunctionCall",o);const a=vn(this,nn,"m",Yp).call(this);a!=null&&this._emit("finalFunctionCallResult",a),this._chatCompletions.some(u=>u.usage)&&this._emit("totalUsage",vn(this,nn,"m",Zp).call(this))}async _createChatCompletion(e,t,r){const o=r==null?void 0:r.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),vn(this,nn,"m",fS).call(this,t);const a=await e.chat.completions.create({...t,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(sg(a,t))}async _runChatCompletion(e,t,r){for(const o of t.messages)this._addMessage(o,!1);return await this._createChatCompletion(e,t,r)}async _runFunctions(e,t,r){var E;const o="function",{function_call:a="auto",stream:u,...d}=t,p=typeof a!="string"&&(a==null?void 0:a.name),{maxChatCompletions:m=qw}=r||{},_={};for(const A of t.functions)_[A.name||A.function.name]=A;const w=t.functions.map(A=>({name:A.name||A.function.name,parameters:A.parameters,description:A.description}));for(const A of t.messages)this._addMessage(A,!1);for(let A=0;A<m;++A){const N=(E=(await this._createChatCompletion(e,{...d,function_call:a,functions:w,messages:[...this.messages]},r)).choices[0])==null?void 0:E.message;if(!N)throw new Ee("missing message in ChatCompletion response");if(!N.function_call)return;const{name:b,arguments:Q}=N.function_call,B=_[b];if(B){if(p&&p!==b){const re=`Invalid function_call: ${JSON.stringify(b)}. ${JSON.stringify(p)} requested. Please try again`;this._addMessage({role:o,name:b,content:re});continue}}else{const re=`Invalid function_call: ${JSON.stringify(b)}. Available options are: ${w.map(k=>JSON.stringify(k.name)).join(", ")}. Please try again`;this._addMessage({role:o,name:b,content:re});continue}let q;try{q=Hw(B)?await B.parse(Q):Q}catch(re){this._addMessage({role:o,name:b,content:re instanceof Error?re.message:String(re)});continue}const G=await B.function(q,this),le=vn(this,nn,"m",em).call(this,G);if(this._addMessage({role:o,name:b,content:le}),p)return}}async _runTools(e,t,r){var A,V,N;const o="tool",{tool_choice:a="auto",stream:u,...d}=t,p=typeof a!="string"&&((A=a==null?void 0:a.function)==null?void 0:A.name),{maxChatCompletions:m=qw}=r||{},_=t.tools.map(b=>{if(mu(b)){if(!b.$callback)throw new Ee("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:b.$callback,name:b.function.name,description:b.function.description||"",parameters:b.function.parameters,parse:b.$parseRaw,strict:!0}}}return b}),w={};for(const b of _)b.type==="function"&&(w[b.function.name||b.function.function.name]=b.function);const E="tools"in t?_.map(b=>b.type==="function"?{type:"function",function:{name:b.function.name||b.function.function.name,parameters:b.function.parameters,description:b.function.description,strict:b.function.strict}}:b):void 0;for(const b of t.messages)this._addMessage(b,!1);for(let b=0;b<m;++b){const B=(V=(await this._createChatCompletion(e,{...d,tool_choice:a,tools:E,messages:[...this.messages]},r)).choices[0])==null?void 0:V.message;if(!B)throw new Ee("missing message in ChatCompletion response");if(!((N=B.tool_calls)!=null&&N.length))return;for(const q of B.tool_calls){if(q.type!=="function")continue;const G=q.id,{name:le,arguments:re}=q.function,k=w[le];if(k){if(p&&p!==le){const D=`Invalid tool_call: ${JSON.stringify(le)}. ${JSON.stringify(p)} requested. Please try again`;this._addMessage({role:o,tool_call_id:G,content:D});continue}}else{const D=`Invalid tool_call: ${JSON.stringify(le)}. Available options are: ${Object.keys(w).map(L=>JSON.stringify(L)).join(", ")}. Please try again`;this._addMessage({role:o,tool_call_id:G,content:D});continue}let x;try{x=Hw(k)?await k.parse(re):re}catch(D){const L=D instanceof Error?D.message:String(D);this._addMessage({role:o,tool_call_id:G,content:L});continue}const R=await k.function(x,this),P=vn(this,nn,"m",em).call(this,R);if(this._addMessage({role:o,tool_call_id:G,content:P}),p)return}}}}nn=new WeakSet,Xp=function(){return vn(this,nn,"m",Dh).call(this).content??null},Dh=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(aa(t)){const{function_call:r,...o}=t,a={...o,content:t.content??null,refusal:t.refusal??null};return r&&(a.function_call=r),a}}throw new Ee("stream ended without producing a ChatCompletionMessage with role=assistant")},Jp=function(){var e,t;for(let r=this.messages.length-1;r>=0;r--){const o=this.messages[r];if(aa(o)&&(o!=null&&o.function_call))return o.function_call;if(aa(o)&&((e=o==null?void 0:o.tool_calls)!=null&&e.length))return(t=o.tool_calls.at(-1))==null?void 0:t.function}},Yp=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(cS(t)&&t.content!=null||hS(t)&&t.content!=null&&typeof t.content=="string"&&this.messages.some(r=>{var o;return r.role==="assistant"&&((o=r.tool_calls)==null?void 0:o.some(a=>a.type==="function"&&a.id===t.tool_call_id))}))return t.content}},Zp=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},fS=function(e){if(e.n!=null&&e.n>1)throw new Ee("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},em=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class ru extends pS{static runFunctions(e,t,r){const o=new ru,a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return o._run(()=>o._runFunctions(e,t,a)),o}static runTools(e,t,r){const o=new ru,a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return o._run(()=>o._runTools(e,t,a)),o}_addMessage(e,t=!0){super._addMessage(e,t),aa(e)&&e.content&&this._emit("content",e.content)}}const mS=1,gS=2,yS=4,_S=8,vS=16,wS=32,ES=64,SS=128,TS=256,xS=SS|TS,AS=vS|wS|xS|ES,RS=mS|gS|AS,IS=yS|_S,H2=RS|IS,jt={STR:mS,NUM:gS,ARR:yS,OBJ:_S,NULL:vS,BOOL:wS,NAN:ES,INFINITY:SS,MINUS_INFINITY:TS,INF:xS,SPECIAL:AS,ATOM:RS,COLLECTION:IS,ALL:H2};class q2 extends Error{}class W2 extends Error{}function G2(n,e=jt.ALL){if(typeof n!="string")throw new TypeError(`expecting str, got ${typeof n}`);if(!n.trim())throw new Error(`${n} is empty`);return Q2(n.trim(),e)}const Q2=(n,e)=>{const t=n.length;let r=0;const o=E=>{throw new q2(`${E} at position ${r}`)},a=E=>{throw new W2(`${E} at position ${r}`)},u=()=>(w(),r>=t&&o("Unexpected end of input"),n[r]==='"'?d():n[r]==="{"?p():n[r]==="["?m():n.substring(r,r+4)==="null"||jt.NULL&e&&t-r<4&&"null".startsWith(n.substring(r))?(r+=4,null):n.substring(r,r+4)==="true"||jt.BOOL&e&&t-r<4&&"true".startsWith(n.substring(r))?(r+=4,!0):n.substring(r,r+5)==="false"||jt.BOOL&e&&t-r<5&&"false".startsWith(n.substring(r))?(r+=5,!1):n.substring(r,r+8)==="Infinity"||jt.INFINITY&e&&t-r<8&&"Infinity".startsWith(n.substring(r))?(r+=8,1/0):n.substring(r,r+9)==="-Infinity"||jt.MINUS_INFINITY&e&&1<t-r&&t-r<9&&"-Infinity".startsWith(n.substring(r))?(r+=9,-1/0):n.substring(r,r+3)==="NaN"||jt.NAN&e&&t-r<3&&"NaN".startsWith(n.substring(r))?(r+=3,NaN):_()),d=()=>{const E=r;let A=!1;for(r++;r<t&&(n[r]!=='"'||A&&n[r-1]==="\\");)A=n[r]==="\\"?!A:!1,r++;if(n.charAt(r)=='"')try{return JSON.parse(n.substring(E,++r-Number(A)))}catch(V){a(String(V))}else if(jt.STR&e)try{return JSON.parse(n.substring(E,r-Number(A))+'"')}catch{return JSON.parse(n.substring(E,n.lastIndexOf("\\"))+'"')}o("Unterminated string literal")},p=()=>{r++,w();const E={};try{for(;n[r]!=="}";){if(w(),r>=t&&jt.OBJ&e)return E;const A=d();w(),r++;try{const V=u();Object.defineProperty(E,A,{value:V,writable:!0,enumerable:!0,configurable:!0})}catch(V){if(jt.OBJ&e)return E;throw V}w(),n[r]===","&&r++}}catch{if(jt.OBJ&e)return E;o("Expected '}' at end of object")}return r++,E},m=()=>{r++;const E=[];try{for(;n[r]!=="]";)E.push(u()),w(),n[r]===","&&r++}catch{if(jt.ARR&e)return E;o("Expected ']' at end of array")}return r++,E},_=()=>{if(r===0){n==="-"&&jt.NUM&e&&o("Not sure what '-' is");try{return JSON.parse(n)}catch(A){if(jt.NUM&e)try{return n[n.length-1]==="."?JSON.parse(n.substring(0,n.lastIndexOf("."))):JSON.parse(n.substring(0,n.lastIndexOf("e")))}catch{}a(String(A))}}const E=r;for(n[r]==="-"&&r++;n[r]&&!",]}".includes(n[r]);)r++;r==t&&!(jt.NUM&e)&&o("Unterminated number literal");try{return JSON.parse(n.substring(E,r))}catch{n.substring(E,r)==="-"&&jt.NUM&e&&o("Not sure what '-' is");try{return JSON.parse(n.substring(E,n.lastIndexOf("e")))}catch(V){a(String(V))}}},w=()=>{for(;r<t&&` 
\r	`.includes(n[r]);)r++};return u()},Ww=n=>G2(n,jt.ALL^jt.NUM);var Ho=function(n,e,t,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!o:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(n,t):o?o.value=t:e.set(n,t),t},Ke=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},Pt,es,qo,Fs,up,Gc,cp,hp,dp,Qc,fp,Gw;class su extends pS{constructor(e){super(),Pt.add(this),es.set(this,void 0),qo.set(this,void 0),Fs.set(this,void 0),Ho(this,es,e,"f"),Ho(this,qo,[],"f")}get currentChatCompletionSnapshot(){return Ke(this,Fs,"f")}static fromReadableStream(e){const t=new su(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,r){const o=new su(t);return o._run(()=>o._runChatCompletion(e,{...t,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createChatCompletion(e,t,r){var u;super._createChatCompletion;const o=r==null?void 0:r.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),Ke(this,Pt,"m",up).call(this);const a=await e.chat.completions.create({...t,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const d of a)Ke(this,Pt,"m",cp).call(this,d);if((u=a.controller.signal)!=null&&u.aborted)throw new zn;return this._addChatCompletion(Ke(this,Pt,"m",Qc).call(this))}async _fromReadableStream(e,t){var u;const r=t==null?void 0:t.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Ke(this,Pt,"m",up).call(this),this._connected();const o=kr.fromReadableStream(e,this.controller);let a;for await(const d of o)a&&a!==d.id&&this._addChatCompletion(Ke(this,Pt,"m",Qc).call(this)),Ke(this,Pt,"m",cp).call(this,d),a=d.id;if((u=o.controller.signal)!=null&&u.aborted)throw new zn;return this._addChatCompletion(Ke(this,Pt,"m",Qc).call(this))}[(es=new WeakMap,qo=new WeakMap,Fs=new WeakMap,Pt=new WeakSet,up=function(){this.ended||Ho(this,Fs,void 0,"f")},Gc=function(t){let r=Ke(this,qo,"f")[t.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},Ke(this,qo,"f")[t.index]=r,r)},cp=function(t){var o,a,u,d,p,m,_,w,E,A,V,N,b,Q,B;if(this.ended)return;const r=Ke(this,Pt,"m",Gw).call(this,t);this._emit("chunk",t,r);for(const q of t.choices){const G=r.choices[q.index];q.delta.content!=null&&((o=G.message)==null?void 0:o.role)==="assistant"&&((a=G.message)!=null&&a.content)&&(this._emit("content",q.delta.content,G.message.content),this._emit("content.delta",{delta:q.delta.content,snapshot:G.message.content,parsed:G.message.parsed})),q.delta.refusal!=null&&((u=G.message)==null?void 0:u.role)==="assistant"&&((d=G.message)!=null&&d.refusal)&&this._emit("refusal.delta",{delta:q.delta.refusal,snapshot:G.message.refusal}),((p=q.logprobs)==null?void 0:p.content)!=null&&((m=G.message)==null?void 0:m.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(_=q.logprobs)==null?void 0:_.content,snapshot:((w=G.logprobs)==null?void 0:w.content)??[]}),((E=q.logprobs)==null?void 0:E.refusal)!=null&&((A=G.message)==null?void 0:A.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(V=q.logprobs)==null?void 0:V.refusal,snapshot:((N=G.logprobs)==null?void 0:N.refusal)??[]});const le=Ke(this,Pt,"m",Gc).call(this,G);G.finish_reason&&(Ke(this,Pt,"m",dp).call(this,G),le.current_tool_call_index!=null&&Ke(this,Pt,"m",hp).call(this,G,le.current_tool_call_index));for(const re of q.delta.tool_calls??[])le.current_tool_call_index!==re.index&&(Ke(this,Pt,"m",dp).call(this,G),le.current_tool_call_index!=null&&Ke(this,Pt,"m",hp).call(this,G,le.current_tool_call_index)),le.current_tool_call_index=re.index;for(const re of q.delta.tool_calls??[]){const k=(b=G.message.tool_calls)==null?void 0:b[re.index];k!=null&&k.type&&((k==null?void 0:k.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(Q=k.function)==null?void 0:Q.name,index:re.index,arguments:k.function.arguments,parsed_arguments:k.function.parsed_arguments,arguments_delta:((B=re.function)==null?void 0:B.arguments)??""}):(k==null||k.type,void 0))}}},hp=function(t,r){var u,d,p;if(Ke(this,Pt,"m",Gc).call(this,t).done_tool_calls.has(r))return;const a=(u=t.message.tool_calls)==null?void 0:u[r];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const m=(p=(d=Ke(this,es,"f"))==null?void 0:d.tools)==null?void 0:p.find(_=>_.type==="function"&&_.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:r,arguments:a.function.arguments,parsed_arguments:mu(m)?m.$parseRaw(a.function.arguments):m!=null&&m.function.strict?JSON.parse(a.function.arguments):null})}else a.type},dp=function(t){var o,a;const r=Ke(this,Pt,"m",Gc).call(this,t);if(t.message.content&&!r.content_done){r.content_done=!0;const u=Ke(this,Pt,"m",fp).call(this);this._emit("content.done",{content:t.message.content,parsed:u?u.$parseRaw(t.message.content):null})}t.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:t.message.refusal})),(o=t.logprobs)!=null&&o.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:t.logprobs.content})),(a=t.logprobs)!=null&&a.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:t.logprobs.refusal}))},Qc=function(){if(this.ended)throw new Ee("stream has ended, this shouldn't happen");const t=Ke(this,Fs,"f");if(!t)throw new Ee("request ended without sending any chunks");return Ho(this,Fs,void 0,"f"),Ho(this,qo,[],"f"),K2(t,Ke(this,es,"f"))},fp=function(){var r;const t=(r=Ke(this,es,"f"))==null?void 0:r.response_format;return rg(t)?t:null},Gw=function(t){var r,o,a,u;let d=Ke(this,Fs,"f");const{choices:p,...m}=t;d?Object.assign(d,m):d=Ho(this,Fs,{...m,choices:[]},"f");for(const{delta:_,finish_reason:w,index:E,logprobs:A=null,...V}of t.choices){let N=d.choices[E];if(N||(N=d.choices[E]={finish_reason:w,index:E,message:{},logprobs:A,...V}),A)if(!N.logprobs)N.logprobs=Object.assign({},A);else{const{content:re,refusal:k,...x}=A;Object.assign(N.logprobs,x),re&&((r=N.logprobs).content??(r.content=[]),N.logprobs.content.push(...re)),k&&((o=N.logprobs).refusal??(o.refusal=[]),N.logprobs.refusal.push(...k))}if(w&&(N.finish_reason=w,Ke(this,es,"f")&&dS(Ke(this,es,"f")))){if(w==="length")throw new G1;if(w==="content_filter")throw new Q1}if(Object.assign(N,V),!_)continue;const{content:b,refusal:Q,function_call:B,role:q,tool_calls:G,...le}=_;if(Object.assign(N.message,le),Q&&(N.message.refusal=(N.message.refusal||"")+Q),q&&(N.message.role=q),B&&(N.message.function_call?(B.name&&(N.message.function_call.name=B.name),B.arguments&&((a=N.message.function_call).arguments??(a.arguments=""),N.message.function_call.arguments+=B.arguments)):N.message.function_call=B),b&&(N.message.content=(N.message.content||"")+b,!N.message.refusal&&Ke(this,Pt,"m",fp).call(this)&&(N.message.parsed=Ww(N.message.content))),G){N.message.tool_calls||(N.message.tool_calls=[]);for(const{index:re,id:k,type:x,function:R,...P}of G){const D=(u=N.message.tool_calls)[re]??(u[re]={});Object.assign(D,P),k&&(D.id=k),x&&(D.type=x),R&&(D.function??(D.function={name:R.name??"",arguments:""})),R!=null&&R.name&&(D.function.name=R.name),R!=null&&R.arguments&&(D.function.arguments+=R.arguments,U2(Ke(this,es,"f"),D)&&(D.function.parsed_arguments=Ww(D.function.arguments)))}}}return d},Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("chunk",o=>{const a=t.shift();a?a.resolve(o):e.push(o)}),this.on("end",()=>{r=!0;for(const o of t)o.resolve(void 0);t.length=0}),this.on("abort",o=>{r=!0;for(const a of t)a.reject(o);t.length=0}),this.on("error",o=>{r=!0;for(const a of t)a.reject(o);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,u)=>t.push({resolve:a,reject:u})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new kr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function K2(n,e){const{id:t,choices:r,created:o,model:a,system_fingerprint:u,...d}=n,p={...d,id:t,choices:r.map(({message:m,finish_reason:_,index:w,logprobs:E,...A})=>{if(!_)throw new Ee(`missing finish_reason for choice ${w}`);const{content:V=null,function_call:N,tool_calls:b,...Q}=m,B=m.role;if(!B)throw new Ee(`missing role for choice ${w}`);if(N){const{arguments:q,name:G}=N;if(q==null)throw new Ee(`missing function_call.arguments for choice ${w}`);if(!G)throw new Ee(`missing function_call.name for choice ${w}`);return{...A,message:{content:V,function_call:{arguments:q,name:G},role:B,refusal:m.refusal??null},finish_reason:_,index:w,logprobs:E}}return b?{...A,index:w,finish_reason:_,logprobs:E,message:{...Q,role:B,content:V,refusal:m.refusal??null,tool_calls:b.map((q,G)=>{const{function:le,type:re,id:k,...x}=q,{arguments:R,name:P,...D}=le||{};if(k==null)throw new Ee(`missing choices[${w}].tool_calls[${G}].id
${Kc(n)}`);if(re==null)throw new Ee(`missing choices[${w}].tool_calls[${G}].type
${Kc(n)}`);if(P==null)throw new Ee(`missing choices[${w}].tool_calls[${G}].function.name
${Kc(n)}`);if(R==null)throw new Ee(`missing choices[${w}].tool_calls[${G}].function.arguments
${Kc(n)}`);return{...x,id:k,type:re,function:{...D,name:P,arguments:R}}})}}:{...A,message:{...Q,content:V,role:B,refusal:m.refusal??null},finish_reason:_,index:w,logprobs:E}}),created:o,model:a,object:"chat.completion",...u?{system_fingerprint:u}:{}};return $2(p,e)}function Kc(n){return JSON.stringify(n)}class la extends su{static fromReadableStream(e){const t=new la(null);return t._run(()=>t._fromReadableStream(e)),t}static runFunctions(e,t,r){const o=new la(null),a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return o._run(()=>o._runFunctions(e,t,a)),o}static runTools(e,t,r){const o=new la(t),a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return o._run(()=>o._runTools(e,t,a)),o}}let kS=class extends Te{parse(e,t){return z2(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t==null?void 0:t.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(r=>sg(r,e))}runFunctions(e,t){return e.stream?la.runFunctions(this._client,e,t):ru.runFunctions(this._client,e,t)}runTools(e,t){return e.stream?la.runTools(this._client,e,t):ru.runTools(this._client,e,t)}stream(e,t){return su.createChatCompletion(this._client,e,t)}};class tm extends Te{constructor(){super(...arguments),this.completions=new kS(this._client)}}(function(n){n.Completions=kS})(tm||(tm={}));class CS extends Te{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class bS extends Te{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class ad extends Te{constructor(){super(...arguments),this.sessions=new CS(this._client),this.transcriptionSessions=new bS(this._client)}}ad.Sessions=CS;ad.TranscriptionSessions=bS;class ig extends Te{create(e,t,r){return this._client.post(`/threads/${e}/messages`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,t,r){return this._client.get(`/threads/${e}/messages/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,t,r,o){return this._client.post(`/threads/${e}/messages/${t}`,{body:r,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}list(e,t={},r){return ft(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,og,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,t,r){return this._client.delete(`/threads/${e}/messages/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class og extends Vt{}ig.MessagesPage=og;class ag extends Te{retrieve(e,t,r,o={},a){return ft(o)?this.retrieve(e,t,r,{},o):this._client.get(`/threads/${e}/runs/${t}/steps/${r}`,{query:o,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}list(e,t,r={},o){return ft(r)?this.list(e,t,{},r):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,lg,{query:r,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}}class lg extends Vt{}ag.RunStepsPage=lg;let gu=class extends Te{constructor(){super(...arguments),this.steps=new ag(this._client)}create(e,t,r){const{include:o,...a}=t;return this._client.post(`/threads/${e}/runs`,{query:{include:o},body:a,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:t.stream??!1})}retrieve(e,t,r){return this._client.get(`/threads/${e}/runs/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,t,r,o){return this._client.post(`/threads/${e}/runs/${t}`,{body:r,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}list(e,t={},r){return ft(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,ug,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(e,t,r){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,t,r){const o=await this.create(e,t,r);return await this.poll(e,o.id,r)}createAndStream(e,t,r){return ur.createAssistantStream(e,this._client.beta.threads.runs,t,r)}async poll(e,t,r){const o={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(o["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:a,response:u}=await this.retrieve(e,t,{...r,headers:{...r==null?void 0:r.headers,...o}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let d=5e3;if(r!=null&&r.pollIntervalMs)d=r.pollIntervalMs;else{const p=u.headers.get("openai-poll-after-ms");if(p){const m=parseInt(p);isNaN(m)||(d=m)}}await fu(d);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,t,r){return ur.createAssistantStream(e,this._client.beta.threads.runs,t,r)}submitToolOutputs(e,t,r,o){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:r,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers},stream:r.stream??!1})}async submitToolOutputsAndPoll(e,t,r,o){const a=await this.submitToolOutputs(e,t,r,o);return await this.poll(e,a.id,o)}submitToolOutputsStream(e,t,r,o){return ur.createToolAssistantStream(e,t,this._client.beta.threads.runs,r,o)}};class ug extends Vt{}gu.RunsPage=ug;gu.Steps=ag;gu.RunStepsPage=lg;class Ta extends Te{constructor(){super(...arguments),this.runs=new gu(this._client),this.messages=new ig(this._client)}create(e={},t){return ft(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,r){return this._client.post(`/threads/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers},stream:e.stream??!1})}async createAndRunPoll(e,t){const r=await this.createAndRun(e,t);return await this.runs.poll(r.thread_id,r.id,t)}createAndRunStream(e,t){return ur.createThreadAssistantStream(e,this._client.beta.threads,t)}}Ta.Runs=gu;Ta.RunsPage=ug;Ta.Messages=ig;Ta.MessagesPage=og;class xa extends Te{constructor(){super(...arguments),this.realtime=new ad(this._client),this.chat=new tm(this._client),this.assistants=new tg(this._client),this.threads=new Ta(this._client)}}xa.Realtime=ad;xa.Assistants=tg;xa.AssistantsPage=ng;xa.Threads=Ta;class PS extends Te{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class NS extends Te{retrieve(e,t,r){return this._client.get(`/containers/${e}/files/${t}/content`,{...r,headers:{Accept:"application/binary",...r==null?void 0:r.headers},__binaryResponse:!0})}}let ld=class extends Te{constructor(){super(...arguments),this.content=new NS(this._client)}create(e,t,r){return this._client.post(`/containers/${e}/files`,Bi({body:t,...r}))}retrieve(e,t,r){return this._client.get(`/containers/${e}/files/${t}`,r)}list(e,t={},r){return ft(t)?this.list(e,{},t):this._client.getAPIList(`/containers/${e}/files`,cg,{query:t,...r})}del(e,t,r){return this._client.delete(`/containers/${e}/files/${t}`,{...r,headers:{Accept:"*/*",...r==null?void 0:r.headers}})}};class cg extends Vt{}ld.FileListResponsesPage=cg;ld.Content=NS;class yu extends Te{constructor(){super(...arguments),this.files=new ld(this._client)}create(e,t){return this._client.post("/containers",{body:e,...t})}retrieve(e,t){return this._client.get(`/containers/${e}`,t)}list(e={},t){return ft(e)?this.list({},e):this._client.getAPIList("/containers",hg,{query:e,...t})}del(e,t){return this._client.delete(`/containers/${e}`,{...t,headers:{Accept:"*/*",...t==null?void 0:t.headers}})}}class hg extends Vt{}yu.ContainerListResponsesPage=hg;yu.Files=ld;yu.FileListResponsesPage=cg;class DS extends Te{create(e,t){const r=!!e.encoding_format;let o=r?e.encoding_format:"base64";r&&Ws("Request","User defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:o},...t});return r?a:(Ws("response","Decoding base64 embeddings to float32 array"),a._thenUnwrap(u=>(u&&u.data&&u.data.forEach(d=>{const p=d.embedding;d.embedding=M2(p)}),u)))}}class dg extends Te{retrieve(e,t,r,o){return this._client.get(`/evals/${e}/runs/${t}/output_items/${r}`,o)}list(e,t,r={},o){return ft(r)?this.list(e,t,{},r):this._client.getAPIList(`/evals/${e}/runs/${t}/output_items`,fg,{query:r,...o})}}class fg extends Vt{}dg.OutputItemListResponsesPage=fg;class _u extends Te{constructor(){super(...arguments),this.outputItems=new dg(this._client)}create(e,t,r){return this._client.post(`/evals/${e}/runs`,{body:t,...r})}retrieve(e,t,r){return this._client.get(`/evals/${e}/runs/${t}`,r)}list(e,t={},r){return ft(t)?this.list(e,{},t):this._client.getAPIList(`/evals/${e}/runs`,pg,{query:t,...r})}del(e,t,r){return this._client.delete(`/evals/${e}/runs/${t}`,r)}cancel(e,t,r){return this._client.post(`/evals/${e}/runs/${t}`,r)}}class pg extends Vt{}_u.RunListResponsesPage=pg;_u.OutputItems=dg;_u.OutputItemListResponsesPage=fg;class vu extends Te{constructor(){super(...arguments),this.runs=new _u(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(`/evals/${e}`,t)}update(e,t,r){return this._client.post(`/evals/${e}`,{body:t,...r})}list(e={},t){return ft(e)?this.list({},e):this._client.getAPIList("/evals",mg,{query:e,...t})}del(e,t){return this._client.delete(`/evals/${e}`,t)}}class mg extends Vt{}vu.EvalListResponsesPage=mg;vu.Runs=_u;vu.RunListResponsesPage=pg;let gg=class extends Te{create(e,t){return this._client.post("/files",Bi({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return ft(e)?this.list({},e):this._client.getAPIList("/files",yg,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/binary",...t==null?void 0:t.headers},__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,t)}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:r=1800*1e3}={}){const o=new Set(["processed","error","deleted"]),a=Date.now();let u=await this.retrieve(e);for(;!u.status||!o.has(u.status);)if(await fu(t),u=await this.retrieve(e),Date.now()-a>r)throw new Jm({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return u}};class yg extends Vt{}gg.FileObjectsPage=yg;class VS extends Te{}let OS=class extends Te{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...t})}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...t})}};class _g extends Te{constructor(){super(...arguments),this.graders=new OS(this._client)}}_g.Graders=OS;class vg extends Te{create(e,t,r){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,wg,{body:t,method:"post",...r})}retrieve(e,t={},r){return ft(t)?this.retrieve(e,{},t):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...r})}del(e,t,r){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions/${t}`,r)}}class wg extends rd{}vg.PermissionCreateResponsesPage=wg;let ud=class extends Te{constructor(){super(...arguments),this.permissions=new vg(this._client)}};ud.Permissions=vg;ud.PermissionCreateResponsesPage=wg;class Eg extends Te{list(e,t={},r){return ft(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,Sg,{query:t,...r})}}class Sg extends Vt{}Eg.FineTuningJobCheckpointsPage=Sg;class Aa extends Te{constructor(){super(...arguments),this.checkpoints=new Eg(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return ft(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",Tg,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},r){return ft(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,xg,{query:t,...r})}pause(e,t){return this._client.post(`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(`/fine_tuning/jobs/${e}/resume`,t)}}class Tg extends Vt{}class xg extends Vt{}Aa.FineTuningJobsPage=Tg;Aa.FineTuningJobEventsPage=xg;Aa.Checkpoints=Eg;Aa.FineTuningJobCheckpointsPage=Sg;class ni extends Te{constructor(){super(...arguments),this.methods=new VS(this._client),this.jobs=new Aa(this._client),this.checkpoints=new ud(this._client),this.alpha=new _g(this._client)}}ni.Methods=VS;ni.Jobs=Aa;ni.FineTuningJobsPage=Tg;ni.FineTuningJobEventsPage=xg;ni.Checkpoints=ud;ni.Alpha=_g;class LS extends Te{}class Ag extends Te{constructor(){super(...arguments),this.graderModels=new LS(this._client)}}Ag.GraderModels=LS;class MS extends Te{createVariation(e,t){return this._client.post("/images/variations",Bi({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",Bi({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}class Rg extends Te{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",Ig,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}class Ig extends rd{}Rg.ModelsPage=Ig;class FS extends Te{create(e,t){return this._client.post("/moderations",{body:e,...t})}}function X2(n,e){return!e||!Y2(e)?{...n,output_parsed:null,output:n.output.map(t=>t.type==="function_call"?{...t,parsed_arguments:null}:t.type==="message"?{...t,content:t.content.map(r=>({...r,parsed:null}))}:t)}:$S(n,e)}function $S(n,e){const t=n.output.map(o=>{if(o.type==="function_call")return{...o,parsed_arguments:tN(e,o)};if(o.type==="message"){const a=o.content.map(u=>u.type==="output_text"?{...u,parsed:J2(e,u.text)}:u);return{...o,content:a}}return o}),r=Object.assign({},n,{output:t});return Object.getOwnPropertyDescriptor(n,"output_text")||jS(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const o of r.output)if(o.type==="message"){for(const a of o.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),r}function J2(n,e){var t,r,o,a;return((r=(t=n.text)==null?void 0:t.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((o=n.text)==null?void 0:o.format)?((a=n.text)==null?void 0:a.format).$parseRaw(e):JSON.parse(e)}function Y2(n){var e;return!!rg((e=n.text)==null?void 0:e.format)}function Z2(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function eN(n,e){return n.find(t=>t.type==="function"&&t.name===e)}function tN(n,e){const t=eN(n.tools??[],e.name);return{...e,...e,parsed_arguments:Z2(t)?t.$parseRaw(e.arguments):t!=null&&t.strict?JSON.parse(e.arguments):null}}function jS(n){const e=[];for(const t of n.output)if(t.type==="message")for(const r of t.content)r.type==="output_text"&&e.push(r.text);n.output_text=e.join("")}class BS extends Te{list(e,t={},r){return ft(t)?this.list(e,{},t):this._client.getAPIList(`/responses/${e}/input_items`,rN,{query:t,...r})}}var Wo=function(n,e,t,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!o:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(n,t):o?o.value=t:e.set(n,t),t},$s=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},Go,Xc,js,Jc,Qw,Kw,Xw,Jw;class kg extends eg{constructor(e){super(),Go.add(this),Xc.set(this,void 0),js.set(this,void 0),Jc.set(this,void 0),Wo(this,Xc,e,"f")}static createResponse(e,t,r){const o=new kg(t);return o._run(()=>o._createOrRetrieveResponse(e,t,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createOrRetrieveResponse(e,t,r){var d;const o=r==null?void 0:r.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),$s(this,Go,"m",Qw).call(this);let a,u=null;"response_id"in t?(a=await e.responses.retrieve(t.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),u=t.starting_after??null):a=await e.responses.create({...t,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const p of a)$s(this,Go,"m",Kw).call(this,p,u);if((d=a.controller.signal)!=null&&d.aborted)throw new zn;return $s(this,Go,"m",Xw).call(this)}[(Xc=new WeakMap,js=new WeakMap,Jc=new WeakMap,Go=new WeakSet,Qw=function(){this.ended||Wo(this,js,void 0,"f")},Kw=function(t,r){if(this.ended)return;const o=(u,d)=>{(r==null||d.sequence_number>r)&&this._emit(u,d)},a=$s(this,Go,"m",Jw).call(this,t);switch(o("event",t),t.type){case"response.output_text.delta":{const u=a.output[t.output_index];if(!u)throw new Ee(`missing output at index ${t.output_index}`);if(u.type==="message"){const d=u.content[t.content_index];if(!d)throw new Ee(`missing content at index ${t.content_index}`);if(d.type!=="output_text")throw new Ee(`expected content to be 'output_text', got ${d.type}`);o("response.output_text.delta",{...t,snapshot:d.text})}break}case"response.function_call_arguments.delta":{const u=a.output[t.output_index];if(!u)throw new Ee(`missing output at index ${t.output_index}`);u.type==="function_call"&&o("response.function_call_arguments.delta",{...t,snapshot:u.arguments});break}default:o(t.type,t);break}},Xw=function(){if(this.ended)throw new Ee("stream has ended, this shouldn't happen");const t=$s(this,js,"f");if(!t)throw new Ee("request ended without sending any events");Wo(this,js,void 0,"f");const r=nN(t,$s(this,Xc,"f"));return Wo(this,Jc,r,"f"),r},Jw=function(t){let r=$s(this,js,"f");if(!r){if(t.type!=="response.created")throw new Ee(`When snapshot hasn't been set yet, expected 'response.created' event, got ${t.type}`);return r=Wo(this,js,t.response,"f"),r}switch(t.type){case"response.output_item.added":{r.output.push(t.item);break}case"response.content_part.added":{const o=r.output[t.output_index];if(!o)throw new Ee(`missing output at index ${t.output_index}`);o.type==="message"&&o.content.push(t.part);break}case"response.output_text.delta":{const o=r.output[t.output_index];if(!o)throw new Ee(`missing output at index ${t.output_index}`);if(o.type==="message"){const a=o.content[t.content_index];if(!a)throw new Ee(`missing content at index ${t.content_index}`);if(a.type!=="output_text")throw new Ee(`expected content to be 'output_text', got ${a.type}`);a.text+=t.delta}break}case"response.function_call_arguments.delta":{const o=r.output[t.output_index];if(!o)throw new Ee(`missing output at index ${t.output_index}`);o.type==="function_call"&&(o.arguments+=t.delta);break}case"response.completed":{Wo(this,js,t.response,"f");break}}return r},Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("event",o=>{const a=t.shift();a?a.resolve(o):e.push(o)}),this.on("end",()=>{r=!0;for(const o of t)o.resolve(void 0);t.length=0}),this.on("abort",o=>{r=!0;for(const a of t)a.reject(o);t.length=0}),this.on("error",o=>{r=!0;for(const a of t)a.reject(o);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,u)=>t.push({resolve:a,reject:u})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=$s(this,Jc,"f");if(!e)throw new Ee("stream ended without producing a ChatCompletion");return e}}function nN(n,e){return X2(n,e)}class Cg extends Te{constructor(){super(...arguments),this.inputItems=new BS(this._client)}create(e,t){return this._client.post("/responses",{body:e,...t,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&jS(r),r))}retrieve(e,t={},r){return this._client.get(`/responses/${e}`,{query:t,...r,stream:(t==null?void 0:t.stream)??!1})}del(e,t){return this._client.delete(`/responses/${e}`,{...t,headers:{Accept:"*/*",...t==null?void 0:t.headers}})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(r=>$S(r,e))}stream(e,t){return kg.createResponse(this._client,e,t)}cancel(e,t){return this._client.post(`/responses/${e}/cancel`,{...t,headers:{Accept:"*/*",...t==null?void 0:t.headers}})}}class rN extends Vt{}Cg.InputItems=BS;class US extends Te{create(e,t,r){return this._client.post(`/uploads/${e}/parts`,Bi({body:t,...r}))}}class bg extends Te{constructor(){super(...arguments),this.parts=new US(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(`/uploads/${e}/cancel`,t)}complete(e,t,r){return this._client.post(`/uploads/${e}/complete`,{body:t,...r})}}bg.Parts=US;const sN=async n=>{const e=await Promise.allSettled(n),t=e.filter(o=>o.status==="rejected");if(t.length){for(const o of t)console.error(o.reason);throw new Error(`${t.length} promise(s) failed - see the above errors`)}const r=[];for(const o of e)o.status==="fulfilled"&&r.push(o.value);return r};class cd extends Te{create(e,t,r){return this._client.post(`/vector_stores/${e}/files`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,t,r){return this._client.get(`/vector_stores/${e}/files/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,t,r,o){return this._client.post(`/vector_stores/${e}/files/${t}`,{body:r,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}list(e,t={},r){return ft(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,hd,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,t,r){return this._client.delete(`/vector_stores/${e}/files/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,t,r){const o=await this.create(e,t,r);return await this.poll(e,o.id,r)}async poll(e,t,r){const o={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(o["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const a=await this.retrieve(e,t,{...r,headers:o}).withResponse(),u=a.data;switch(u.status){case"in_progress":let d=5e3;if(r!=null&&r.pollIntervalMs)d=r.pollIntervalMs;else{const p=a.response.headers.get("openai-poll-after-ms");if(p){const m=parseInt(p);isNaN(m)||(d=m)}}await fu(d);break;case"failed":case"completed":return u}}}async upload(e,t,r){const o=await this._client.files.create({file:t,purpose:"assistants"},r);return this.create(e,{file_id:o.id},r)}async uploadAndPoll(e,t,r){const o=await this.upload(e,t,r);return await this.poll(e,o.id,r)}content(e,t,r){return this._client.getAPIList(`/vector_stores/${e}/files/${t}/content`,Pg,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class hd extends Vt{}class Pg extends rd{}cd.VectorStoreFilesPage=hd;cd.FileContentResponsesPage=Pg;class zS extends Te{create(e,t,r){return this._client.post(`/vector_stores/${e}/file_batches`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,t,r){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(e,t,r){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,t,r){const o=await this.create(e,t);return await this.poll(e,o.id,r)}listFiles(e,t,r={},o){return ft(r)?this.listFiles(e,t,{},r):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,hd,{query:r,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}async poll(e,t,r){const o={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(o["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:a,response:u}=await this.retrieve(e,t,{...r,headers:o}).withResponse();switch(a.status){case"in_progress":let d=5e3;if(r!=null&&r.pollIntervalMs)d=r.pollIntervalMs;else{const p=u.headers.get("openai-poll-after-ms");if(p){const m=parseInt(p);isNaN(m)||(d=m)}}await fu(d);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:t,fileIds:r=[]},o){if(t==null||t.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=(o==null?void 0:o.maxConcurrency)??5,u=Math.min(a,t.length),d=this._client,p=t.values(),m=[...r];async function _(E){for(let A of E){const V=await d.files.create({file:A,purpose:"assistants"},o);m.push(V.id)}}const w=Array(u).fill(p).map(_);return await sN(w),await this.createAndPoll(e,{file_ids:m})}}class ri extends Te{constructor(){super(...arguments),this.files=new cd(this._client),this.fileBatches=new zS(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,r){return this._client.post(`/vector_stores/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e={},t){return ft(e)?this.list({},e):this._client.getAPIList("/vector_stores",Ng,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}search(e,t,r){return this._client.getAPIList(`/vector_stores/${e}/search`,Dg,{body:t,method:"post",...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class Ng extends Vt{}class Dg extends rd{}ri.VectorStoresPage=Ng;ri.VectorStoreSearchResponsesPage=Dg;ri.Files=cd;ri.VectorStoreFilesPage=hd;ri.FileContentResponsesPage=Pg;ri.FileBatches=zS;var HS;class Ie extends A2{constructor({baseURL:e=qc("OPENAI_BASE_URL"),apiKey:t=qc("OPENAI_API_KEY"),organization:r=qc("OPENAI_ORG_ID")??null,project:o=qc("OPENAI_PROJECT_ID")??null,...a}={}){if(t===void 0)throw new Ee("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const u={apiKey:t,organization:r,project:o,...a,baseURL:e||"https://api.openai.com/v1"};if(!u.dangerouslyAllowBrowser&&O2())throw new Ee(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:u.baseURL,timeout:u.timeout??6e5,httpAgent:u.httpAgent,maxRetries:u.maxRetries,fetch:u.fetch}),this.completions=new PS(this),this.chat=new od(this),this.embeddings=new DS(this),this.files=new gg(this),this.images=new MS(this),this.audio=new pu(this),this.moderations=new FS(this),this.models=new Rg(this),this.fineTuning=new ni(this),this.graders=new Ag(this),this.vectorStores=new ri(this),this.beta=new xa(this),this.batches=new Ym(this),this.uploads=new bg(this),this.responses=new Cg(this),this.evals=new vu(this),this.containers=new yu(this),this._options=u,this.apiKey=t,this.organization=r,this.project=o}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return a2(e,{arrayFormat:"brackets"})}}HS=Ie;Ie.OpenAI=HS;Ie.DEFAULT_TIMEOUT=6e5;Ie.OpenAIError=Ee;Ie.APIError=Xt;Ie.APIConnectionError=Zh;Ie.APIConnectionTimeoutError=Jm;Ie.APIUserAbortError=zn;Ie.NotFoundError=U1;Ie.ConflictError=z1;Ie.RateLimitError=q1;Ie.BadRequestError=$1;Ie.AuthenticationError=j1;Ie.InternalServerError=W1;Ie.PermissionDeniedError=B1;Ie.UnprocessableEntityError=H1;Ie.toFile=Y1;Ie.fileFromPath=L1;Ie.Completions=PS;Ie.Chat=od;Ie.ChatCompletionsPage=id;Ie.Embeddings=DS;Ie.Files=gg;Ie.FileObjectsPage=yg;Ie.Images=MS;Ie.Audio=pu;Ie.Moderations=FS;Ie.Models=Rg;Ie.ModelsPage=Ig;Ie.FineTuning=ni;Ie.Graders=Ag;Ie.VectorStores=ri;Ie.VectorStoresPage=Ng;Ie.VectorStoreSearchResponsesPage=Dg;Ie.Beta=xa;Ie.Batches=Ym;Ie.BatchesPage=Zm;Ie.Uploads=bg;Ie.Responses=Cg;Ie.Evals=vu;Ie.EvalListResponsesPage=mg;Ie.Containers=yu;Ie.ContainerListResponsesPage=hg;const iN=void 0,oN=void 0,Yw="gpt-5";async function aN(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(r)).map(o=>o.toString(16).padStart(2,"0")).join("")}async function lN(n){const e=await FR(()=>import("./pdf-CcZYcL52.js"),[]);e.GlobalWorkerOptions.workerSrc=new URL("/assets/pdf.worker.min-yatZIOMy.mjs",import.meta.url).href,console.log("[PDF] Starting text extraction for:",n.name,`(${(n.size/1024).toFixed(1)} KB)`);const t=await n.arrayBuffer();console.log("[PDF] ArrayBuffer created, size:",t.byteLength,"bytes");const r=await e.getDocument({data:t,verbosity:0}).promise;console.log("[PDF] Document loaded, pages:",r.numPages);const o=[];for(let u=1;u<=r.numPages;u++){const p=await(await r.getPage(u)).getTextContent(),m=p.items.map(_=>_.str).join(" ");console.log(`[PDF] Page ${u}/${r.numPages}: ${p.items.length} items, ${m.length} chars`),o.push(m)}const a=o.join(`

`);return console.log("[PDF] Extraction complete. Total length:",a.length,"chars"),a}function uN(){const[n,e]=z.useState(!1),[t,r]=z.useState(""),[o,a]=z.useState(""),[u,d]=z.useState(null),[p,m]=z.useState(!1),[_,w]=z.useState(!1),[E,A]=z.useState(""),V=z.useRef(null),N=y0(),b=async G=>{G.preventDefault(),await aN(t)===iN?(e(!0),a("")):a("Incorrect password.")},Q=G=>{G&&G.type==="application/pdf"?(d(G),A("")):A("Please select a PDF file.")},B=z.useCallback(G=>{G.preventDefault(),m(!1),G.dataTransfer.files.length&&Q(G.dataTransfer.files[0])},[]),q=async()=>{if(u){w(!0),A("");try{const G=await lN(u);if(!G||G.trim().length<50)throw new Error("Could not extract enough text from the PDF. It may be image-based.");const le=new Ie({apiKey:oN,dangerouslyAllowBrowser:!0});console.log("[OpenAI] Sending request to model:",Yw),console.log("[OpenAI] Prompt length:",yv.length+G.length,"chars");const re=await le.chat.completions.create({model:Yw,messages:[{role:"system",content:yv},{role:"user",content:`Here is the full text of the board game rulebook:

${G}`}]});console.log("[OpenAI] Response received. Usage:",re.usage);const k=re.choices[0].message.content;console.log("[OpenAI] Summary length:",k.length,"chars");const x=k.match(/^##\s+(.+?)(?:\s*\(|$)/m),R=x?x[1].trim():u.name.replace(/\.pdf$/i,"");console.log("[Summary] Game title:",R);const P=JP(10);console.log("[Firestore] Saving summary with id:",P),await GP(P,{gameTitle:R,originalFilename:u.name,markdown:k}),console.log("[Firestore] Save complete. Navigating to summary."),N(`/summary/${P}`)}catch(G){console.error(G),A(G.message||"Something went wrong. Please try again."),w(!1)}}};return _?ee.jsx(UR,{}):n?ee.jsxs(Wl,{className:"w-full max-w-md mx-auto",children:[ee.jsx(vp,{children:ee.jsxs(wp,{className:"flex items-center gap-2 text-lg",children:[ee.jsx(dv,{className:"w-5 h-5"}),"Upload Rulebook PDF"]})}),ee.jsxs(Gl,{className:"space-y-4",children:[ee.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors ${p?"border-primary bg-primary/5":"border-input hover:border-muted-foreground"}`,onClick:()=>{var G;return(G=V.current)==null?void 0:G.click()},onDragOver:G=>{G.preventDefault(),m(!0)},onDragLeave:()=>m(!1),onDrop:B,children:[u?ee.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm",children:[ee.jsx(D0,{className:"w-5 h-5 text-primary"}),ee.jsx("span",{className:"font-medium",children:u.name})]}):ee.jsxs("div",{className:"space-y-2",children:[ee.jsx(dv,{className:"w-8 h-8 mx-auto text-muted-foreground"}),ee.jsx("p",{className:"text-sm text-muted-foreground",children:"Click or drag a PDF here"})]}),ee.jsx("input",{ref:V,type:"file",accept:".pdf,application/pdf",className:"hidden",onChange:G=>G.target.files.length&&Q(G.target.files[0])})]}),E&&ee.jsx("p",{className:"text-sm text-destructive",children:E}),ee.jsx(na,{onClick:q,disabled:!u,className:"w-full",children:"Generate Summary"})]})]}):ee.jsxs(Wl,{className:"w-full max-w-md mx-auto",children:[ee.jsx(vp,{children:ee.jsxs(wp,{className:"flex items-center gap-2 text-lg",children:[ee.jsx(DR,{className:"w-5 h-5"}),"Generate New Summary"]})}),ee.jsxs(Gl,{children:[ee.jsxs("form",{onSubmit:b,className:"flex gap-2",children:[ee.jsx(dm,{type:"password",placeholder:"Enter password",value:t,onChange:G=>r(G.target.value)}),ee.jsx(na,{type:"submit",children:"Unlock"})]}),o&&ee.jsx("p",{className:"text-sm text-destructive mt-2",children:o})]})]})}function cN({summary:n}){const e=new Date(n.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return ee.jsx(ql,{to:`/summary/${n.id}`,children:ee.jsx(Wl,{className:"hover:bg-accent/50 transition-colors cursor-pointer",children:ee.jsxs(Gl,{className:"p-4 flex items-center gap-3",children:[ee.jsx(D0,{className:"w-5 h-5 text-muted-foreground shrink-0"}),ee.jsxs("div",{className:"min-w-0 flex-1",children:[ee.jsx("p",{className:"font-medium truncate",children:n.gameTitle}),ee.jsx("p",{className:"text-xs text-muted-foreground",children:e})]})]})})})}function hN(){const[n,e]=z.useState([]),[t,r]=z.useState(""),[o,a]=z.useState(!0);z.useEffect(()=>{KP().then(e).catch(console.error).finally(()=>a(!1))},[]);const u=n.filter(d=>d.gameTitle.toLowerCase().includes(t.toLowerCase()));return ee.jsx("div",{className:"min-h-screen bg-background",children:ee.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-12 space-y-10",children:[ee.jsxs("div",{className:"text-center space-y-2",children:[ee.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Board Game Rules Summarizer"}),ee.jsx("p",{className:"text-muted-foreground",children:"Upload a rulebook PDF to generate a concise rules reference sheet."})]}),ee.jsx(uN,{}),ee.jsxs("div",{className:"space-y-4",children:[ee.jsxs("div",{className:"flex items-center gap-3",children:[ee.jsx("h2",{className:"text-lg font-semibold whitespace-nowrap",children:"Summaries"}),ee.jsxs("div",{className:"relative flex-1",children:[ee.jsx(OR,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),ee.jsx(dm,{placeholder:"Search games...",value:t,onChange:d=>r(d.target.value),className:"pl-9"})]})]}),o?ee.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"Loading summaries..."}):u.length===0?ee.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:n.length===0?"No summaries yet. Upload a rulebook to get started.":"No matching summaries found."}):ee.jsx("div",{className:"space-y-2",children:u.map(d=>ee.jsx(cN,{summary:d},d.id))})]})]})})}function Vg(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Xi=Vg();function qS(n){Xi=n}var zl={exec:()=>null};function qe(n,e=""){let t=typeof n=="string"?n:n.source;const r={replace:(o,a)=>{let u=typeof a=="string"?a:a.source;return u=u.replace(cn.caret,"$1"),t=t.replace(o,u),r},getRegex:()=>new RegExp(t,e)};return r}var cn={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:n=>new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}#`),htmlBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}<(?:[a-z].*>|!--)`,"i")},dN=/^(?:[ \t]*(?:\n|$))+/,fN=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,pN=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,wu=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,mN=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Og=/(?:[*+-]|\d{1,9}[.)])/,WS=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,GS=qe(WS).replace(/bull/g,Og).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),gN=qe(WS).replace(/bull/g,Og).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Lg=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,yN=/^[^\n]+/,Mg=/(?!\s*\])(?:\\.|[^\[\]\\])+/,_N=qe(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Mg).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),vN=qe(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Og).getRegex(),dd="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Fg=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,wN=qe("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Fg).replace("tag",dd).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),QS=qe(Lg).replace("hr",wu).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",dd).getRegex(),EN=qe(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",QS).getRegex(),$g={blockquote:EN,code:fN,def:_N,fences:pN,heading:mN,hr:wu,html:wN,lheading:GS,list:vN,newline:dN,paragraph:QS,table:zl,text:yN},Zw=qe("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",wu).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",dd).getRegex(),SN={...$g,lheading:gN,table:Zw,paragraph:qe(Lg).replace("hr",wu).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Zw).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",dd).getRegex()},TN={...$g,html:qe(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Fg).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:zl,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:qe(Lg).replace("hr",wu).replace("heading",` *#{1,6} *[^
]`).replace("lheading",GS).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},xN=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,AN=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,KS=/^( {2,}|\\)\n(?!\s*$)/,RN=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,fd=/[\p{P}\p{S}]/u,jg=/[\s\p{P}\p{S}]/u,XS=/[^\s\p{P}\p{S}]/u,IN=qe(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,jg).getRegex(),JS=/(?!~)[\p{P}\p{S}]/u,kN=/(?!~)[\s\p{P}\p{S}]/u,CN=/(?:[^\s\p{P}\p{S}]|~)/u,bN=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,YS=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,PN=qe(YS,"u").replace(/punct/g,fd).getRegex(),NN=qe(YS,"u").replace(/punct/g,JS).getRegex(),ZS="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",DN=qe(ZS,"gu").replace(/notPunctSpace/g,XS).replace(/punctSpace/g,jg).replace(/punct/g,fd).getRegex(),VN=qe(ZS,"gu").replace(/notPunctSpace/g,CN).replace(/punctSpace/g,kN).replace(/punct/g,JS).getRegex(),ON=qe("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,XS).replace(/punctSpace/g,jg).replace(/punct/g,fd).getRegex(),LN=qe(/\\(punct)/,"gu").replace(/punct/g,fd).getRegex(),MN=qe(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),FN=qe(Fg).replace("(?:-->|$)","-->").getRegex(),$N=qe("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",FN).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Vh=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,jN=qe(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Vh).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),eT=qe(/^!?\[(label)\]\[(ref)\]/).replace("label",Vh).replace("ref",Mg).getRegex(),tT=qe(/^!?\[(ref)\](?:\[\])?/).replace("ref",Mg).getRegex(),BN=qe("reflink|nolink(?!\\()","g").replace("reflink",eT).replace("nolink",tT).getRegex(),Bg={_backpedal:zl,anyPunctuation:LN,autolink:MN,blockSkip:bN,br:KS,code:AN,del:zl,emStrongLDelim:PN,emStrongRDelimAst:DN,emStrongRDelimUnd:ON,escape:xN,link:jN,nolink:tT,punctuation:IN,reflink:eT,reflinkSearch:BN,tag:$N,text:RN,url:zl},UN={...Bg,link:qe(/^!?\[(label)\]\((.*?)\)/).replace("label",Vh).getRegex(),reflink:qe(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Vh).getRegex()},nm={...Bg,emStrongRDelimAst:VN,emStrongLDelim:NN,url:qe(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},zN={...nm,br:qe(KS).replace("{2,}","*").getRegex(),text:qe(nm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Yc={normal:$g,gfm:SN,pedantic:TN},xl={normal:Bg,gfm:nm,breaks:zN,pedantic:UN},HN={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},e0=n=>HN[n];function xr(n,e){if(e){if(cn.escapeTest.test(n))return n.replace(cn.escapeReplace,e0)}else if(cn.escapeTestNoEncode.test(n))return n.replace(cn.escapeReplaceNoEncode,e0);return n}function t0(n){try{n=encodeURI(n).replace(cn.percentDecode,"%")}catch{return null}return n}function n0(n,e){var a;const t=n.replace(cn.findPipe,(u,d,p)=>{let m=!1,_=d;for(;--_>=0&&p[_]==="\\";)m=!m;return m?"|":" |"}),r=t.split(cn.splitPipe);let o=0;if(r[0].trim()||r.shift(),r.length>0&&!((a=r.at(-1))!=null&&a.trim())&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;o<r.length;o++)r[o]=r[o].trim().replace(cn.slashPipe,"|");return r}function Al(n,e,t){const r=n.length;if(r===0)return"";let o=0;for(;o<r&&n.charAt(r-o-1)===e;)o++;return n.slice(0,r-o)}function qN(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let r=0;r<n.length;r++)if(n[r]==="\\")r++;else if(n[r]===e[0])t++;else if(n[r]===e[1]&&(t--,t<0))return r;return t>0?-2:-1}function r0(n,e,t,r,o){const a=e.href,u=e.title||null,d=n[1].replace(o.other.outputLinkReplace,"$1");r.state.inLink=!0;const p={type:n[0].charAt(0)==="!"?"image":"link",raw:t,href:a,title:u,text:d,tokens:r.inlineTokens(d)};return r.state.inLink=!1,p}function WN(n,e,t){const r=n.match(t.other.indentCodeCompensation);if(r===null)return e;const o=r[1];return e.split(`
`).map(a=>{const u=a.match(t.other.beginningSpace);if(u===null)return a;const[d]=u;return d.length>=o.length?a.slice(o.length):a}).join(`
`)}var Oh=class{constructor(n){Je(this,"options");Je(this,"rules");Je(this,"lexer");this.options=n||Xi}space(n){const e=this.rules.block.newline.exec(n);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(n){const e=this.rules.block.code.exec(n);if(e){const t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:Al(t,`
`)}}}fences(n){const e=this.rules.block.fences.exec(n);if(e){const t=e[0],r=WN(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(n){const e=this.rules.block.heading.exec(n);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){const r=Al(t,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(t=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(n){const e=this.rules.block.hr.exec(n);if(e)return{type:"hr",raw:Al(e[0],`
`)}}blockquote(n){const e=this.rules.block.blockquote.exec(n);if(e){let t=Al(e[0],`
`).split(`
`),r="",o="";const a=[];for(;t.length>0;){let u=!1;const d=[];let p;for(p=0;p<t.length;p++)if(this.rules.other.blockquoteStart.test(t[p]))d.push(t[p]),u=!0;else if(!u)d.push(t[p]);else break;t=t.slice(p);const m=d.join(`
`),_=m.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${m}`:m,o=o?`${o}
${_}`:_;const w=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(_,a,!0),this.lexer.state.top=w,t.length===0)break;const E=a.at(-1);if((E==null?void 0:E.type)==="code")break;if((E==null?void 0:E.type)==="blockquote"){const A=E,V=A.raw+`
`+t.join(`
`),N=this.blockquote(V);a[a.length-1]=N,r=r.substring(0,r.length-A.raw.length)+N.raw,o=o.substring(0,o.length-A.text.length)+N.text;break}else if((E==null?void 0:E.type)==="list"){const A=E,V=A.raw+`
`+t.join(`
`),N=this.list(V);a[a.length-1]=N,r=r.substring(0,r.length-E.raw.length)+N.raw,o=o.substring(0,o.length-A.raw.length)+N.raw,t=V.substring(a.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:a,text:o}}}list(n){let e=this.rules.block.list.exec(n);if(e){let t=e[1].trim();const r=t.length>1,o={type:"list",raw:"",ordered:r,start:r?+t.slice(0,-1):"",loose:!1,items:[]};t=r?`\\d{1,9}\\${t.slice(-1)}`:`\\${t}`,this.options.pedantic&&(t=r?t:"[*+-]");const a=this.rules.other.listItemRegex(t);let u=!1;for(;n;){let p=!1,m="",_="";if(!(e=a.exec(n))||this.rules.block.hr.test(n))break;m=e[0],n=n.substring(m.length);let w=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,Q=>" ".repeat(3*Q.length)),E=n.split(`
`,1)[0],A=!w.trim(),V=0;if(this.options.pedantic?(V=2,_=w.trimStart()):A?V=e[1].length+1:(V=e[2].search(this.rules.other.nonSpaceChar),V=V>4?1:V,_=w.slice(V),V+=e[1].length),A&&this.rules.other.blankLine.test(E)&&(m+=E+`
`,n=n.substring(E.length+1),p=!0),!p){const Q=this.rules.other.nextBulletRegex(V),B=this.rules.other.hrRegex(V),q=this.rules.other.fencesBeginRegex(V),G=this.rules.other.headingBeginRegex(V),le=this.rules.other.htmlBeginRegex(V);for(;n;){const re=n.split(`
`,1)[0];let k;if(E=re,this.options.pedantic?(E=E.replace(this.rules.other.listReplaceNesting,"  "),k=E):k=E.replace(this.rules.other.tabCharGlobal,"    "),q.test(E)||G.test(E)||le.test(E)||Q.test(E)||B.test(E))break;if(k.search(this.rules.other.nonSpaceChar)>=V||!E.trim())_+=`
`+k.slice(V);else{if(A||w.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||q.test(w)||G.test(w)||B.test(w))break;_+=`
`+E}!A&&!E.trim()&&(A=!0),m+=re+`
`,n=n.substring(re.length+1),w=k.slice(V)}}o.loose||(u?o.loose=!0:this.rules.other.doubleBlankLine.test(m)&&(u=!0));let N=null,b;this.options.gfm&&(N=this.rules.other.listIsTask.exec(_),N&&(b=N[0]!=="[ ] ",_=_.replace(this.rules.other.listReplaceTask,""))),o.items.push({type:"list_item",raw:m,task:!!N,checked:b,loose:!1,text:_,tokens:[]}),o.raw+=m}const d=o.items.at(-1);if(d)d.raw=d.raw.trimEnd(),d.text=d.text.trimEnd();else return;o.raw=o.raw.trimEnd();for(let p=0;p<o.items.length;p++)if(this.lexer.state.top=!1,o.items[p].tokens=this.lexer.blockTokens(o.items[p].text,[]),!o.loose){const m=o.items[p].tokens.filter(w=>w.type==="space"),_=m.length>0&&m.some(w=>this.rules.other.anyLine.test(w.raw));o.loose=_}if(o.loose)for(let p=0;p<o.items.length;p++)o.items[p].loose=!0;return o}}html(n){const e=this.rules.block.html.exec(n);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(n){const e=this.rules.block.def.exec(n);if(e){const t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:r,title:o}}}table(n){var u;const e=this.rules.block.table.exec(n);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;const t=n0(e[1]),r=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),o=(u=e[3])!=null&&u.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],a={type:"table",raw:e[0],header:[],align:[],rows:[]};if(t.length===r.length){for(const d of r)this.rules.other.tableAlignRight.test(d)?a.align.push("right"):this.rules.other.tableAlignCenter.test(d)?a.align.push("center"):this.rules.other.tableAlignLeft.test(d)?a.align.push("left"):a.align.push(null);for(let d=0;d<t.length;d++)a.header.push({text:t[d],tokens:this.lexer.inline(t[d]),header:!0,align:a.align[d]});for(const d of o)a.rows.push(n0(d,a.header.length).map((p,m)=>({text:p,tokens:this.lexer.inline(p),header:!1,align:a.align[m]})));return a}}lheading(n){const e=this.rules.block.lheading.exec(n);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(n){const e=this.rules.block.paragraph.exec(n);if(e){const t=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(n){const e=this.rules.block.text.exec(n);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(n){const e=this.rules.inline.escape.exec(n);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(n){const e=this.rules.inline.tag.exec(n);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(n){const e=this.rules.inline.link.exec(n);if(e){const t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;const a=Al(t.slice(0,-1),"\\");if((t.length-a.length)%2===0)return}else{const a=qN(e[2],"()");if(a===-2)return;if(a>-1){const d=(e[0].indexOf("!")===0?5:4)+e[1].length+a;e[2]=e[2].substring(0,a),e[0]=e[0].substring(0,d).trim(),e[3]=""}}let r=e[2],o="";if(this.options.pedantic){const a=this.rules.other.pedanticHrefTitle.exec(r);a&&(r=a[1],o=a[3])}else o=e[3]?e[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?r=r.slice(1):r=r.slice(1,-1)),r0(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(n,e){let t;if((t=this.rules.inline.reflink.exec(n))||(t=this.rules.inline.nolink.exec(n))){const r=(t[2]||t[1]).replace(this.rules.other.multipleSpaceGlobal," "),o=e[r.toLowerCase()];if(!o){const a=t[0].charAt(0);return{type:"text",raw:a,text:a}}return r0(t,o,t[0],this.lexer,this.rules)}}emStrong(n,e,t=""){let r=this.rules.inline.emStrongLDelim.exec(n);if(!r||r[3]&&t.match(this.rules.other.unicodeAlphaNumeric))return;if(!(r[1]||r[2]||"")||!t||this.rules.inline.punctuation.exec(t)){const a=[...r[0]].length-1;let u,d,p=a,m=0;const _=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(_.lastIndex=0,e=e.slice(-1*n.length+a);(r=_.exec(e))!=null;){if(u=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!u)continue;if(d=[...u].length,r[3]||r[4]){p+=d;continue}else if((r[5]||r[6])&&a%3&&!((a+d)%3)){m+=d;continue}if(p-=d,p>0)continue;d=Math.min(d,d+p+m);const w=[...r[0]][0].length,E=n.slice(0,a+r.index+w+d);if(Math.min(a,d)%2){const V=E.slice(1,-1);return{type:"em",raw:E,text:V,tokens:this.lexer.inlineTokens(V)}}const A=E.slice(2,-2);return{type:"strong",raw:E,text:A,tokens:this.lexer.inlineTokens(A)}}}}codespan(n){const e=this.rules.inline.code.exec(n);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," ");const r=this.rules.other.nonSpaceChar.test(t),o=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return r&&o&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(n){const e=this.rules.inline.br.exec(n);if(e)return{type:"br",raw:e[0]}}del(n){const e=this.rules.inline.del.exec(n);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(n){const e=this.rules.inline.autolink.exec(n);if(e){let t,r;return e[2]==="@"?(t=e[1],r="mailto:"+t):(t=e[1],r=t),{type:"link",raw:e[0],text:t,href:r,tokens:[{type:"text",raw:t,text:t}]}}}url(n){var t;let e;if(e=this.rules.inline.url.exec(n)){let r,o;if(e[2]==="@")r=e[0],o="mailto:"+r;else{let a;do a=e[0],e[0]=((t=this.rules.inline._backpedal.exec(e[0]))==null?void 0:t[0])??"";while(a!==e[0]);r=e[0],e[1]==="www."?o="http://"+e[0]:o=e[0]}return{type:"link",raw:e[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(n){const e=this.rules.inline.text.exec(n);if(e){const t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},ns=class rm{constructor(e){Je(this,"tokens");Je(this,"options");Je(this,"state");Je(this,"tokenizer");Je(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Xi,this.options.tokenizer=this.options.tokenizer||new Oh,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={other:cn,block:Yc.normal,inline:xl.normal};this.options.pedantic?(t.block=Yc.pedantic,t.inline=xl.pedantic):this.options.gfm&&(t.block=Yc.gfm,this.options.breaks?t.inline=xl.breaks:t.inline=xl.gfm),this.tokenizer.rules=t}static get rules(){return{block:Yc,inline:xl}}static lex(e,t){return new rm(t).lex(e)}static lexInline(e,t){return new rm(t).inlineTokens(e)}lex(e){e=e.replace(cn.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const r=this.inlineQueue[t];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],r=!1){var o,a,u;for(this.options.pedantic&&(e=e.replace(cn.tabCharGlobal,"    ").replace(cn.spaceLine,""));e;){let d;if((a=(o=this.options.extensions)==null?void 0:o.block)!=null&&a.some(m=>(d=m.call({lexer:this},e,t))?(e=e.substring(d.raw.length),t.push(d),!0):!1))continue;if(d=this.tokenizer.space(e)){e=e.substring(d.raw.length);const m=t.at(-1);d.raw.length===1&&m!==void 0?m.raw+=`
`:t.push(d);continue}if(d=this.tokenizer.code(e)){e=e.substring(d.raw.length);const m=t.at(-1);(m==null?void 0:m.type)==="paragraph"||(m==null?void 0:m.type)==="text"?(m.raw+=`
`+d.raw,m.text+=`
`+d.text,this.inlineQueue.at(-1).src=m.text):t.push(d);continue}if(d=this.tokenizer.fences(e)){e=e.substring(d.raw.length),t.push(d);continue}if(d=this.tokenizer.heading(e)){e=e.substring(d.raw.length),t.push(d);continue}if(d=this.tokenizer.hr(e)){e=e.substring(d.raw.length),t.push(d);continue}if(d=this.tokenizer.blockquote(e)){e=e.substring(d.raw.length),t.push(d);continue}if(d=this.tokenizer.list(e)){e=e.substring(d.raw.length),t.push(d);continue}if(d=this.tokenizer.html(e)){e=e.substring(d.raw.length),t.push(d);continue}if(d=this.tokenizer.def(e)){e=e.substring(d.raw.length);const m=t.at(-1);(m==null?void 0:m.type)==="paragraph"||(m==null?void 0:m.type)==="text"?(m.raw+=`
`+d.raw,m.text+=`
`+d.raw,this.inlineQueue.at(-1).src=m.text):this.tokens.links[d.tag]||(this.tokens.links[d.tag]={href:d.href,title:d.title});continue}if(d=this.tokenizer.table(e)){e=e.substring(d.raw.length),t.push(d);continue}if(d=this.tokenizer.lheading(e)){e=e.substring(d.raw.length),t.push(d);continue}let p=e;if((u=this.options.extensions)!=null&&u.startBlock){let m=1/0;const _=e.slice(1);let w;this.options.extensions.startBlock.forEach(E=>{w=E.call({lexer:this},_),typeof w=="number"&&w>=0&&(m=Math.min(m,w))}),m<1/0&&m>=0&&(p=e.substring(0,m+1))}if(this.state.top&&(d=this.tokenizer.paragraph(p))){const m=t.at(-1);r&&(m==null?void 0:m.type)==="paragraph"?(m.raw+=`
`+d.raw,m.text+=`
`+d.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=m.text):t.push(d),r=p.length!==e.length,e=e.substring(d.raw.length);continue}if(d=this.tokenizer.text(e)){e=e.substring(d.raw.length);const m=t.at(-1);(m==null?void 0:m.type)==="text"?(m.raw+=`
`+d.raw,m.text+=`
`+d.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=m.text):t.push(d);continue}if(e){const m="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(m);break}else throw new Error(m)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){var d,p,m;let r=e,o=null;if(this.tokens.links){const _=Object.keys(this.tokens.links);if(_.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)_.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,o.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(o=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let a=!1,u="";for(;e;){a||(u=""),a=!1;let _;if((p=(d=this.options.extensions)==null?void 0:d.inline)!=null&&p.some(E=>(_=E.call({lexer:this},e,t))?(e=e.substring(_.raw.length),t.push(_),!0):!1))continue;if(_=this.tokenizer.escape(e)){e=e.substring(_.raw.length),t.push(_);continue}if(_=this.tokenizer.tag(e)){e=e.substring(_.raw.length),t.push(_);continue}if(_=this.tokenizer.link(e)){e=e.substring(_.raw.length),t.push(_);continue}if(_=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(_.raw.length);const E=t.at(-1);_.type==="text"&&(E==null?void 0:E.type)==="text"?(E.raw+=_.raw,E.text+=_.text):t.push(_);continue}if(_=this.tokenizer.emStrong(e,r,u)){e=e.substring(_.raw.length),t.push(_);continue}if(_=this.tokenizer.codespan(e)){e=e.substring(_.raw.length),t.push(_);continue}if(_=this.tokenizer.br(e)){e=e.substring(_.raw.length),t.push(_);continue}if(_=this.tokenizer.del(e)){e=e.substring(_.raw.length),t.push(_);continue}if(_=this.tokenizer.autolink(e)){e=e.substring(_.raw.length),t.push(_);continue}if(!this.state.inLink&&(_=this.tokenizer.url(e))){e=e.substring(_.raw.length),t.push(_);continue}let w=e;if((m=this.options.extensions)!=null&&m.startInline){let E=1/0;const A=e.slice(1);let V;this.options.extensions.startInline.forEach(N=>{V=N.call({lexer:this},A),typeof V=="number"&&V>=0&&(E=Math.min(E,V))}),E<1/0&&E>=0&&(w=e.substring(0,E+1))}if(_=this.tokenizer.inlineText(w)){e=e.substring(_.raw.length),_.raw.slice(-1)!=="_"&&(u=_.raw.slice(-1)),a=!0;const E=t.at(-1);(E==null?void 0:E.type)==="text"?(E.raw+=_.raw,E.text+=_.text):t.push(_);continue}if(e){const E="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(E);break}else throw new Error(E)}}return t}},Lh=class{constructor(n){Je(this,"options");Je(this,"parser");this.options=n||Xi}space(n){return""}code({text:n,lang:e,escaped:t}){var a;const r=(a=(e||"").match(cn.notSpaceStart))==null?void 0:a[0],o=n.replace(cn.endingNewline,"")+`
`;return r?'<pre><code class="language-'+xr(r)+'">'+(t?o:xr(o,!0))+`</code></pre>
`:"<pre><code>"+(t?o:xr(o,!0))+`</code></pre>
`}blockquote({tokens:n}){return`<blockquote>
${this.parser.parse(n)}</blockquote>
`}html({text:n}){return n}heading({tokens:n,depth:e}){return`<h${e}>${this.parser.parseInline(n)}</h${e}>
`}hr(n){return`<hr>
`}list(n){const e=n.ordered,t=n.start;let r="";for(let u=0;u<n.items.length;u++){const d=n.items[u];r+=this.listitem(d)}const o=e?"ol":"ul",a=e&&t!==1?' start="'+t+'"':"";return"<"+o+a+`>
`+r+"</"+o+`>
`}listitem(n){var t;let e="";if(n.task){const r=this.checkbox({checked:!!n.checked});n.loose?((t=n.tokens[0])==null?void 0:t.type)==="paragraph"?(n.tokens[0].text=r+" "+n.tokens[0].text,n.tokens[0].tokens&&n.tokens[0].tokens.length>0&&n.tokens[0].tokens[0].type==="text"&&(n.tokens[0].tokens[0].text=r+" "+xr(n.tokens[0].tokens[0].text),n.tokens[0].tokens[0].escaped=!0)):n.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):e+=r+" "}return e+=this.parser.parse(n.tokens,!!n.loose),`<li>${e}</li>
`}checkbox({checked:n}){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:n}){return`<p>${this.parser.parseInline(n)}</p>
`}table(n){let e="",t="";for(let o=0;o<n.header.length;o++)t+=this.tablecell(n.header[o]);e+=this.tablerow({text:t});let r="";for(let o=0;o<n.rows.length;o++){const a=n.rows[o];t="";for(let u=0;u<a.length;u++)t+=this.tablecell(a[u]);r+=this.tablerow({text:t})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow({text:n}){return`<tr>
${n}</tr>
`}tablecell(n){const e=this.parser.parseInline(n.tokens),t=n.header?"th":"td";return(n.align?`<${t} align="${n.align}">`:`<${t}>`)+e+`</${t}>
`}strong({tokens:n}){return`<strong>${this.parser.parseInline(n)}</strong>`}em({tokens:n}){return`<em>${this.parser.parseInline(n)}</em>`}codespan({text:n}){return`<code>${xr(n,!0)}</code>`}br(n){return"<br>"}del({tokens:n}){return`<del>${this.parser.parseInline(n)}</del>`}link({href:n,title:e,tokens:t}){const r=this.parser.parseInline(t),o=t0(n);if(o===null)return r;n=o;let a='<a href="'+n+'"';return e&&(a+=' title="'+xr(e)+'"'),a+=">"+r+"</a>",a}image({href:n,title:e,text:t,tokens:r}){r&&(t=this.parser.parseInline(r,this.parser.textRenderer));const o=t0(n);if(o===null)return xr(t);n=o;let a=`<img src="${n}" alt="${t}"`;return e&&(a+=` title="${xr(e)}"`),a+=">",a}text(n){return"tokens"in n&&n.tokens?this.parser.parseInline(n.tokens):"escaped"in n&&n.escaped?n.text:xr(n.text)}},Ug=class{strong({text:n}){return n}em({text:n}){return n}codespan({text:n}){return n}del({text:n}){return n}html({text:n}){return n}text({text:n}){return n}link({text:n}){return""+n}image({text:n}){return""+n}br(){return""}},rs=class sm{constructor(e){Je(this,"options");Je(this,"renderer");Je(this,"textRenderer");this.options=e||Xi,this.options.renderer=this.options.renderer||new Lh,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Ug}static parse(e,t){return new sm(t).parse(e)}static parseInline(e,t){return new sm(t).parseInline(e)}parse(e,t=!0){var o,a;let r="";for(let u=0;u<e.length;u++){const d=e[u];if((a=(o=this.options.extensions)==null?void 0:o.renderers)!=null&&a[d.type]){const m=d,_=this.options.extensions.renderers[m.type].call({parser:this},m);if(_!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(m.type)){r+=_||"";continue}}const p=d;switch(p.type){case"space":{r+=this.renderer.space(p);continue}case"hr":{r+=this.renderer.hr(p);continue}case"heading":{r+=this.renderer.heading(p);continue}case"code":{r+=this.renderer.code(p);continue}case"table":{r+=this.renderer.table(p);continue}case"blockquote":{r+=this.renderer.blockquote(p);continue}case"list":{r+=this.renderer.list(p);continue}case"html":{r+=this.renderer.html(p);continue}case"paragraph":{r+=this.renderer.paragraph(p);continue}case"text":{let m=p,_=this.renderer.text(m);for(;u+1<e.length&&e[u+1].type==="text";)m=e[++u],_+=`
`+this.renderer.text(m);t?r+=this.renderer.paragraph({type:"paragraph",raw:_,text:_,tokens:[{type:"text",raw:_,text:_,escaped:!0}]}):r+=_;continue}default:{const m='Token with "'+p.type+'" type was not found.';if(this.options.silent)return console.error(m),"";throw new Error(m)}}}return r}parseInline(e,t=this.renderer){var o,a;let r="";for(let u=0;u<e.length;u++){const d=e[u];if((a=(o=this.options.extensions)==null?void 0:o.renderers)!=null&&a[d.type]){const m=this.options.extensions.renderers[d.type].call({parser:this},d);if(m!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(d.type)){r+=m||"";continue}}const p=d;switch(p.type){case"escape":{r+=t.text(p);break}case"html":{r+=t.html(p);break}case"link":{r+=t.link(p);break}case"image":{r+=t.image(p);break}case"strong":{r+=t.strong(p);break}case"em":{r+=t.em(p);break}case"codespan":{r+=t.codespan(p);break}case"br":{r+=t.br(p);break}case"del":{r+=t.del(p);break}case"text":{r+=t.text(p);break}default:{const m='Token with "'+p.type+'" type was not found.';if(this.options.silent)return console.error(m),"";throw new Error(m)}}}return r}},pp,fh=(pp=class{constructor(n){Je(this,"options");Je(this,"block");this.options=n||Xi}preprocess(n){return n}postprocess(n){return n}processAllTokens(n){return n}provideLexer(){return this.block?ns.lex:ns.lexInline}provideParser(){return this.block?rs.parse:rs.parseInline}},Je(pp,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),pp),GN=class{constructor(...n){Je(this,"defaults",Vg());Je(this,"options",this.setOptions);Je(this,"parse",this.parseMarkdown(!0));Je(this,"parseInline",this.parseMarkdown(!1));Je(this,"Parser",rs);Je(this,"Renderer",Lh);Je(this,"TextRenderer",Ug);Je(this,"Lexer",ns);Je(this,"Tokenizer",Oh);Je(this,"Hooks",fh);this.use(...n)}walkTokens(n,e){var r,o;let t=[];for(const a of n)switch(t=t.concat(e.call(this,a)),a.type){case"table":{const u=a;for(const d of u.header)t=t.concat(this.walkTokens(d.tokens,e));for(const d of u.rows)for(const p of d)t=t.concat(this.walkTokens(p.tokens,e));break}case"list":{const u=a;t=t.concat(this.walkTokens(u.items,e));break}default:{const u=a;(o=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&o[u.type]?this.defaults.extensions.childTokens[u.type].forEach(d=>{const p=u[d].flat(1/0);t=t.concat(this.walkTokens(p,e))}):u.tokens&&(t=t.concat(this.walkTokens(u.tokens,e)))}}return t}use(...n){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return n.forEach(t=>{const r={...t};if(r.async=this.defaults.async||r.async||!1,t.extensions&&(t.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){const a=e.renderers[o.name];a?e.renderers[o.name]=function(...u){let d=o.renderer.apply(this,u);return d===!1&&(d=a.apply(this,u)),d}:e.renderers[o.name]=o.renderer}if("tokenizer"in o){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const a=e[o.level];a?a.unshift(o.tokenizer):e[o.level]=[o.tokenizer],o.start&&(o.level==="block"?e.startBlock?e.startBlock.push(o.start):e.startBlock=[o.start]:o.level==="inline"&&(e.startInline?e.startInline.push(o.start):e.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(e.childTokens[o.name]=o.childTokens)}),r.extensions=e),t.renderer){const o=this.defaults.renderer||new Lh(this.defaults);for(const a in t.renderer){if(!(a in o))throw new Error(`renderer '${a}' does not exist`);if(["options","parser"].includes(a))continue;const u=a,d=t.renderer[u],p=o[u];o[u]=(...m)=>{let _=d.apply(o,m);return _===!1&&(_=p.apply(o,m)),_||""}}r.renderer=o}if(t.tokenizer){const o=this.defaults.tokenizer||new Oh(this.defaults);for(const a in t.tokenizer){if(!(a in o))throw new Error(`tokenizer '${a}' does not exist`);if(["options","rules","lexer"].includes(a))continue;const u=a,d=t.tokenizer[u],p=o[u];o[u]=(...m)=>{let _=d.apply(o,m);return _===!1&&(_=p.apply(o,m)),_}}r.tokenizer=o}if(t.hooks){const o=this.defaults.hooks||new fh;for(const a in t.hooks){if(!(a in o))throw new Error(`hook '${a}' does not exist`);if(["options","block"].includes(a))continue;const u=a,d=t.hooks[u],p=o[u];fh.passThroughHooks.has(a)?o[u]=m=>{if(this.defaults.async)return Promise.resolve(d.call(o,m)).then(w=>p.call(o,w));const _=d.call(o,m);return p.call(o,_)}:o[u]=(...m)=>{let _=d.apply(o,m);return _===!1&&(_=p.apply(o,m)),_}}r.hooks=o}if(t.walkTokens){const o=this.defaults.walkTokens,a=t.walkTokens;r.walkTokens=function(u){let d=[];return d.push(a.call(this,u)),o&&(d=d.concat(o.call(this,u))),d}}this.defaults={...this.defaults,...r}}),this}setOptions(n){return this.defaults={...this.defaults,...n},this}lexer(n,e){return ns.lex(n,e??this.defaults)}parser(n,e){return rs.parse(n,e??this.defaults)}parseMarkdown(n){return(t,r)=>{const o={...r},a={...this.defaults,...o},u=this.onError(!!a.silent,!!a.async);if(this.defaults.async===!0&&o.async===!1)return u(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return u(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return u(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));a.hooks&&(a.hooks.options=a,a.hooks.block=n);const d=a.hooks?a.hooks.provideLexer():n?ns.lex:ns.lexInline,p=a.hooks?a.hooks.provideParser():n?rs.parse:rs.parseInline;if(a.async)return Promise.resolve(a.hooks?a.hooks.preprocess(t):t).then(m=>d(m,a)).then(m=>a.hooks?a.hooks.processAllTokens(m):m).then(m=>a.walkTokens?Promise.all(this.walkTokens(m,a.walkTokens)).then(()=>m):m).then(m=>p(m,a)).then(m=>a.hooks?a.hooks.postprocess(m):m).catch(u);try{a.hooks&&(t=a.hooks.preprocess(t));let m=d(t,a);a.hooks&&(m=a.hooks.processAllTokens(m)),a.walkTokens&&this.walkTokens(m,a.walkTokens);let _=p(m,a);return a.hooks&&(_=a.hooks.postprocess(_)),_}catch(m){return u(m)}}}onError(n,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,n){const r="<p>An error occurred:</p><pre>"+xr(t.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(t);throw t}}},Ui=new GN;function Ge(n,e){return Ui.parse(n,e)}Ge.options=Ge.setOptions=function(n){return Ui.setOptions(n),Ge.defaults=Ui.defaults,qS(Ge.defaults),Ge};Ge.getDefaults=Vg;Ge.defaults=Xi;Ge.use=function(...n){return Ui.use(...n),Ge.defaults=Ui.defaults,qS(Ge.defaults),Ge};Ge.walkTokens=function(n,e){return Ui.walkTokens(n,e)};Ge.parseInline=Ui.parseInline;Ge.Parser=rs;Ge.parser=rs.parse;Ge.Renderer=Lh;Ge.TextRenderer=Ug;Ge.Lexer=ns;Ge.lexer=ns.lex;Ge.Tokenizer=Oh;Ge.Hooks=fh;Ge.parse=Ge;Ge.options;Ge.setOptions;Ge.use;Ge.walkTokens;Ge.parseInline;rs.parse;ns.lex;function QN(){const{id:n}=eA(),[e,t]=z.useState(null),[r,o]=z.useState(!0),[a,u]=z.useState(!1);if(z.useEffect(()=>{QP(n).then(_=>{_?t(_):u(!0)}).catch(console.error).finally(()=>o(!1))},[n]),r)return ee.jsx("div",{className:"min-h-screen flex items-center justify-center",children:ee.jsx("p",{className:"text-muted-foreground",children:"Loading..."})});if(a)return ee.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center gap-4",children:[ee.jsx("p",{className:"text-muted-foreground",children:"Summary not found."}),ee.jsx(ql,{to:"/",children:ee.jsx(na,{variant:"outline",children:"Go Home"})})]});const d=Ge(e.markdown),p=()=>{const _=new Blob([e.markdown],{type:"text/markdown"}),w=URL.createObjectURL(_),E=document.createElement("a");E.href=w,E.download=`${e.gameTitle} - Rules Summary.md`,E.click(),URL.revokeObjectURL(w)},m=new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return ee.jsxs("div",{className:"min-h-screen bg-background",children:[ee.jsx("header",{className:"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-b no-print",children:ee.jsxs("div",{className:"max-w-3xl mx-auto px-4 h-14 flex items-center justify-between",children:[ee.jsxs(ql,{to:"/",className:"text-sm text-muted-foreground hover:text-foreground flex items-center gap-1",children:[ee.jsx(bR,{className:"w-4 h-4"}),"All summaries"]}),ee.jsxs("div",{className:"flex gap-2",children:[ee.jsxs(na,{variant:"outline",size:"sm",onClick:p,children:[ee.jsx(NR,{className:"w-4 h-4 mr-1"}),"Markdown"]}),ee.jsxs(na,{size:"sm",onClick:()=>window.print(),children:[ee.jsx(VR,{className:"w-4 h-4 mr-1"}),"Print / PDF"]})]})]})}),ee.jsx("main",{className:"max-w-3xl mx-auto px-4 py-10",children:ee.jsx("div",{className:"prose",dangerouslySetInnerHTML:{__html:d}})}),ee.jsx("footer",{className:"border-t no-print",children:ee.jsx("div",{className:"max-w-3xl mx-auto px-4 py-4",children:ee.jsxs("p",{className:"text-xs text-muted-foreground",children:["Generated from ",ee.jsx("strong",{children:e.originalFilename})," on ",m]})})})]})}function KN(){return ee.jsx($A,{children:ee.jsxs(mA,{children:[ee.jsx(gp,{path:"/",element:ee.jsx(hN,{})}),ee.jsx(gp,{path:"/summary/:id",element:ee.jsx(QN,{})})]})})}yx.createRoot(document.getElementById("root")).render(ee.jsx(cx.StrictMode,{children:ee.jsx(KN,{})}));
